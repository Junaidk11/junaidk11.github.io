<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> CAN Network | Junaid Jawed Khan</title>
	   <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
	   <link rel="icon" href="../favicon.ico" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,900" rel="stylesheet">
    <link rel="stylesheet" href="../libs/font-awesome/css/font-awesome.min.css">
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/styles.css" rel="stylesheet">

    <style>
            #myBtn {
              display: none;
              position: fixed;
              bottom: 20px;
              right: 30px;
              z-index: 99;
              font-size: 18px;
              border: none;
              outline: none;
              background-color: black;
              color: white;
              cursor: pointer;
              padding: 15px;
              border-radius: 4px;
            }

            #myBtn:hover {
              background-color: #555;
            }
</style>
</head>

<body>
    <button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>
    <div id="mobile-menu-open" class="shadow-large">
        <i class="fa fa-bars" aria-hidden="true"></i>
    </div>
    <!-- End #mobile-menu-toggle -->
    <header>
        <div id="mobile-menu-close">
            <span>Close</span> <i class="fa fa-times" aria-hidden="true"></i>
        </div>
        <ul id="menu" class="shadow">
             <li>
              <a onclick="goBack()"> Home </a>
              <script> function goBack(){window.history.go(-1)}</script>
            </li>
            <li>
                <a href="#about">Overview</a>
            </li>
            <li>
                <a href="#report">Report</a>
            </li>
            <li>
                <a href="#contact">Contact</a>
            </li>
        </ul>
    </header>
    <!-- End header -->

   <div id="lead">
        <div id="lead-content">
               <h1>Controller Area Network</h1>      
        </div>
    <!-- End #lead-content -->

        <div id="lead-overlay"></div>

        <div id="lead-down">
            <span>
                <i class="fa fa-chevron-down" aria-hidden="true"></i>
            </span>
        </div>
        <!-- End #lead-down -->
    </div>
    <!-- End #lead -->

    <div id="about">
        <div class="container">
            <div class="row">
                <div class="col-md" style="text-align: center;">
                  
                    <h2 class="heading" style="align-text:center;"> Background</h2>
                </div>
          
                <div class="col-md">

                    <!--
                	 <p style="text-align:center;">
                       <img src="../images/CANImage.jpg" style="width:800px;height:600px;"><br>
                       <strong> A CAN Network with 2 Nodes. </strong>
                    </p><br>
                    -->

                    <p>
                       A Controller Area Network (CAN) is a vehicle bus developed by Robert Bosch to allow interconnection of Electronic Circuit Units (ECU) inside a vehicle. The main reason for the development of this bus was to reduce the unnecessary weight & cost introduced by bulky wire harnessess associated with point-to-point wiring of ECUs.</p> <br> 
                       
                    <p style="text-align:center;"><a href="https://copperhilltech.com/a-brief-introduction-to-controller-area-network/"><img src="../images/CAN/WithWithoutCANImage.png" style="width:500px;height:300px;"></a></p>
                    <br>
                        
                    <p>
                       CAN protocol's energetic features for safety has made it the standard in-vehicle network type and protocol known as <strong>ISO-11898</strong>. A key feature of CAN is its ability to confine a fault in the network. We will look into this features in a few minutes. 
                    </p>
                    
                    <p style="text-align:center;">
                        <a href="https://copperhilltech.com/a-brief-introduction-to-controller-area-network/"><img src="../images/CAN/CANNodeModules.png" style="width:500px;height:300px;"></a><br>
                       <strong>A typical CAN network </strong>
                    </p><br>
                    
                    <ol> <h3><p>Key definitions &amp; Points on CAN</p></h3>
                       <li><p>CAN bus</p>
                           <ul><li>
                              <p>A two-wire vehicle bus standard for multiple CAN devices to communicate with each other, without a HOST computer.</p>       </li>
                              <li>
                               <p>The two wires are called CAN High (CAN_H) &amp; CAN Low (CAN_L). They're twisted with 120-ohm resistors at ANY two ends of the CAN bus.</p>
                               </li>
                               <li>
                                   <p>The two wires are twisted, to keep them close to each other, so that a magnetic field has an equal effect on both wires, thereby having no effect on the difference in voltage between the two wires, which results in no change in the CAN signal on the CAN bus, making CAN communication ROBUST and the most suitable type of communication protocol in such harsh environments.</p>
                               </li>
                               <li>
                                   <p>The 120 ohm resistors are called "Termination resistors". The termination resistors return the CAN bus to idle state, preventing any echoes on the CAN bus.</p>
                               </li>
                           </ul>
                       </li>
                       <li><p>CAN bus Signal </p>
                          <ul>
                              <li><p>Comprised of two logic levels. They're called:</p>
                                  <ul>
                                      <li><p>A Logical 0 on the CAN bus is called a Dominant bit.</p></li>
                                      <li><p>A Logical 1 on the CAN bus is called a Recessive bit.</p></li>
                                  </ul>
                              </li>
                          </ul>
                       </li>
                       <li><p>CAN follows a wired-and logic to determine what is sent on the CAN bus, a dominant bit or recessive bit. </p>
                       </li>
                       <li><p>A dominant bit on the CAN bus is represented by setting 3.5V on CAN_H &amp; 1.5V on CAN_L. A recessive bit on the CAN bus is represented by setting 2.5V on both CAN_H &amp; CAN_L. </p></li>
                       <li><p>Nodes</p>
                         <ul>
                             <li>
                                 <p>CAN devices on the CAN bus are called Nodes. You need atleast two nodes to setup a CAN network.</p>
                             </li>
                             <li><p>Each node on the CAN network needs the following 3 modules to work together in a CAN network.</p>
                                 <ul>
                                 <li><p> A transceiver to convert data from TTL logic to CAN bus Logic.</p></li>
                                 <li><p> A CAN controller to handle Framing &amp; perform Cyclic-Redundancy Check on data received &amp; transmitted.</p></li>
                                 <li><p> A microcontroller to decodes the received messages and control what is to be transmitted on the CAN bus for the CAN network.
                                    </p>
                                 </li>
                                 </ul>
                             </li>
                         </ul>
                          
                       </li>
                        
                    </ol>
                    
                    
                    <h2> <p>Features of CAN Protocol</p></h2>
                    
                    <ul>
                        <li><p>Multi-master</p>
                            <ul>
                                <li> <p></p></li>
                            </ul>
                        </li>
                        <li><p>Event-driven</p></li>
                        <li><p>Message-based</p></li>
                        <li><p>Half-duplex</p></li>
                        <li><p>Asynchronous</p></li>
                    </ul>
                     
                      
                       <p> CAN is an event-driven, message-based, multi-master, and asynchronous communication protocol.</p> <br>

               </div>
               <div class="col-md">
                       <br>

                       <p> 
                       	In this project, I setup a CAN network with 3 nodes and wrote drivers for the CAN communication using interrupts to send messages from on the bus. The 3 nodes are: 
                       <ol>
                       	 <li><p> TMS570LS1227 - VCU</p></li>
                       	 <li><p> TMS570LS1224 - BMS</p></li>
                       	 <li><p> TM4C123GH6PM - Dashboard</p></li>
                       </ol> 
                       </p>

                       <p> Initially, the CAN network included only the first two nodes (1 & 2). The idea was to establish communication between the two nodes, followed by addition of the third node. <br><br>

                       
                        The tasks carried out in this project are:
                    </p>
                        
                        <ul>
                            <li> <p>Used Halcogen to configure and generate driver files for CAN0 peripheral of TMS570LS1227.</p>
                            </li>
                            <li>
                               <p>Used Halcogen to configure and generate driver files for CAN0 peripheral of TMS570LS1224.</p>
                            </li>
                            <li>
                            <p>Used Code Composer to write drivers for CAN communication between the two nodes. 
                            </p></li>
                        </ul>
                         
                         
                       <p style="text-align:center;">
                       <img src="../images/TMS1227AND1224.jpg"  style="width:900px;height:600px;"><br>
                       <strong> A CAN network with VCU & BMS. </strong>
                       </p><br>
                       
                       
                       <p style="text-align:center;">
                       <img src="../images/DebugginTMS5701227AND1224.jpg" style="width:900px;height:600px;" >
                       <br> 
                        <strong> Debugging CAN communication between VCU & BMS. </strong>
                       </p><br>
                       
                        
                        <p style="text-align:center;">
                        <img src="../images/ScopeReading.jpg" style="width:600px;height:600px;">
                       <br>
                       <strong> Analyzing CAN bus logic using a scope.</strong>
                       </p>
                        <br>            
                        
                       <p style="text-align:center;">
                       <img src="../images/TMS570LS12242Nodes.jpg"  style="width:900px;height:600px;" >
                       <br> 
                        <strong> A CAN network with two TMS570LS1224 nodes. </strong>
                       </p><br>
                       
                        <p style="text-align:center;">
                       <img src="../images/tm4c1231224Setup.jpg"  style="width:900px;height:600px;" >
                       <br> 
                        <strong> A CAN network with Dashboard & BMS. </strong>
                       </p><br>
                       
                       <p style="text-align:center;">
                       <img src="../images/tm4c123with1224.jpg"  style="width:900px;height:600px;" >
                       <br> 
                        <strong> Snipbit of Dashboard receiving message "NODE-1" from BMS. </strong>
                       </p><br>
                            
                </div>
               
                <strong style="font-style: italic;color:red;">  
                	 In the next few days I will upload videos that will help you setup your CAN network using Halcogen and Code composer,  and I will also walk you through my code.
                </strong>
                
            </div>    
        </div>
        
    </div>
    
     <div id="report" >
           <p style="text-align: center;">
            <a href="https://github.com/sfuphantom/firmware/tree/CAN/CAN_NETWORK" class="btn-rounded-black" style="text-align: center;">View Code </a> 
         </p>
    </div> 
   
    <!-- End #about -->

    <div id="contact">
        <h2>Get in Touch</h2>
        <div id="contact-form">
            <form method="POST" action="https://formspree.io/jjkhan@sfu.ca">
                <input type="hidden" name="_subject" value="Contact request from personal website" />
                <input type="email" name="_replyto" placeholder="Your email" required>
                <textarea name="message" placeholder="Your message" required></textarea>
                <button type="submit">Send</button>
            </form>
        </div>
        <!-- End #contact-form -->
    </div>
    <!-- End #contact -->

    <footer>
        <div class="container">
            <div class="row">
                <div class="col-sm-5 copyright">
                    <p>
                        Copyright &copy; 2019 <br> Junaid Jawed Khan
                    </p>
                </div>
                <div class="col-sm-2 top">
                    <span id="to-top">
                        <i class="fa fa-chevron-up" aria-hidden="true"></i>
                    </span>
                </div>
                <div class="col-sm-5 social">
                    <ul>
                        <li>
                            <a href="https://github.com/Junaidk11" target="_blank"><i class="fa fa-github" aria-hidden="true"></i></a>
                        </li>
                        <li>
                            <a href="https://linkedin.com/in/junaidjawedkhan/" target="_blank"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>
    <!-- End footer -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../js/scripts.min.js"></script>


    <!--  Scroll to the top: - If needed later.
    <script>
          //Get the button
          var mybutton = document.getElementById("myBtn");

          // When the user scrolls down 20px from the top of the document, show the button
          window.onscroll = function() {scrollFunction()};

          function scrollFunction() {
            if (document.body.scrollTop > 500 || document.documentElement.scrollTop > 500) {
              mybutton.style.display = "block";
            } else {
              mybutton.style.display = "none";
            }
          }

          // When the user clicks on the button, scroll to the top of the document
          function topFunction() {
            document.body.scrollTop = 0;
            document.documentElement.scrollTop = 0;
          }
</script> -->


</body>

</html>

