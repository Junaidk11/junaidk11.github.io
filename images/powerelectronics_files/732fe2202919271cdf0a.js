(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{840:function(e,t,n){(function(t,n){var r;r=function(){"use strict";var e="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function r(e,t){return e(t={exports:{}},t.exports),t.exports}r(function(t,n){(function(){var r={function:!0,object:!0},o=r.object&&n&&!n.nodeType&&n,c=r[typeof window]&&window||this,l=o&&r.object&&t&&!t.nodeType&&"object"==typeof e&&e;function d(e,t){e||(e=c.Object()),t||(t=c.Object());var n=e.Number||c.Number,o=e.String||c.String,l=e.Object||c.Object,f=e.Date||c.Date,h=e.SyntaxError||c.SyntaxError,v=e.TypeError||c.TypeError,y=e.Math||c.Math,m=e.JSON||c.JSON;"object"==typeof m&&m&&(t.stringify=m.stringify,t.parse=m.parse);var _,w,I,S=l.prototype,O=S.toString,E=new f(-0xc782b5b800cec);try{E=-109252==E.getUTCFullYear()&&0===E.getUTCMonth()&&1===E.getUTCDate()&&10==E.getUTCHours()&&37==E.getUTCMinutes()&&6==E.getUTCSeconds()&&708==E.getUTCMilliseconds()}catch(e){}function N(e){if(N[e]!==I)return N[e];var r;if("bug-string-char-index"==e)r="a"!="a"[0];else if("json"==e)r=N("json-stringify")&&N("json-parse");else{var c,l='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var d=t.stringify,h="function"==typeof d&&E;if(h){(c=function(){return 1}).toJSON=c;try{h="0"===d(0)&&"0"===d(new n)&&'""'==d(new o)&&d(O)===I&&d(I)===I&&d()===I&&"1"===d(c)&&"[1]"==d([c])&&"[null]"==d([I])&&"null"==d(null)&&"[null,null,null]"==d([I,O,null])&&d({a:[c,!0,!1,null,"\0\b\n\f\r\t"]})==l&&"1"===d(null,c)&&"[\n 1,\n 2\n]"==d([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==d(new f(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==d(new f(864e13))&&'"-000001-01-01T00:00:00.000Z"'==d(new f(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==d(new f(-1))}catch(e){h=!1}}r=h}if("json-parse"==e){var v=t.parse;if("function"==typeof v)try{if(0===v("0")&&!v(!1)){var y=5==(c=v(l)).a.length&&1===c.a[0];if(y){try{y=!v('"\t"')}catch(e){}if(y)try{y=1!==v("01")}catch(e){}if(y)try{y=1!==v("1.")}catch(e){}}}}catch(e){y=!1}r=y}}return N[e]=!!r}if(!N("json")){var x=N("bug-string-char-index");if(!E)var k=y.floor,j=[0,31,59,90,120,151,181,212,243,273,304,334],A=function(e,t){return j[t]+365*(e-1970)+k((e-1969+(t=+(t>1)))/4)-k((e-1901+t)/100)+k((e-1601+t)/400)};if((_=S.hasOwnProperty)||(_=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=O?_=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,_=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,_.call(this,e)}),w=function(object,e){var t,n,o,c=0;for(o in(t=function(){this.valueOf=0}).prototype.valueOf=0,n=new t)_.call(n,o)&&c++;return t=n=null,c?w=2==c?function(object,e){var t,n={},r="[object Function]"==O.call(object);for(t in object)r&&"prototype"==t||_.call(n,t)||!(n[t]=1)||!_.call(object,t)||e(t)}:function(object,e){var t,n,r="[object Function]"==O.call(object);for(t in object)r&&"prototype"==t||!_.call(object,t)||(n="constructor"===t)||e(t);(n||_.call(object,t="constructor"))&&e(t)}:(n=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],w=function(object,e){var t,o,c="[object Function]"==O.call(object),l=!c&&"function"!=typeof object.constructor&&r[typeof object.hasOwnProperty]&&object.hasOwnProperty||_;for(t in object)c&&"prototype"==t||!l.call(object,t)||e(t);for(o=n.length;t=n[--o];l.call(object,t)&&e(t));}),w(object,e)},!N("json-stringify")){var T={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},C=function(e,t){return("000000"+(t||0)).slice(-e)},P=function(e){for(var t='"',n=0,r=e.length,o=!x||r>10,c=o&&(x?e.split(""):e);n<r;n++){var l=e.charCodeAt(n);switch(l){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=T[l];break;default:if(l<32){t+="\\u00"+C(2,l.toString(16));break}t+=o?c[n]:e.charAt(n)}}return t+'"'},R=function(e,object,t,n,r,o,c){var l,d,f,h,y,time,m,S,E,N,x,element,j,T,U,D;try{l=object[e]}catch(e){}if("object"==typeof l&&l)if("[object Date]"!=(d=O.call(l))||_.call(l,"toJSON"))"function"==typeof l.toJSON&&("[object Number]"!=d&&"[object String]"!=d&&"[object Array]"!=d||_.call(l,"toJSON"))&&(l=l.toJSON(e));else if(l>-1/0&&l<1/0){if(A){for(y=k(l/864e5),f=k(y/365.2425)+1970-1;A(f+1,0)<=y;f++);for(h=k((y-A(f,0))/30.42);A(f,h+1)<=y;h++);y=1+y-A(f,h),m=k((time=(l%864e5+864e5)%864e5)/36e5)%24,S=k(time/6e4)%60,E=k(time/1e3)%60,N=time%1e3}else f=l.getUTCFullYear(),h=l.getUTCMonth(),y=l.getUTCDate(),m=l.getUTCHours(),S=l.getUTCMinutes(),E=l.getUTCSeconds(),N=l.getUTCMilliseconds();l=(f<=0||f>=1e4?(f<0?"-":"+")+C(6,f<0?-f:f):C(4,f))+"-"+C(2,h+1)+"-"+C(2,y)+"T"+C(2,m)+":"+C(2,S)+":"+C(2,E)+"."+C(3,N)+"Z"}else l=null;if(t&&(l=t.call(object,e,l)),null===l)return"null";if("[object Boolean]"==(d=O.call(l)))return""+l;if("[object Number]"==d)return l>-1/0&&l<1/0?""+l:"null";if("[object String]"==d)return P(""+l);if("object"==typeof l){for(T=c.length;T--;)if(c[T]===l)throw v();if(c.push(l),x=[],U=o,o+=r,"[object Array]"==d){for(j=0,T=l.length;j<T;j++)element=R(j,l,t,n,r,o,c),x.push(element===I?"null":element);D=x.length?r?"[\n"+o+x.join(",\n"+o)+"\n"+U+"]":"["+x.join(",")+"]":"[]"}else w(n||l,function(e){var element=R(e,l,t,n,r,o,c);element!==I&&x.push(P(e)+":"+(r?" ":"")+element)}),D=x.length?r?"{\n"+o+x.join(",\n"+o)+"\n"+U+"}":"{"+x.join(",")+"}":"{}";return c.pop(),D}};t.stringify=function(source,filter,e){var t,n,o,c;if(r[typeof filter]&&filter)if("[object Function]"==(c=O.call(filter)))n=filter;else if("[object Array]"==c){o={};for(var l,d=0,f=filter.length;d<f;l=filter[d++],("[object String]"==(c=O.call(l))||"[object Number]"==c)&&(o[l]=1));}if(e)if("[object Number]"==(c=O.call(e))){if((e-=e%1)>0)for(t="",e>10&&(e=10);t.length<e;t+=" ");}else"[object String]"==c&&(t=e.length<=10?e:e.slice(0,10));return R("",((l={})[""]=source,l),n,o,t,"",[])}}if(!N("json-parse")){var U,D,M=o.fromCharCode,F={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},L=function(){throw U=D=null,h()},B=function(){for(var e,t,n,r,o,source=D,c=source.length;U<c;)switch(o=source.charCodeAt(U)){case 9:case 10:case 13:case 32:U++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=x?source.charAt(U):source[U],U++,e;case 34:for(e="@",U++;U<c;)if((o=source.charCodeAt(U))<32)L();else if(92==o)switch(o=source.charCodeAt(++U)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=F[o],U++;break;case 117:for(t=++U,n=U+4;U<n;U++)(o=source.charCodeAt(U))>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70||L();e+=M("0x"+source.slice(t,U));break;default:L()}else{if(34==o)break;for(o=source.charCodeAt(U),t=U;o>=32&&92!=o&&34!=o;)o=source.charCodeAt(++U);e+=source.slice(t,U)}if(34==source.charCodeAt(U))return U++,e;L();default:if(t=U,45==o&&(r=!0,o=source.charCodeAt(++U)),o>=48&&o<=57){for(48==o&&((o=source.charCodeAt(U+1))>=48&&o<=57)&&L(),r=!1;U<c&&((o=source.charCodeAt(U))>=48&&o<=57);U++);if(46==source.charCodeAt(U)){for(n=++U;n<c&&((o=source.charCodeAt(n))>=48&&o<=57);n++);n==U&&L(),U=n}if(101==(o=source.charCodeAt(U))||69==o){for(43!=(o=source.charCodeAt(++U))&&45!=o||U++,n=U;n<c&&((o=source.charCodeAt(n))>=48&&o<=57);n++);n==U&&L(),U=n}return+source.slice(t,U)}if(r&&L(),"true"==source.slice(U,U+4))return U+=4,!0;if("false"==source.slice(U,U+5))return U+=5,!1;if("null"==source.slice(U,U+4))return U+=4,null;L()}return"$"},J=function(e){var t,n;if("$"==e&&L(),"string"==typeof e){if("@"==(x?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=B());n||(n=!0))n&&(","==e?"]"==(e=B())&&L():L()),","==e&&L(),t.push(J(e));return t}if("{"==e){for(t={};"}"!=(e=B());n||(n=!0))n&&(","==e?"}"==(e=B())&&L():L()),","!=e&&"string"==typeof e&&"@"==(x?e.charAt(0):e[0])&&":"==B()||L(),t[e.slice(1)]=J(B());return t}L()}return e},K=function(source,e,t){var element=z(source,e,t);element===I?delete source[e]:source[e]=element},z=function(source,e,t){var n,r=source[e];if("object"==typeof r&&r)if("[object Array]"==O.call(r))for(n=r.length;n--;)K(r,n,t);else w(r,function(e){K(r,e,t)});return t.call(source,e,r)};t.parse=function(source,e){var t,n;return U=0,D=""+source,t=J(B()),"$"!=B()&&L(),U=D=null,e&&"[object Function]"==O.call(e)?z(((n={})[""]=t,n),"",e):t}}}return t.runInContext=d,t}if(!l||l.global!==l&&l.window!==l&&l.self!==l||(c=l),o)d(c,o);else{var f=c.JSON,h=c.JSON3,v=!1,y=d(c,c.JSON3={noConflict:function(){return v||(v=!0,c.JSON=f,c.JSON3=h,f=h=null),y}});c.JSON={parse:y.parse,stringify:y.stringify}}}).call(e)});var o="$default_instance",c=2,l=4096,d=1e3,f="$identify",h="$groupidentify",v="amplitude_lastEventId",y="amplitude_lastEventTime",m="amplitude_lastIdentifyId",_="amplitude_lastSequenceNumber",w="amplitude_sessionId",I="amplitude_deviceId",S="amplitude_optOut",O="amplitude_userId",E="amplitude_cookie_test",N="revenue_amount",x="$productId",k="$quantity",j="$price",A="$revenueType",T="amp_device_id",C="referrer",P="utm_source",R="utm_medium",U="utm_campaign",D="utm_term",M="utm_content",F=function(s){for(var e="",t=0;t<s.length;t++){var n=s.charCodeAt(t);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e},L=function(e){for(var s="",i=0,t=0,n=0,r=0;i<e.length;)(t=e.charCodeAt(i))<128?(s+=String.fromCharCode(t),i++):t>191&&t<224?(n=e.charCodeAt(i+1),s+=String.fromCharCode((31&t)<<6|63&n),i+=2):(n=e.charCodeAt(i+1),r=e.charCodeAt(i+2),s+=String.fromCharCode((15&t)<<12|(63&n)<<6|63&r),i+=3);return s},B={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(input){try{if(window.btoa&&window.atob)return window.btoa(unescape(encodeURIComponent(input)))}catch(e){}return B._encode(input)},_encode:function(input){var e,t,n,r,o,c,l,output="",i=0;for(input=F(input);i<input.length;)r=(e=input.charCodeAt(i++))>>2,o=(3&e)<<4|(t=input.charCodeAt(i++))>>4,c=(15&t)<<2|(n=input.charCodeAt(i++))>>6,l=63&n,isNaN(t)?c=l=64:isNaN(n)&&(l=64),output=output+B._keyStr.charAt(r)+B._keyStr.charAt(o)+B._keyStr.charAt(c)+B._keyStr.charAt(l);return output},decode:function(input){try{if(window.btoa&&window.atob)return decodeURIComponent(escape(window.atob(input)))}catch(e){}return B._decode(input)},_decode:function(input){var e,t,n,r,o,c,output="",i=0;for(input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");i<input.length;)e=B._keyStr.indexOf(input.charAt(i++))<<2|(r=B._keyStr.indexOf(input.charAt(i++)))>>4,t=(15&r)<<4|(o=B._keyStr.indexOf(input.charAt(i++)))>>2,n=(3&o)<<6|(c=B._keyStr.indexOf(input.charAt(i++))),output+=String.fromCharCode(e),64!==o&&(output+=String.fromCharCode(t)),64!==c&&(output+=String.fromCharCode(n));return output=L(output)}},J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e},z=Object.prototype.toString;function G(e){switch(z.call(e)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===e?"null":void 0===e?"undefined":e!=e?"nan":e&&1===e.nodeType?"element":void 0!==n&&"function"==typeof n.isBuffer&&n.isBuffer(e)?"buffer":void 0===(e=e.valueOf?e.valueOf():Object.prototype.valueOf.apply(e))?"undefined":J(e)}var W,V={DISABLE:0,ERROR:1,WARN:2,INFO:3},$=V.WARN,X={error:function(s){$>=V.ERROR&&H(s)},warn:function(s){$>=V.WARN&&H(s)},info:function(s){$>=V.INFO&&H(s)}},H=function(s){try{console.log("[Amplitude] "+s)}catch(e){}},Q=function(e){return"string"===G(e)&&e.length>l?e.substring(0,l):e},Z=function(e){var t=G(e);if("object"!==t)return X.error("Error: invalid properties format. Expecting Javascript object, received "+t+", ignoring"),{};if(Object.keys(e).length>d)return X.error("Error: too many properties (more than 1000), ignoring"),{};var n={};for(var r in e)if(e.hasOwnProperty(r)){var o=r,c=G(o);"string"!==c&&(o=String(o),X.warn("WARNING: Non-string property key, received type "+c+', coercing to string "'+o+'"'));var l=ee(o,e[r]);null!==l&&(n[o]=l)}return n},Y=["null","nan","undefined","function","arguments","regexp","element"],ee=function e(t,n){var r=G(n);if(-1!==Y.indexOf(r))X.warn('WARNING: Property key "'+t+'" with invalid value type '+r+", ignoring"),n=null;else if("error"===r)n=String(n),X.warn('WARNING: Property key "'+t+'" with value type error, coercing to '+n);else if("array"===r){for(var o=[],i=0;i<n.length;i++){var element=n[i],c=G(element);"array"!==c&&"object"!==c?o.push(e(t,element)):X.warn("WARNING: Cannot have "+c+" nested in an array property value, skipping")}n=o}else"object"===r&&(n=Z(n));return n},te=function(e,t){var n=G(t);if("string"===n)return t;if("date"===n||"number"===n||"boolean"===n)return t=String(t),X.warn("WARNING: Non-string groupName, received type "+n+', coercing to string "'+t+'"'),t;if("array"===n){for(var r=[],i=0;i<t.length;i++){var element=t[i],o=G(element);"array"!==o&&"object"!==o?"string"===o?r.push(element):"date"!==o&&"number"!==o&&"boolean"!==o||(element=String(element),X.warn("WARNING: Non-string groupName, received type "+o+', coercing to string "'+element+'"'),r.push(element)):X.warn("WARNING: Skipping nested "+o+" in array groupName")}return r}X.warn("WARNING: Non-string groupName, received type "+n+". Please use strings or array of strings for groupName")},ne=function(e){V.hasOwnProperty(e)&&($=V[e])},ie=X,re=function(e){return!e||0===e.length},oe=function(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===n?void 0:decodeURIComponent(n[1].replace(/\+/g," "))},se=function e(t){if("array"===G(t))for(var i=0;i<t.length;i++)t[i]=e(t[i]);else if("object"===G(t))for(var n in t)t.hasOwnProperty(n)&&(t[n]=e(t[n]));else t=Q(t);return t},ae=function(e){var t=G(e);if("object"!==t)return X.error("Error: invalid groups format. Expecting Javascript object, received "+t+", ignoring"),{};var n={};for(var r in e)if(e.hasOwnProperty(r)){var o=r,c=G(o);"string"!==c&&(o=String(o),X.warn("WARNING: Non-string groupType, received type "+c+', coercing to string "'+o+'"'));var l=te(o,e[r]);null!==l&&(n[o]=l)}return n},ue=function(input,e,t){return G(input)===t||(X.error("Invalid "+e+" input type. Expected "+t+" but received "+G(input)),!1)},ce=Z,pe=function(e,t,n){var r=null!==t?n.expirationDays:-1;if(r){var o=new Date;o.setTime(o.getTime()+24*r*60*60*1e3),r=o}var c=e+"="+t;r&&(c+="; expires="+r.toUTCString()),c+="; path=/",n.domain&&(c+="; domain="+n.domain),n.secure&&(c+="; Secure"),document.cookie=c},le=function(e){try{for(var t=document.cookie.split(";"),n=null,i=0;i<t.length;i++){for(var r=t[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(e)){n=r.substring(e.length,r.length);break}}return n}catch(e){return null}},de={expirationDays:void 0,domain:void 0},fe=function(e){var t=function(e){var a=document.createElement("a");return a.href=e,a.hostname||location.hostname}(e).split("."),n=t[t.length-1],r=[];if(4===t.length&&n===parseInt(n,10))return r;if(t.length<=1)return r;for(var i=t.length-2;i>=0;--i)r.push(t.slice(i).join("."));for(var o=0;o<r.length;++o){var c="__tld_test__",l=r[o],d={domain:"."+l};if(pe(c,1,d),le(c))return pe(c,null,d),l}return""},he=function(e){var t="";return de.domain&&(t="."===de.domain.charAt(0)?de.domain.substring(1):de.domain),e+t},ge=function(e){var t=he(e)+"=",n=le(t);try{if(n)return JSON.parse(B.decode(n))}catch(e){return null}return null},ve=function(e,t){try{return pe(he(e),B.encode(JSON.stringify(t)),de),!0}catch(e){return!1}},ye=function(e){try{return pe(he(e),null,de),!0}catch(e){return!1}},me={reset:function(){de={expirationDays:void 0,domain:void 0}},options:function(e){if(0===arguments.length)return de;e=e||{},de.expirationDays=e.expirationDays,de.secure=e.secure;var t=re(e.domain)?"."+fe(window.location.href):e.domain,n=Math.random();de.domain=t,ve("amplitude_test",n);var r=ge("amplitude_test");return r&&r===n||(t=null),ye("amplitude_test"),de.domain=t,de},get:ge,set:ve,remove:ye};if(function(){var e,t=new Date;try{return window.localStorage.setItem(t,t),e=window.localStorage.getItem(t)===String(t),window.localStorage.removeItem(t),e}catch(e){}return!1}())W=window.localStorage;else if(window.globalStorage)try{W=window.globalStorage[window.location.hostname]}catch(e){}else{var div=document.createElement("div"),_e="localStorage";div.style.display="none",document.getElementsByTagName("head")[0].appendChild(div),div.addBehavior&&(div.addBehavior("#default#userdata"),W={length:0,setItem:function(e,t){div.load(_e),div.getAttribute(e)||this.length++,div.setAttribute(e,t),div.save(_e)},getItem:function(e){return div.load(_e),div.getAttribute(e)},removeItem:function(e){div.load(_e),div.getAttribute(e)&&this.length--,div.removeAttribute(e),div.save(_e)},clear:function(){div.load(_e);for(var e,i=0;e=div.XMLDocument.documentElement.attributes[i++];)div.removeAttribute(e.name);div.save(_e),this.length=0},key:function(e){return div.load(_e),div.XMLDocument.documentElement.attributes[e]}},div.load(_e),W.length=div.XMLDocument.documentElement.attributes.length)}W||(W={length:0,setItem:function(e,t){},getItem:function(e){},removeItem:function(e){},clear:function(){},key:function(e){}});var we=W,be=function(){this.storage=null};be.prototype._cookiesEnabled=function(){var e,t=String(new Date);try{return me.set(E,t),e=me.get(E)===t,me.remove(E),e}catch(e){}return!1},be.prototype.getStorage=function(){if(null!==this.storage)return this.storage;if(this._cookiesEnabled())this.storage=me;else{this.storage={_options:{expirationDays:void 0,domain:void 0,secure:!1},reset:function(){this._options={expirationDays:void 0,domain:void 0,secure:!1}},options:function(e){return 0===arguments.length?this._options:(e=e||{},this._options.expirationDays=e.expirationDays||this._options.expirationDays,this._options.domain=e.domain||this._options.domain||window.location.hostname,this._options.secure=e.secure||!1)},get:function(e){try{return JSON.parse(we.getItem("amp_cookiestore_"+e))}catch(e){}return null},set:function(e,t){try{return we.setItem("amp_cookiestore_"+e,JSON.stringify(t)),!0}catch(e){}return!1},remove:function(e){try{we.removeItem("amp_cookiestore_"+e)}catch(e){return!1}}}}return this.storage};var Ie=function(){this.userPropertiesOperations={},this.properties=[]};Ie.prototype.add=function(e,t){return"number"===G(t)||"string"===G(t)?this._addOperation("$add",e,t):ie.error("Unsupported type for value: "+G(t)+", expecting number or string"),this},Ie.prototype.append=function(e,t){return this._addOperation("$append",e,t),this},Ie.prototype.clearAll=function(){return Object.keys(this.userPropertiesOperations).length>0?(this.userPropertiesOperations.hasOwnProperty("$clearAll")||ie.error("Need to send $clearAll on its own Identify object without any other operations, skipping $clearAll"),this):(this.userPropertiesOperations.$clearAll="-",this)},Ie.prototype.prepend=function(e,t){return this._addOperation("$prepend",e,t),this},Ie.prototype.set=function(e,t){return this._addOperation("$set",e,t),this},Ie.prototype.setOnce=function(e,t){return this._addOperation("$setOnce",e,t),this},Ie.prototype.unset=function(e){return this._addOperation("$unset",e,"-"),this},Ie.prototype._addOperation=function(e,t,n){this.userPropertiesOperations.hasOwnProperty("$clearAll")?ie.error("This identify already contains a $clearAll operation, skipping operation "+e):-1===this.properties.indexOf(t)?(this.userPropertiesOperations.hasOwnProperty(e)||(this.userPropertiesOperations[e]={}),this.userPropertiesOperations[e][t]=n,this.properties.push(t)):ie.error('User property "'+t+'" already used in this identify, skipping operation '+e)};var Se=r(function(t){!function(e){function n(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function r(q,a,b,e,s,t){return n((r=n(n(a,q),n(e,t)))<<(o=s)|r>>>32-o,b);var r,o}function o(a,b,e,t,n,s,o){return r(b&e|~b&t,a,b,n,s,o)}function c(a,b,e,t,n,s,o){return r(b&t|e&~t,a,b,n,s,o)}function l(a,b,e,t,n,s,o){return r(b^e^t,a,b,n,s,o)}function d(a,b,e,t,n,s,o){return r(e^(b|~t),a,b,n,s,o)}function f(e,t){var i,r,f,h,v;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var a=1732584193,b=-271733879,y=-1732584194,m=271733878;for(i=0;i<e.length;i+=16)r=a,f=b,h=y,v=m,a=o(a,b,y,m,e[i],7,-680876936),m=o(m,a,b,y,e[i+1],12,-389564586),y=o(y,m,a,b,e[i+2],17,606105819),b=o(b,y,m,a,e[i+3],22,-1044525330),a=o(a,b,y,m,e[i+4],7,-176418897),m=o(m,a,b,y,e[i+5],12,1200080426),y=o(y,m,a,b,e[i+6],17,-1473231341),b=o(b,y,m,a,e[i+7],22,-45705983),a=o(a,b,y,m,e[i+8],7,1770035416),m=o(m,a,b,y,e[i+9],12,-1958414417),y=o(y,m,a,b,e[i+10],17,-42063),b=o(b,y,m,a,e[i+11],22,-1990404162),a=o(a,b,y,m,e[i+12],7,1804603682),m=o(m,a,b,y,e[i+13],12,-40341101),y=o(y,m,a,b,e[i+14],17,-1502002290),a=c(a,b=o(b,y,m,a,e[i+15],22,1236535329),y,m,e[i+1],5,-165796510),m=c(m,a,b,y,e[i+6],9,-1069501632),y=c(y,m,a,b,e[i+11],14,643717713),b=c(b,y,m,a,e[i],20,-373897302),a=c(a,b,y,m,e[i+5],5,-701558691),m=c(m,a,b,y,e[i+10],9,38016083),y=c(y,m,a,b,e[i+15],14,-660478335),b=c(b,y,m,a,e[i+4],20,-405537848),a=c(a,b,y,m,e[i+9],5,568446438),m=c(m,a,b,y,e[i+14],9,-1019803690),y=c(y,m,a,b,e[i+3],14,-187363961),b=c(b,y,m,a,e[i+8],20,1163531501),a=c(a,b,y,m,e[i+13],5,-1444681467),m=c(m,a,b,y,e[i+2],9,-51403784),y=c(y,m,a,b,e[i+7],14,1735328473),a=l(a,b=c(b,y,m,a,e[i+12],20,-1926607734),y,m,e[i+5],4,-378558),m=l(m,a,b,y,e[i+8],11,-2022574463),y=l(y,m,a,b,e[i+11],16,1839030562),b=l(b,y,m,a,e[i+14],23,-35309556),a=l(a,b,y,m,e[i+1],4,-1530992060),m=l(m,a,b,y,e[i+4],11,1272893353),y=l(y,m,a,b,e[i+7],16,-155497632),b=l(b,y,m,a,e[i+10],23,-1094730640),a=l(a,b,y,m,e[i+13],4,681279174),m=l(m,a,b,y,e[i],11,-358537222),y=l(y,m,a,b,e[i+3],16,-722521979),b=l(b,y,m,a,e[i+6],23,76029189),a=l(a,b,y,m,e[i+9],4,-640364487),m=l(m,a,b,y,e[i+12],11,-421815835),y=l(y,m,a,b,e[i+15],16,530742520),a=d(a,b=l(b,y,m,a,e[i+2],23,-995338651),y,m,e[i],6,-198630844),m=d(m,a,b,y,e[i+7],10,1126891415),y=d(y,m,a,b,e[i+14],15,-1416354905),b=d(b,y,m,a,e[i+5],21,-57434055),a=d(a,b,y,m,e[i+12],6,1700485571),m=d(m,a,b,y,e[i+3],10,-1894986606),y=d(y,m,a,b,e[i+10],15,-1051523),b=d(b,y,m,a,e[i+1],21,-2054922799),a=d(a,b,y,m,e[i+8],6,1873313359),m=d(m,a,b,y,e[i+15],10,-30611744),y=d(y,m,a,b,e[i+6],15,-1560198380),b=d(b,y,m,a,e[i+13],21,1309151649),a=d(a,b,y,m,e[i+4],6,-145523070),m=d(m,a,b,y,e[i+11],10,-1120210379),y=d(y,m,a,b,e[i+2],15,718787259),b=d(b,y,m,a,e[i+9],21,-343485551),a=n(a,r),b=n(b,f),y=n(y,h),m=n(m,v);return[a,b,y,m]}function h(input){var i,output="",e=32*input.length;for(i=0;i<e;i+=8)output+=String.fromCharCode(input[i>>5]>>>i%32&255);return output}function v(input){var i,output=[];for(output[(input.length>>2)-1]=void 0,i=0;i<output.length;i+=1)output[i]=0;var e=8*input.length;for(i=0;i<e;i+=8)output[i>>5]|=(255&input.charCodeAt(i/8))<<i%32;return output}function y(input){var e,i,output="";for(i=0;i<input.length;i+=1)e=input.charCodeAt(i),output+="0123456789abcdef".charAt(e>>>4&15)+"0123456789abcdef".charAt(15&e);return output}function m(input){return unescape(encodeURIComponent(input))}function _(s){return function(s){return h(f(v(s),8*s.length))}(m(s))}function w(e,t){return function(e,data){var i,t,n=v(e),r=[],o=[];for(r[15]=o[15]=void 0,n.length>16&&(n=f(n,8*e.length)),i=0;i<16;i+=1)r[i]=909522486^n[i],o[i]=1549556828^n[i];return t=f(r.concat(v(data)),512+8*data.length),h(f(o.concat(t),640))}(m(e),m(t))}function I(e,t,n){return t?n?w(t,e):y(w(t,e)):n?_(e):y(_(e))}t.exports?t.exports=I:e.md5=I}(e)}),Oe=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})},Ee=Object.getOwnPropertySymbols,Ne=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable,ke=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,source){for(var t,n,r=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var o in t=Object(arguments[s]))Ne.call(t,o)&&(r[o]=t[o]);if(Ee){n=Ee(t);for(var i=0;i<n.length;i++)xe.call(t,n[i])&&(r[n[i]]=t[n[i]])}}return r};function je(e,t){return t.encode?t.strict?Oe(e):encodeURIComponent(e):e}new RegExp("%[a-f0-9]{2}","gi"),new RegExp("(%[a-f0-9]{2})+","gi");var Ae=function(e,t){!1===(t=ke({encode:!0,strict:!0,arrayFormat:"none"},t)).sort&&(t.sort=function(){});var n=function(e){switch(e.arrayFormat){case"index":return function(t,n,r){return null===n?[je(t,e),"[",r,"]"].join(""):[je(t,e),"[",je(r,e),"]=",je(n,e)].join("")};case"bracket":return function(t,n){return null===n?je(t,e):[je(t,e),"[]=",je(n,e)].join("")};default:return function(t,n){return null===n?je(t,e):[je(t,e),"=",je(n,e)].join("")}}}(t);return e?Object.keys(e).sort(t.sort).map(function(r){var o=e[r];if(void 0===o)return"";if(null===o)return je(r,t);if(Array.isArray(o)){var c=[];return o.slice().forEach(function(e){void 0!==e&&c.push(n(r,e,c.length))}),c.join("&")}return je(r,t)+"="+je(o,t)}).filter(function(e){return e.length>0}).join("&"):""},Te=function(e,data){this.url=e,this.data=data||{}};Te.prototype.send=function(e){if(!!window.XDomainRequest){var t=new window.XDomainRequest;t.open("POST",this.url,!0),t.onload=function(){e(200,t.responseText)},t.onerror=function(){"Request Entity Too Large"===t.responseText?e(413,t.responseText):e(500,t.responseText)},t.ontimeout=function(){},t.onprogress=function(){},t.send(Ae(this.data))}else{var n=new XMLHttpRequest;n.open("POST",this.url,!0),n.onreadystatechange=function(){4===n.readyState&&e(n.status,n.responseText)},n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.send(Ae(this.data))}};var Ce=function(){this._price=null,this._productId=null,this._quantity=1,this._revenueType=null,this._properties=null};Ce.prototype.setProductId=function(e){return"string"!==G(e)?ie.error("Unsupported type for productId: "+G(e)+", expecting string"):re(e)?ie.error("Invalid empty productId"):this._productId=e,this},Ce.prototype.setQuantity=function(e){return"number"!==G(e)?ie.error("Unsupported type for quantity: "+G(e)+", expecting number"):this._quantity=parseInt(e),this},Ce.prototype.setPrice=function(e){return"number"!==G(e)?ie.error("Unsupported type for price: "+G(e)+", expecting number"):this._price=e,this},Ce.prototype.setRevenueType=function(e){return"string"!==G(e)?ie.error("Unsupported type for revenueType: "+G(e)+", expecting string"):this._revenueType=e,this},Ce.prototype.setEventProperties=function(e){return"object"!==G(e)?ie.error("Unsupported type for eventProperties: "+G(e)+", expecting object"):this._properties=ce(e),this},Ce.prototype._isValidRevenue=function(){return"number"===G(this._price)||(ie.error("Invalid revenue, need to set price field"),!1)},Ce.prototype._toJSONObject=function(){var e="object"===G(this._properties)?this._properties:{};return null!==this._productId&&(e[x]=this._productId),null!==this._quantity&&(e[k]=this._quantity),null!==this._price&&(e[j]=this._price),null!==this._revenueType&&(e[A]=this._revenueType),e};var Pe=r(function(t,n){!function(e,r){var o="model",c="name",l="type",d="vendor",f="version",h="mobile",v="tablet",y={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.split(".")[0]:void 0}},m={rgx:function(){for(var e,t,n,p,q,r,o,i=0,c=arguments;i<c.length&&!r;){var l=c[i],d=c[i+1];if(void 0===e)for(p in e={},d)d.hasOwnProperty(p)&&("object"==typeof(q=d[p])?e[q[0]]=void 0:e[q]=void 0);for(t=n=0;t<l.length&&!r;)if(r=l[t++].exec(this.getUA()))for(p=0;p<d.length;p++)o=r[++n],"object"==typeof(q=d[p])&&q.length>0?2==q.length?"function"==typeof q[1]?e[q[0]]=q[1].call(this,o):e[q[0]]=q[1]:3==q.length?"function"!=typeof q[1]||q[1].exec&&q[1].test?e[q[0]]=o?o.replace(q[1],q[2]):void 0:e[q[0]]=o?q[1].call(this,o,q[2]):void 0:4==q.length&&(e[q[0]]=o?q[3].call(this,o.replace(q[1],q[2])):void 0):e[q]=o||void 0;i+=2}return e},str:function(e,map){for(var i in map)if("object"==typeof map[i]&&map[i].length>0){for(var t=0;t<map[i].length;t++)if(y.has(map[i][t],e))return"?"===i?void 0:i}else if(y.has(map[i],e))return"?"===i?void 0:i;return e}},_={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},name:{"Opera Mobile":"Opera Mobi","IE Mobile":"IEMobile"}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},name:{"Windows Phone":"Windows Phone OS"}}}},w={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[c,f],[/(OPiOS)[\/\s]+([\w\.]+)/i],[[c,"Opera Mini"],f],[/\s(opr)\/([\w\.]+)/i],[[c,"Opera"],f],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[c,f],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[c,"IE"],f],[/(edge)\/((\d+)?[\w\.]+)/i],[c,f],[/(yabrowser)\/([\w\.]+)/i],[[c,"Yandex"],f],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],f],[/((?:android.+)crmo|crios)\/([\w\.]+)/i,/android.+(chrome)\/([\w\.]+)\s+(?:mobile\s?safari)/i],[[c,"Chrome Mobile"],f],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[c,f],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[[c,"UCBrowser"],f],[/(dolfin)\/([\w\.]+)/i],[[c,"Dolphin"],f],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[f,[c,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[f,[c,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[f,[c,"Facebook"]],[/fxios\/([\w\.-]+)/i],[f,[c,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[f,[c,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[f,c],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[c,[f,m.str,_.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[c,f],[/(blackberry)\\s?\/([\w\.]+)/i],[[c,"BlackBerry"],f],[/(navigator|netscape)\/([\w\.-]+)/i],[[c,"Netscape"],f],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[c,f]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",y.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",y.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",y.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[o,d,[l,v]],[/applecoremedia\/[\w\.]+ \((ipad)/],[o,[d,"Apple"],[l,v]],[/(apple\s{0,1}tv)/i],[[o,"Apple TV"],[d,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[d,o,[l,v]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[o,[d,"Amazon"],[l,v]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[o,m.str,_.device.amazon.model],[d,"Amazon"],[l,h]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[o,d,[l,h]],[/\((ip[honed|\s\w*]+);/i],[o,[d,"Apple"],[l,h]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[d,o,[l,h]],[/\(bb10;\s(\w+)/i],[o,[d,"BlackBerry"],[l,h]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[o,[d,"Asus"],[l,v]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[d,"Sony"],[o,"Xperia Tablet"],[l,v]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[d,"Sony"],[o,"Xperia Phone"],[l,h]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[d,o,[l,"console"]],[/android.+;\s(shield)\sbuild/i],[o,[d,"Nvidia"],[l,"console"]],[/(playstation\s[34portablevi]+)/i],[o,[d,"Sony"],[l,"console"]],[/(sprint\s(\w+))/i],[[d,m.str,_.device.sprint.vendor],[o,m.str,_.device.sprint.model],[l,h]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[d,o,[l,v]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[d,[o,/_/g," "],[l,h]],[/(nexus\s9)/i],[o,[d,"HTC"],[l,v]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[o,[d,"Microsoft"],[l,"console"]],[/(kin\.[onetw]{3})/i],[[o,/\./g," "],[d,"Microsoft"],[l,h]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s[6])/i],[o,[d,"Motorola"],[l,h]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[o,[d,"Motorola"],[l,v]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[d,"Samsung"],o,[l,v]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[d,"Samsung"],o,[l,h]],[/(samsung);smarttv/i],[d,o,[l,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[o,[d,"Sharp"],[l,"smarttv"]],[/sie-(\w+)*/i],[o,[d,"Siemens"],[l,h]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[d,"Nokia"],o,[l,h]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[o,[d,"Acer"],[l,v]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[d,"LG"],o,[l,v]],[/(lg) netcast\.tv/i],[d,o,[l,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[o,[d,"LG"],[l,h]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[o,[d,"Lenovo"],[l,v]],[/linux;.+((jolla));/i],[d,o,[l,h]],[/((pebble))app\/[\d\.]+\s/i],[d,o,[l,"wearable"]],[/android.+;\s(glass)\s\d/i],[o,[d,"Google"],[l,"wearable"]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[o,/_/g," "],[d,"Xiaomi"],[l,h]],[/\s(tablet)[;\/\s]/i,/\s(mobile)[;\/\s]/i],[[l,y.lowerize],d,o]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[f,[c,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[c,f],[/rv\:([\w\.]+).*(gecko)/i],[f,c]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[c,f],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[[c,m.str,_.os.windows.name],[f,m.str,_.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[c,"Windows"],[f,m.str,_.os.windows.version]],[/\((bb)(10);/i],[[c,"BlackBerry"],f],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[c,f],[/(symbian\s?o?s?|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[c,"Symbian"],f],[/\((series40);/i],[c],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[c,"Firefox OS"],f],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[[c,"Linux"],f],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[c,"Chromium OS"],f],[/(sunos)\s?([\w\.]+\d)*/i],[[c,"Solaris"],f],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[[c,"Linux"],f],[/(iphone)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[c,"iPhone"],[f,/_/g,"."]],[/(ipad)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[c,"iPad"],[f,/_/g,"."]],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[c,"iOS"],[f,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[c,"Mac"],[f,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[c,f]]},I=function(t,n){if(!(this instanceof I))return new I(t,n).getResult();var r=t||(e&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:""),o=n?y.extend(w,n):w;return this.getBrowser=function(){var e=m.rgx.apply(this,o.browser);return e.major=y.major(e.version),e},this.getCPU=function(){return m.rgx.apply(this,o.cpu)},this.getDevice=function(){return m.rgx.apply(this,o.device)},this.getEngine=function(){return m.rgx.apply(this,o.engine)},this.getOS=function(){return m.rgx.apply(this,o.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this};I.VERSION="0.7.10",I.BROWSER={NAME:c,MAJOR:"major",VERSION:f},I.CPU={ARCHITECTURE:"architecture"},I.DEVICE={MODEL:o,VENDOR:d,TYPE:l,CONSOLE:"console",MOBILE:h,SMARTTV:"smarttv",TABLET:v,WEARABLE:"wearable",EMBEDDED:"embedded"},I.ENGINE={NAME:c,VERSION:f},I.OS={NAME:c,VERSION:f},t.exports&&(n=t.exports=I),n.UAParser=I;var S=e.jQuery||e.Zepto;if(void 0!==S){var O=new I;S.ua=O.getResult(),S.ua.get=function(){return O.getUA()},S.ua.set=function(e){O.setUA(e);var t=O.getResult();for(var n in t)S.ua[n]=t[n]}}}("object"==typeof window?window:e)}),Re=(Pe.UAParser,function e(a){return a?(a^16*Math.random()>>a/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)}),qe={apiEndpoint:"api.amplitude.com",batchEvents:!1,cookieExpiration:3650,cookieName:"amplitude_id",deviceIdFromUrlParam:!1,domain:"",eventUploadPeriodMillis:3e4,eventUploadThreshold:30,forceHttps:!0,includeGclid:!1,includeReferrer:!1,includeUtm:!1,language:{language:navigator&&(navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage)||void 0}.language,logLevel:"WARN",optOut:!1,platform:"Web",savedMaxCount:1e3,saveEvents:!0,saveParamsReferrerOncePerSession:!0,secureCookie:!1,sessionTimeout:18e5,trackingOptions:{city:!0,country:!0,device_model:!0,dma:!0,ip_address:!0,language:!0,os_name:!0,os_version:!0,platform:!0,region:!0,version_name:!0},unsetParamsReferrerOnNewSession:!1,unsentKey:"amplitude_unsent",unsentIdentifyKey:"amplitude_unsent_identify",uploadBatchSize:100},Ue=function(e){this._instanceName=re(e)?o:e.toLowerCase(),this._legacyStorageSuffix=this._instanceName===o?"":"_"+this._instanceName,this._unsentEvents=[],this._unsentIdentifys=[],this._ua=new Pe(navigator.userAgent).getResult(),this.options=K({},qe,{trackingOptions:K({},qe.trackingOptions)}),this.cookieStorage=(new be).getStorage(),this._q=[],this._sending=!1,this._updateScheduled=!1,this._onInit=[],this._eventId=0,this._identifyId=0,this._lastEventTime=null,this._newSession=!1,this._sequenceNumber=0,this._sessionId=null,this._userAgent=navigator&&navigator.userAgent||null};Ue.prototype.Identify=Ie,Ue.prototype.Revenue=Ce,Ue.prototype.init=function(e,t,n,r){if("string"!==G(e)||re(e))ie.error("Invalid apiKey. Please re-initialize with a valid apiKey");else{try{this.options.apiKey=e,this._storageSuffix="_"+e+this._legacyStorageSuffix,De(this.options,n),"string"===G(this.options.logLevel)&&ne(this.options.logLevel);var c=Ge(this);if(this._apiPropertiesTrackingOptions=Object.keys(c).length>0?{tracking_options:c}:{},this.cookieStorage.options({expirationDays:this.options.cookieExpiration,domain:this.options.domain,secure:this.options.secureCookie}),this.options.domain=this.cookieStorage.options().domain,this._instanceName===o&&Me(this),Fe(this),this.options.deviceId="object"===G(n)&&"string"===G(n.deviceId)&&!re(n.deviceId)&&n.deviceId||this.options.deviceIdFromUrlParam&&this._getDeviceIdFromUrlParam(this._getUrlParams())||this.options.deviceId||Re()+"R",this.options.userId="string"===G(t)&&!re(t)&&t||"number"===G(t)&&t.toString()||this.options.userId||null,this.options.saveEvents){this._unsentEvents=this._loadSavedUnsentEvents(this.options.unsentKey),this._unsentIdentifys=this._loadSavedUnsentEvents(this.options.unsentIdentifyKey);for(var i=0;i<this._unsentEvents.length;i++){var l=this._unsentEvents[i].event_properties,d=this._unsentEvents[i].groups;this._unsentEvents[i].event_properties=ce(l),this._unsentEvents[i].groups=ae(d)}for(var f=0;f<this._unsentIdentifys.length;f++){var h=this._unsentIdentifys[f].user_properties,v=this._unsentIdentifys[f].groups;this._unsentIdentifys[f].user_properties=ce(h),this._unsentIdentifys[f].groups=ae(v)}}var y=(new Date).getTime();(!this._sessionId||!this._lastEventTime||y-this._lastEventTime>this.options.sessionTimeout)&&(this.options.unsetParamsReferrerOnNewSession&&this._unsetUTMParams(),this._newSession=!0,this._sessionId=y,this.options.saveParamsReferrerOncePerSession&&this._trackParamsAndReferrer()),this.options.saveParamsReferrerOncePerSession||this._trackParamsAndReferrer(),this._lastEventTime=y,Be(this),this._sendEventsIfReady()}catch(e){ie.error(e)}finally{"function"===G(r)&&r(this)}for(var m=0;m<this._onInit.length;m++)this._onInit[m]()}},Ue.prototype._trackParamsAndReferrer=function(){this.options.includeUtm&&this._initUtmData(),this.options.includeReferrer&&this._saveReferrer(this._getReferrer()),this.options.includeGclid&&this._saveGclid(this._getUrlParams())};var De=function e(t,n){if("object"===G(n)){var r=function(r){if(t.hasOwnProperty(r)){var o=n[r],c=G(t[r]);ue(o,r+" option",c)&&("boolean"===c?t[r]=!!o:"string"===c&&!re(o)||"number"===c&&o>0?t[r]=o:"object"===c&&e(t[r],o))}};for(var o in n)n.hasOwnProperty(o)&&r(o)}};Ue.prototype.runQueuedFunctions=function(){for(var i=0;i<this._q.length;i++){var e=this[this._q[i][0]];"function"===G(e)&&e.apply(this,this._q[i].slice(1))}this._q=[]},Ue.prototype._apiKeySet=function(e){return!re(this.options.apiKey)||(ie.error("Invalid apiKey. Please set a valid apiKey with init() before calling "+e),!1)},Ue.prototype._loadSavedUnsentEvents=function(e){var t=this._getFromStorage(we,e),n=this._parseSavedUnsentEventsString(t,e),r=this._getFromStorageLegacy(we,e),o=this._parseSavedUnsentEventsString(r,e).concat(n);return this._removeFromLegacyStorage(we,e),this._setInStorage(we,e,JSON.stringify(o)),o},Ue.prototype._removeFromLegacyStorage=function(e,t){e.removeItem(t+this._legacyStorageSuffix)},Ue.prototype._parseSavedUnsentEventsString=function(e,t){if(re(e))return[];if("string"===G(e))try{var n=JSON.parse(e);if("array"===G(n))return n}catch(e){}return ie.error("Unable to load "+t+" events. Restart with a new empty queue."),[]},Ue.prototype.isNewSession=function(){return this._newSession},Ue.prototype.onInit=function(e){this._onInit.push(e)},Ue.prototype.getSessionId=function(){return this._sessionId},Ue.prototype.nextEventId=function(){return this._eventId++,this._eventId},Ue.prototype.nextIdentifyId=function(){return this._identifyId++,this._identifyId},Ue.prototype.nextSequenceNumber=function(){return this._sequenceNumber++,this._sequenceNumber},Ue.prototype._unsentCount=function(){return this._unsentEvents.length+this._unsentIdentifys.length},Ue.prototype._sendEventsIfReady=function(e){return 0!==this._unsentCount()&&(this.options.batchEvents?this._unsentCount()>=this.options.eventUploadThreshold?(this.sendEvents(e),!0):(this._updateScheduled||(this._updateScheduled=!0,setTimeout(function(){this._updateScheduled=!1,this.sendEvents()}.bind(this),this.options.eventUploadPeriodMillis)),!1):(this.sendEvents(e),!0))},Ue.prototype._getFromStorage=function(e,t){return e.getItem(t+this._storageSuffix)},Ue.prototype._getFromStorageLegacy=function(e,t){return e.getItem(t+this._legacyStorageSuffix)},Ue.prototype._setInStorage=function(e,t,n){e.setItem(t+this._storageSuffix,n)};var Me=function(e){var t=e.cookieStorage.get(e.options.cookieName+e._storageSuffix);if("object"!==G(t)&&!("object"===G(t=e.cookieStorage.get(e.options.cookieName+e._legacyStorageSuffix))&&t.deviceId&&t.sessionId&&t.lastEventTime)){var n=function(e){var t=we.getItem(e);return we.removeItem(e),t},r="string"===G(e.options.apiKey)&&"_"+e.options.apiKey.slice(0,6)||"",o=n(I+r),c=n(O+r),l=n(S+r);null!=l&&(l="true"===String(l));var d=parseInt(n(w)),f=parseInt(n(y)),h=parseInt(n(v)),E=parseInt(n(m)),N=parseInt(n(_)),x=function(e){return"object"===G(t)&&t[e]};e.options.deviceId=x("deviceId")||o,e.options.userId=x("userId")||c,e._sessionId=x("sessionId")||d||e._sessionId,e._lastEventTime=x("lastEventTime")||f||e._lastEventTime,e._eventId=x("eventId")||h||e._eventId,e._identifyId=x("identifyId")||E||e._identifyId,e._sequenceNumber=x("sequenceNumber")||N||e._sequenceNumber,e.options.optOut=l||!1,t&&void 0!==t.optOut&&null!==t.optOut&&(e.options.optOut="true"===String(t.optOut)),Be(e)}},Fe=function(e){var t=e.cookieStorage.get(e.options.cookieName+e._storageSuffix);if("object"===G(t))Le(e,t);else{var n=e.cookieStorage.get(e.options.cookieName+e._legacyStorageSuffix);"object"===G(n)&&(e.cookieStorage.remove(e.options.cookieName+e._legacyStorageSuffix),Le(e,n))}},Le=function(e,t){t.deviceId&&(e.options.deviceId=t.deviceId),t.userId&&(e.options.userId=t.userId),null!==t.optOut&&void 0!==t.optOut&&(e.options.optOut=t.optOut),t.sessionId&&(e._sessionId=parseInt(t.sessionId)),t.lastEventTime&&(e._lastEventTime=parseInt(t.lastEventTime)),t.eventId&&(e._eventId=parseInt(t.eventId)),t.identifyId&&(e._identifyId=parseInt(t.identifyId)),t.sequenceNumber&&(e._sequenceNumber=parseInt(t.sequenceNumber))},Be=function(e){e.cookieStorage.set(e.options.cookieName+e._storageSuffix,{deviceId:e.options.deviceId,userId:e.options.userId,optOut:e.options.optOut,sessionId:e._sessionId,lastEventTime:e._lastEventTime,eventId:e._eventId,identifyId:e._identifyId,sequenceNumber:e._sequenceNumber})};Ue.prototype._initUtmData=function(e,t){e=e||this._getUrlParams(),t=t||this.cookieStorage.get("__utmz");var n,r,o,c,l,d,f,h,v,y,m,_=(r=e,o=(n=t)?"?"+n.split(".").slice(-1)[0].replace(/\|/g,"&"):"",l=(c=function(e,t,n,r){return oe(e,t)||oe(n,r)})(P,r,"utmcsr",o),d=c(R,r,"utmcmd",o),f=c(U,r,"utmccn",o),h=c(D,r,"utmctr",o),v=c(M,r,"utmcct",o),y={},(m=function(e,t){re(t)||(y[e]=t)})(P,l),m(R,d),m(U,f),m(D,h),m(M,v),y);Je(this,_)},Ue.prototype._unsetUTMParams=function(){var e=new Ie;e.unset(C),e.unset(P),e.unset(R),e.unset(U),e.unset(D),e.unset(M),this.identify(e)};var Je=function(e,t){if("object"===G(t)&&0!==Object.keys(t).length){var n=new Ie;for(var r in t)t.hasOwnProperty(r)&&(n.setOnce("initial_"+r,t[r]),n.set(r,t[r]));e.identify(n)}};Ue.prototype._getReferrer=function(){return document.referrer},Ue.prototype._getUrlParams=function(){return location.search},Ue.prototype._saveGclid=function(e){var t=oe("gclid",e);re(t)||Je(this,{gclid:t})},Ue.prototype._getDeviceIdFromUrlParam=function(e){return oe(T,e)},Ue.prototype._getReferringDomain=function(e){if(re(e))return null;var t=e.split("/");return t.length>=3?t[2]:null},Ue.prototype._saveReferrer=function(e){if(!re(e)){var t={referrer:e,referring_domain:this._getReferringDomain(e)};Je(this,t)}},Ue.prototype.saveEvents=function(){try{this._setInStorage(we,this.options.unsentKey,JSON.stringify(this._unsentEvents))}catch(e){}try{this._setInStorage(we,this.options.unsentIdentifyKey,JSON.stringify(this._unsentIdentifys))}catch(e){}},Ue.prototype.setDomain=function(e){if(ue(e,"domain","string"))try{this.cookieStorage.options({domain:e}),this.options.domain=this.cookieStorage.options().domain,Fe(this),Be(this)}catch(e){ie.error(e)}},Ue.prototype.setUserId=function(e){try{this.options.userId=null!=e&&""+e||null,Be(this)}catch(e){ie.error(e)}},Ue.prototype.setGroup=function(e,t){if(this._apiKeySet("setGroup()")&&ue(e,"groupType","string")&&!re(e)){var n={};n[e]=t;var r=(new Ie).set(e,t);this._logEvent(f,null,null,r.userPropertiesOperations,n,null,null,null)}},Ue.prototype.setOptOut=function(e){if(ue(e,"enable","boolean"))try{this.options.optOut=e,Be(this)}catch(e){ie.error(e)}},Ue.prototype.setSessionId=function(e){if(ue(e,"sessionId","number"))try{this._sessionId=e,Be(this)}catch(e){ie.error(e)}},Ue.prototype.resetSessionId=function(){this.setSessionId((new Date).getTime())},Ue.prototype.regenerateDeviceId=function(){this.setDeviceId(Re()+"R")},Ue.prototype.setDeviceId=function(e){if(ue(e,"deviceId","string"))try{re(e)||(this.options.deviceId=""+e,Be(this))}catch(e){ie.error(e)}},Ue.prototype.setUserProperties=function(e){if(this._apiKeySet("setUserProperties()")&&ue(e,"userProperties","object")){var t=se(ce(e));if(0!==Object.keys(t).length){var n=new Ie;for(var r in t)t.hasOwnProperty(r)&&n.set(r,t[r]);this.identify(n)}}},Ue.prototype.clearUserProperties=function(){if(this._apiKeySet("clearUserProperties()")){var e=new Ie;e.clearAll(),this.identify(e)}};var Ke=function(e,t){for(var i=0;i<t._q.length;i++){var n=e[t._q[i][0]];"function"===G(n)&&n.apply(e,t._q[i].slice(1))}return e};Ue.prototype.identify=function(e,t){if(this._apiKeySet("identify()"))if("object"===G(e)&&e.hasOwnProperty("_q")&&(e=Ke(new Ie,e)),e instanceof Ie){if(Object.keys(e.userPropertiesOperations).length>0)return this._logEvent(f,null,null,e.userPropertiesOperations,null,null,null,t);"function"===G(t)&&t(0,"No request sent",{reason:"No user property operations"})}else ie.error("Invalid identify input type. Expected Identify object but saw "+G(e)),"function"===G(t)&&t(0,"No request sent",{reason:"Invalid identify input type"});else"function"===G(t)&&t(0,"No request sent",{reason:"API key is not set"})},Ue.prototype.groupIdentify=function(e,t,n,r){var o,c,l;if(this._apiKeySet("groupIdentify()"))if(ue(e,"group_type","string")&&!re(e))if(null!=t)if("object"===G(n)&&n.hasOwnProperty("_q")&&(n=Ke(new Ie,n)),n instanceof Ie){if(Object.keys(n.userPropertiesOperations).length>0)return this._logEvent(h,null,null,null,(l=t,(c=e)in(o={})?Object.defineProperty(o,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[c]=l,o),n.userPropertiesOperations,null,r);"function"===G(r)&&r(0,"No request sent",{reason:"No group property operations"})}else ie.error("Invalid identify input type. Expected Identify object but saw "+G(n)),"function"===G(r)&&r(0,"No request sent",{reason:"Invalid identify input type"});else"function"===G(r)&&r(0,"No request sent",{reason:"Invalid group name"});else"function"===G(r)&&r(0,"No request sent",{reason:"Invalid group type"});else"function"===G(r)&&r(0,"No request sent",{reason:"API key is not set"})},Ue.prototype.setVersionName=function(e){ue(e,"versionName","string")&&(this.options.versionName=e)},Ue.prototype._logEvent=function(e,t,n,r,o,c,l,d){if(Fe(this),e)if(this.options.optOut)"function"===G(d)&&d(0,"No request sent",{reason:"optOut is set to true"});else try{var v;v=e===f||e===h?this.nextIdentifyId():this.nextEventId();var y=this.nextSequenceNumber(),m="number"===G(l)?l:(new Date).getTime();(!this._sessionId||!this._lastEventTime||m-this._lastEventTime>this.options.sessionTimeout)&&(this._sessionId=m),this._lastEventTime=m,Be(this),r=r||{};var _=K({},this._apiPropertiesTrackingOptions);n=K({},n||{},_),t=t||{},o=o||{},c=c||{};var w={device_id:this.options.deviceId,user_id:this.options.userId,timestamp:m,event_id:v,session_id:this._sessionId||-1,event_type:e,version_name:ze(this,"version_name")&&this.options.versionName||null,platform:ze(this,"platform")?this.options.platform:null,os_name:ze(this,"os_name")&&this._ua.browser.name||null,os_version:ze(this,"os_version")&&this._ua.browser.major||null,device_model:ze(this,"device_model")&&this._ua.os.name||null,language:ze(this,"language")?this.options.language:null,api_properties:n,event_properties:se(ce(t)),user_properties:se(ce(r)),uuid:Re(),library:{name:"amplitude-js",version:"4.7.0"},sequence_number:y,groups:se(ae(o)),group_properties:se(ce(c)),user_agent:this._userAgent};return e===f||e===h?(this._unsentIdentifys.push(w),this._limitEventsQueued(this._unsentIdentifys)):(this._unsentEvents.push(w),this._limitEventsQueued(this._unsentEvents)),this.options.saveEvents&&this.saveEvents(),this._sendEventsIfReady(d)||"function"!==G(d)||d(0,"No request sent",{reason:"No events to send or upload queued"}),v}catch(e){ie.error(e)}else"function"===G(d)&&d(0,"No request sent",{reason:"Missing eventType"})};var ze=function(e,t){return!!e.options.trackingOptions[t]},Ge=function(e){for(var t=["city","country","dma","ip_address","region"],n={},i=0;i<t.length;i++){var r=t[i];ze(e,r)||(n[r]=!1)}return n};Ue.prototype._limitEventsQueued=function(e){e.length>this.options.savedMaxCount&&e.splice(0,e.length-this.options.savedMaxCount)},Ue.prototype.logEvent=function(e,t,n){return this.logEventWithTimestamp(e,t,null,n)},Ue.prototype.logEventWithTimestamp=function(e,t,n,r){return this._apiKeySet("logEvent()")?ue(e,"eventType","string")?re(e)?("function"===G(r)&&r(0,"No request sent",{reason:"Missing eventType"}),-1):this._logEvent(e,t,null,null,null,null,n,r):("function"===G(r)&&r(0,"No request sent",{reason:"Invalid type for eventType"}),-1):("function"===G(r)&&r(0,"No request sent",{reason:"API key not set"}),-1)},Ue.prototype.logEventWithGroups=function(e,t,n,r){return this._apiKeySet("logEventWithGroups()")?ue(e,"eventType","string")?this._logEvent(e,t,null,null,n,null,null,r):("function"===G(r)&&r(0,"No request sent",{reason:"Invalid type for eventType"}),-1):("function"===G(r)&&r(0,"No request sent",{reason:"API key not set"}),-1)};var We=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};Ue.prototype.logRevenueV2=function(e){if(this._apiKeySet("logRevenueV2()"))if("object"===G(e)&&e.hasOwnProperty("_q")&&(e=Ke(new Ce,e)),e instanceof Ce){if(e&&e._isValidRevenue())return this.logEvent(N,e._toJSONObject())}else ie.error("Invalid revenue input type. Expected Revenue object but saw "+G(e))},Ue.prototype.logRevenue=function(e,t,n){return this._apiKeySet("logRevenue()")&&We(e)&&(void 0===t||We(t))?this._logEvent(N,{},{productId:n,special:"revenue_amount",quantity:t||1,price:e},null,null,null,null,null):-1},Ue.prototype.removeEvents=function(e,t){Ve(this,"_unsentEvents",e),Ve(this,"_unsentIdentifys",t)};var Ve=function(e,t,n){if(!(n<0)){for(var r=[],i=0;i<e[t].length;i++)e[t][i].event_id>n&&r.push(e[t][i]);e[t]=r}};Ue.prototype.sendEvents=function(e){if(this._apiKeySet("sendEvents()"))if(this.options.optOut)"function"===G(e)&&e(0,"No request sent",{reason:"optOut is set to true"});else if(0!==this._unsentCount())if(this._sending)"function"===G(e)&&e(0,"No request sent",{reason:"Request already in progress"});else{this._sending=!0;var t=(this.options.forceHttps?"https":"https:"===window.location.protocol?"https":"http")+"://"+this.options.apiEndpoint+"/",n=Math.min(this._unsentCount(),this.options.uploadBatchSize),r=this._mergeEventsAndIdentifys(n),o=r.maxEventId,l=r.maxIdentifyId,d=JSON.stringify(r.eventsToSend),f=(new Date).getTime(),data={client:this.options.apiKey,e:d,v:c,upload_time:f,checksum:Se(c+this.options.apiKey+d+f)},h=this;new Te(t,data).send(function(t,r){h._sending=!1;try{200===t&&"success"===r?(h.removeEvents(o,l),h.options.saveEvents&&h.saveEvents(),h._sendEventsIfReady(e)||"function"!==G(e)||e(t,r)):413===t?(1===h.options.uploadBatchSize&&h.removeEvents(o,l),h.options.uploadBatchSize=Math.ceil(n/2),h.sendEvents(e)):"function"===G(e)&&e(t,r)}catch(e){}})}else"function"===G(e)&&e(0,"No request sent",{reason:"No events to send"});else"function"===G(e)&&e(0,"No request sent",{reason:"API key not set"})},Ue.prototype._mergeEventsAndIdentifys=function(e){for(var t=[],n=0,r=-1,o=0,c=-1;t.length<e;){var l,d=o>=this._unsentIdentifys.length,f=n>=this._unsentEvents.length;if(f&&d){ie.error("Merging Events and Identifys, less events and identifys than expected");break}d?r=(l=this._unsentEvents[n++]).event_id:f?c=(l=this._unsentIdentifys[o++]).event_id:!("sequence_number"in this._unsentEvents[n])||this._unsentEvents[n].sequence_number<this._unsentIdentifys[o].sequence_number?r=(l=this._unsentEvents[n++]).event_id:c=(l=this._unsentIdentifys[o++]).event_id,t.push(l)}return{eventsToSend:t,maxEventId:r,maxIdentifyId:c}},Ue.prototype.setGlobalUserProperties=function(e){this.setUserProperties(e)},Ue.prototype.__VERSION__="4.7.0";var $e=function(){this.options=K({},qe),this._q=[],this._instances={}};$e.prototype.Identify=Ie,$e.prototype.Revenue=Ce,$e.prototype.getInstance=function(e){e=re(e)?o:e.toLowerCase();var t=this._instances[e];return void 0===t&&(t=new Ue(e),this._instances[e]=t),t},$e.prototype.runQueuedFunctions=function(){for(var i=0;i<this._q.length;i++){var e=this[this._q[i][0]];"function"===G(e)&&e.apply(this,this._q[i].slice(1))}for(var t in this._q=[],this._instances)this._instances.hasOwnProperty(t)&&this._instances[t].runQueuedFunctions()},$e.prototype.init=function(e,t,n,r){this.getInstance().init(e,t,n,function(e){this.options=e.options,"function"===G(r)&&r(e)}.bind(this))},$e.prototype.isNewSession=function(){return this.getInstance().isNewSession()},$e.prototype.getSessionId=function(){return this.getInstance().getSessionId()},$e.prototype.nextEventId=function(){return this.getInstance().nextEventId()},$e.prototype.nextIdentifyId=function(){return this.getInstance().nextIdentifyId()},$e.prototype.nextSequenceNumber=function(){return this.getInstance().nextSequenceNumber()},$e.prototype.saveEvents=function(){this.getInstance().saveEvents()},$e.prototype.setDomain=function(e){this.getInstance().setDomain(e)},$e.prototype.setUserId=function(e){this.getInstance().setUserId(e)},$e.prototype.setGroup=function(e,t){this.getInstance().setGroup(e,t)},$e.prototype.setOptOut=function(e){this.getInstance().setOptOut(e)},$e.prototype.regenerateDeviceId=function(){this.getInstance().regenerateDeviceId()},$e.prototype.setDeviceId=function(e){this.getInstance().setDeviceId(e)},$e.prototype.setUserProperties=function(e){this.getInstance().setUserProperties(e)},$e.prototype.clearUserProperties=function(){this.getInstance().clearUserProperties()},$e.prototype.identify=function(e,t){this.getInstance().identify(e,t)},$e.prototype.setVersionName=function(e){this.getInstance().setVersionName(e)},$e.prototype.logEvent=function(e,t,n){return this.getInstance().logEvent(e,t,n)},$e.prototype.logEventWithGroups=function(e,t,n,r){return this.getInstance().logEventWithGroups(e,t,n,r)},$e.prototype.logRevenueV2=function(e){return this.getInstance().logRevenueV2(e)},$e.prototype.logRevenue=function(e,t,n){return this.getInstance().logRevenue(e,t,n)},$e.prototype.removeEvents=function(e,t){this.getInstance().removeEvents(e,t)},$e.prototype.sendEvents=function(e){this.getInstance().sendEvents(e)},$e.prototype.setGlobalUserProperties=function(e){this.getInstance().setUserProperties(e)},$e.prototype.__VERSION__="4.7.0";var Xe=window.amplitude||{},He=new $e;for(var Qe in He._q=Xe._q||[],Xe._iq)Xe._iq.hasOwnProperty(Qe)&&(He.getInstance(Qe)._q=Xe._iq[Qe]._q||[]);return He},e.exports=r()}).call(this,n(63),n(841).Buffer)}}]);