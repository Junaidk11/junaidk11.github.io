function unescapeHTML(e){var a={"&amp;":"&","&#38;":"&","&#x26;":"&","&lt;":"<","&#60;":"<","&#x3C;":"<","&gt;":">","&#62;":">","&#x3E;":">","&quot;":'"',"&#34;":'"',"&#x22;":'"',"&apos;":"'","&#39;":"'","&#x27;":"'"};return e.replace(/&(?:amp|#38|#x26|lt|#60|#x3C|gt|#62|#x3E|apos|#39|#x27|quot|#34|#x22);/gi,function(e){return a[e]})}function mergeMultipleTagContentTosingleContent(e){var a=e;return a=a.replace(/<p>/i,""),a=a.replace(/<p>/gi,"\n"),a=a.replace(/<\/p>/gi,"")}function convertTextToEmoji(e,a){if(""!=e&&void 0!=e){var t;e=e.replace(regAscii,function(e,a,s,n){return void 0!==n&&""!==n&&unescapeHTML(n)in asciiEmojiList?(t="",$.each(cfEmojisArray,function(e,s){if(void 0!=asciiEmojiList[$.trim(a)]){if(s.unicode==asciiEmojiList[$.trim(a)])return t=s.val,!1}else t=$.trim(a)}),s+t):e})}return a?e:escapeHtml(e)}function checkSingleEmojiText(e){return/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|\u263A|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g.test(e)}function getAnonId(){var e="https://api.tenor.com/v1/anonid?key="+gifTenorApikey;$.ajax({method:"GET",url:e,type:"JSON"}).done(function(e){gifAnonId=e.anon_id,getTenorData(!1)}).error(function(e){})}function getTenorData(e){var a=gifTenorApikey,t=$(".convertfox-messanger-gif-search-input").val().trim(),s="trending";""!=t&&(s="search");var n="https://api.tenor.com/v1/"+s+"?key="+a+"&contentfilter=high&media_filter=basic";n+="&limit=10",""!=gifAnonId&&null!=gifAnonId&&void 0!=gifAnonId&&(n+="&anon_id="+gifAnonId),""!=t&&(n+="&q="+t),e&&""!=nextOffset&&null!=nextOffset&&void 0!=nextOffset&&(n+="&pos="+nextOffset),""==nextOffset&&(gifImageLoading=!0),gifImageLoading&&$.ajax({method:"GET",url:n,type:"JSON"}).done(function(a){var t=a.results;e||$(".gif-preview-container").empty(),""==nextOffset&&$(".gif-preview-container").scrollTop(0),nextOffset=a.next;for(var s=0;s<t.length;s++){var n=t[s].media[0].nanogif.url,o=t[s].media[0].tinygif.url,r=t[s].media[0].gif.url,i='<div class="gif-preview-wrap"><div class="gif-picker-container" data-tiny-url="'+o+'" data-gif-url="'+r+'"><img class="gif-image" src="'+n+'"></div></div>';$(".gif-preview-container").append(i)}0==t.length&&(gifImageLoading=!1,$(".gif-preview-container").is(":empty")&&$(".gif-preview-container").append('<div class="empty-gif-list">No GIFs Found</div>'))}).error(function(e){})}function chatWindowMobileView(e){e?($("#convertfoxChat").addClass("chatBubbleMobileview"),$(".convertfox-messanger-message-email-input").addClass("iphoneDefFontSize"),$(".convertfox-messanger-textarea textarea, .triggered-chat-text-area textarea").addClass("iphoneDefFontSize mobile-messanger").removeClass("desktop-messanger"),$(".convertfox-messanger-chat").removeClass("desktopConvertfox-messanger-chat"),$(".convertfox-conversation-list-area.convertfox-messanger-textarea").removeClass("desktop-convertfox-conversation"),$(".convertfox-messanger-message-file, .convertfox-messanger-message-emojis").removeClass("desktop-convertfox-messanger-message-file").addClass("mobile-convertfox-messanger-message-file"),$(".convertfox-messanger-message-gif").removeClass("desktop-convertfox-messanger-message-gif").addClass("mobile-convertfox-messanger-message-gif"),$(".convertfox-messanger-textarea").removeClass("desktop-convertfox-messanger-textarea").addClass("mobile-convertfox-messanger-textarea")):($("#convertfoxChat").removeClass("chatBubbleMobileview"),$(".convertfox-messanger-message-email-input").removeClass("iphoneDefFontSize"),$(".convertfox-messanger-textarea textarea, .triggered-chat-text-area textarea").removeClass("iphoneDefFontSize mobile-messanger").addClass("desktop-messanger"),$(".convertfox-messanger-chat").addClass("desktopConvertfox-messanger-chat"),$(".convertfox-conversation-list-area.convertfox-messanger-textarea").addClass("desktop-convertfox-conversation"),$(".convertfox-messanger-message-file, .convertfox-messanger-message-emojis").addClass("desktop-convertfox-messanger-message-file").removeClass("mobile-convertfox-messanger-message-file"),$(".convertfox-messanger-message-gif").addClass("desktop-convertfox-messanger-message-gif").removeClass("mobile-convertfox-messanger-message-gif"),$(".convertfox-messanger-textarea").addClass("desktop-convertfox-messanger-textarea").removeClass("mobile-convertfox-messanger-textarea"))}function hexToRgbA(e){var a;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e))return a=e.substring(1).split(""),3==a.length&&(a=[a[0],a[0],a[1],a[1],a[2],a[2]]),a="0x"+a.join(""),"rgba("+[a>>16&255,a>>8&255,255&a].join(",")+",1)";throw new Error("Bad Hex")}function changeTextColor(){$(".primary .convertfox-messanger-message-bubble, .primary .convertfox-messanger-message-bubble a").css("color",textColor)}function activateRecentAgentsImages(){activeAgentImagesLoaded=!0,$.each(allActiveAgents,function(e,a){if(e<=5){var t='<div class="user-avatar">'+cfGetProfileImage(a,"md")+"</div>";if($(".welcome-active-agents").append(t),e<3&&($(".avatar-3-user .cf-avatar-3:nth-child("+(e+1)+")").empty(),$(".avatar-3-user .cf-avatar-3:nth-child("+(e+1)+")").append(cfGetProfileImage(a,"md"))),null!=a&&void 0!=a&&null!=a.full_name&&void 0!=a.full_name)if(0==e)$(".convertfox-messanger-widget-text").text(a.full_name.split(" ")[0]);else{var s=$(".convertfox-messanger-widget-text").text()+", "+a.full_name.split(" ")[0];$(".convertfox-messanger-widget-text").text(s)}}}),$.each(recentActiveAgents,function(e,a){if(null!=a&&void 0!=a){var t='<div class="active-agents"> '+cfGetProfileImage(a,"sm");null!=a.full_name&&void 0!=a.full_name?t+="<span>"+escapeHtml(a.full_name)+"</span> </div>":t+="</div>"}if($(".convertfox-messanger-widget-active-users").append(t),null!=a&&void 0!=a&&null!=a.full_name&&void 0!=a.full_name&&e<3){var s='<div class="present-user-avatar"> '+cfGetProfileImage(a,"")+"<p>"+escapeHtml(a.full_name.split(" ")[0])+"</p> </div>";$(".present-user").append(s)}}),0==recentActiveAgents.length&&allActiveAgents.length>1&&$.each(allActiveAgents,function(e,a){if(null!=a&&void 0!=a&&null!=a.full_name&&void 0!=a.full_name&&e<3){var t='<div class="present-user-avatar"> '+cfGetProfileImage(a,"")+"<p>"+escapeHtml(a.full_name.split(" ")[0])+"</p> </div>";$(".present-user").append(t)}})}function cfGetProfileImage(e,a){return null==e.avatar_url||e.avatar_url.includes("avatar.tobi.sh")||""==e.avatar_url?'<div class="cf-profile-avatar '+a+'"  style="background : '+e.avatar_background+'"> '+e.avatar_letter+"</div>":'<img src="'+e.avatar_url+'">'}function replaceActiveUserImage(e){null==e.avatar_url||e.avatar_url.includes("avatar.tobi.sh")||""==e.avatar_url||($(".chatImageWithUserImage").attr("src",e.avatar_url),$(".first-image").attr("src",e.avatar_url),void 0!=currentConversationDetails&&void 0!=currentConversationDetails.data&&void 0!=currentConversationDetails.data.user&&void 0!=currentConversationDetails.data.user.avatar_url&&(cfQueryString.cfChatLastActiveAgentImage=currentConversationDetails.data.user.avatar_url=e.avatar_url))}function cfGetProfileImageTyping(e,a){return null==e.user_avatar||e.user_avatar.includes("avatar.tobi.sh")||""==e.user_avatar?'<div class="cf-profile-avatar '+a+'" style="background : '+e.user_avatar_background+'"> '+e.user_avatar_letter+"</div>":'<img src="'+e.user_avatar+'">'}function emitRoom(){socket.emit("room",conversation_room),socket.emit("room",agents_status_room),socket.emit("room",chat_setting_room)}function escapeHtml(e){function a(e){return t[e]}if(e&&e.length>0){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return e.replace(/[&<>"'\/]/g,a)}return e}function assignSetIntervalOnPageFocus(){cfPageFocusSetIntervalInitiated||!parentWindowFocusStatus&&!iFrameWindowFocusStatus||(cfParentPageTitleInterval=setInterval(function(){parent.postMessage({funName:"changeParentWindowTitle",params:{status:cfParentPageOriginalTitle,userObject:cfUnreadMessageUserObject}},"*"),cfParentPageOriginalTitle=!cfParentPageOriginalTitle},8e3),cfPageFocusSetIntervalInitiated=!0)}function assignSetIntervalOnPageNotFocus(){cfPageNotFocusSetIntervalInitiated||parentWindowFocusStatus||iFrameWindowFocusStatus||(cfParentPageTitleIntervalOnPageNotFocus=setInterval(function(){parent.postMessage({funName:"changeParentWindowTitle",params:{status:cfParentPageOriginalTitle,userObject:cfUnreadMessageUserObject}},"*"),cfParentPageOriginalTitle=!cfParentPageOriginalTitle},3e3),cfPageNotFocusSetIntervalInitiated=!0)}function cfRandomIdGenerate(e){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return(e+"-"+a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()).trim()}function disableConversationChatArea(){$("#conversation-area-emoji-button").attr("disabled","disabled"),$("#conversation-area-gif-button").attr("disabled","disabled"),$("#conversation-area-attachment-button").attr("disabled","disabled"),$("#conversationChatArea").attr("disabled","disabled"),$(".convertfox-messanger-chat-textarea").addClass("delete-class")}function disableHompepageChatArea(){$("#home-page-emoji").attr("disabled","disabled"),$("#home-page-gif-button").attr("disabled","disabled"),$("#home-page-attachment-button").attr("disabled","disabled"),$("#chatArea").attr("disabled","disabled"),$(".convertfox-messanger-textarea").addClass("delete-class")}function enableConversationChatArea(){$("#conversation-area-emoji-button").removeAttr("disabled"),$("#conversation-area-gif-button").removeAttr("disabled"),$("#conversation-area-attachment-button").removeAttr("disabled"),$("#conversationChatArea").removeAttr("disabled"),$(".convertfox-messanger-chat-textarea").removeClass("delete-class")}function enableHompepageChatArea(){$("#home-page-emoji").removeAttr("disabled"),$("#home-page-gif-button").removeAttr("disabled"),$("#home-page-attachment-button").removeAttr("disabled"),$("#chatArea").removeAttr("disabled"),$(".convertfox-messanger-textarea").removeClass("delete-class")}function isScrollEnd(){return $(".convertfox-messanger-messages").get(0).scrollHeight,$(".convertfox-messanger-messages").scrollTop()+$(".convertfox-messanger-messages").innerHeight()>=$(".convertfox-messanger-messages").get(0).scrollHeight}function addTypingBubble(e){var a=!0;if(0==$("#convertfox-messanger-messages .person-typing-bubble").length){var t=!1;"lead_bot_greeting"!==e.message_type&&"lead_bot_question"!==e.message_type&&"lead_bot_response"!==e.message_type&&"lead_bot_user_response"!==e.message_type&&"lead_bot_goal_message"!==e.message_type||(t=!0);var s='<div class="convertfox-messanger-content person-typing-bubble" style="display: none;"> <div class="convertfox-messanger-chat-message"> <div class="convertfox-messanger-message-avatar"> ';s+=t?"<img src="+chatBotIconUrl+'></div> <div class="convertfox-messanger-chat-message-body"> <div class="message-name"> <span> '+translateBot+" </span></div>":cfGetProfileImageTyping(e,"lg")+'</div> <div class="convertfox-messanger-chat-message-body"> <div class="message-name"> <span>'+escapeHtml(e.user_name)+"</span></div>",s+='<div class="convertfox-messanger-message-bubble"> <span class="dot"></span> <span class="dot"></span> <span class="dot"></span> </div> </div> </div> </div>',$("#convertfox-messanger-messages").append(s),null!=typingInterval&&clearInterval(typingInterval),typingInterval=setInterval(function(){0==a&&removeTypingBubble(),a=!1},5e3),isScrollEnd()?$("#convertfox-messanger-messages .person-typing-bubble").show(400,function(){cfScrollChatAreaToBottom(400)}):$("#convertfox-messanger-messages .person-typing-bubble").show(400,function(){})}}function removeTypingBubble(){$("#convertfox-messanger-messages .person-typing-bubble").hide(400,function(){$("#convertfox-messanger-messages .person-typing-bubble").remove()}),null!=typingInterval&&clearInterval(typingInterval)}function markAgentOnline(){null==timeDifferenceText?($(".convertfox-messanger-chat-subtitle").text(translateMessageReplayDelay),$(".convertfox-messanger-shrink-header-sub-content").text(translateMessageReplayDelay),$(".reply-time").text(translateMessageReplayDelay)):($(".convertfox-messanger-chat-subtitle").text(timeDifferenceText),$(".convertfox-messanger-shrink-header-sub-content").text(timeDifferenceText),$(".reply-time").text(timeDifferenceText))}function markAgentOffline(){null==timeDifferenceText?($(".convertfox-messanger-chat-subtitle").text(translateMessageReplayDelay),$(".convertfox-messanger-shrink-header-sub-content").text(translateMessageReplayDelay),$(".reply-time").text(translateMessageReplayDelay)):($(".convertfox-messanger-chat-subtitle").text(timeDifferenceText),$(".convertfox-messanger-shrink-header-sub-content").text(timeDifferenceText),$(".reply-time").text(timeDifferenceText))}function getPromptIds(e,a){var t={person_random_id:randomId};$.ajax({method:"GET",url:serverProtocol+cfSubdomain+serverDomain+"/projects/"+applicationId+"/end_user_bots",data:t,type:"JSON"}).done(function(a){e(a.data)}).error(function(e){a(e)})}function cfUpdateOverallUnreadCount(e){e>=1&&!$("#convertfoxBubble").hasClass("is-active")?($(".cf-unread-chat-count").show(),$(".cf-unread-chat-count").html(e)):$(".cf-unread-chat-count").hide(),e>=1&&"flex"==$("#chat-conversation-area").css("display")?($("#gtNewConversationCount").addClass("new-con-open"),$("#gtNewConversationCount").html(e)):$("#gtNewConversationCount").removeClass("new-con-open")}function cfMessageSeen(){var e="";setTimeout(function(){var a="";1!=$(".convertfox-messanger-content").length||isUserInitiatedChat?$(".convertfox-messanger-chat-message").not(".primary").each(function(){""==e?"email-submit-bubble"!=$(this).parent().attr("id")&&(e=parseInt($(this).parent().attr("id")),a=$(this).parent().attr("data-chat-message-status")):e<parseInt($(this).parent().attr("id"))&&(e=parseInt($(this).parent().attr("id")),a=$(this).parent().attr("data-chat-message-status"))}):(e=parseInt($(".convertfox-messanger-content").attr("id")),a=$(".convertfox-messanger-content").attr("data-chat-message-status")),"none"!=$("#chat-conversation-area").css("display")&&$("#convertfoxMessageWindow").hasClass("is-active")&&e&&""!=e&&void 0!=a&&"seen"!=a&&""!=a&&cfMessageDeliverMethod(e,"seen",null)},500)}function generateChatRandomId(){var e=(new Date).getTime();return applicationId+"-"+e}function removeOldMessages(){conversationTextAreaFocus(),$(".convertfox-messanger-messages").empty()}function cfGetMessages(e,a){if(latestScrolledMessageId=null,""!=$("#conversationChatArea").val()&&(chatAreaValue=$("#conversationChatArea").val()),$("#gdprOptionSetting").hide(),$("#conversationChatArea").val(""),void 0==e||""==e){if(cfCurrentConversationId=currentConversationDetails.data.conversation_identifier,conversationTextAreaFocus(),void 0!=currentConversationDetails.data.user&&null!=currentConversationDetails.data.user&&void 0!=currentConversationDetails.data.user.avatar_url)var t=currentConversationDetails.data.user.avatar_url,s=currentConversationDetails.data.user.full_name,n=currentConversationDetails.data.user.avatar_background;if(removeOldMessages(),""!=cfCurrentConversationId&&void 0!=cfCurrentConversationId){if(cfGetAllChatMessages(!1),$(".convertfox-messanger-chat-header-avatar .avatar-single-user img").remove(),$(".convertfox-messanger-chat-header-avatar .avatar-single-user .cf-profile-avatar").remove(),void 0!=currentConversationDetails.data.user&&null!=currentConversationDetails.data.user&&void 0!=currentConversationDetails.data.user.avatar_url)if(void 0==t||"undefined"==t||t.includes("avatar.tobi.sh"))var o='<div class="cf-profile-avatar xl" style="background: '+n+'">'+s.substr(0,2)+"</div>";else var o='<img class="first-image" src="'+t+'">';else if("lead_bot_greeting"===currentConversationDetails.data.message_type){var o='<img class="first-image" src="'+chatBotIconUrl+'">';$(".convertfox-messanger-chat-title").text(translateBot)}$(".convertfox-messanger-chat-header-avatar .avatar-single-user").append(o),$(".convertfox-messanger-chat-header-avatar").css("display","flex"),$(".convertfox-messanger-chat-header-avatar-3-users").css("display","none"),void 0!=s&&$(".convertfox-messanger-chat-title").text(s)}}else if(void 0!=e){$("#chat-conversation-area").show(),$("#chat-conversation-area").removeClass("cf-lead-bot"),$("#chat-conversation-area").removeClass("cf-allow-cursor"),$("#conversation-list-area").addClass("slide-leave-active"),$("#chat-conversation-area").addClass("slide-enter-active"),cfQueryString.cfDeviceType?($("#conversation-list-area").hide(),$("#conversation-list-area").removeClass("slide-enter-active slide-leave-active"),$("#chat-conversation-area").removeClass("slide-enter-active slide-leave-active")):setTimeout(function(){$("#conversation-list-area").hide(),$("#conversation-list-area").removeClass("slide-enter-active slide-leave-active"),$("#chat-conversation-area").removeClass("slide-enter-active slide-leave-active")},400),cfCurrentConversationId=$(e).attr("data-cf-conversation-identifier");var t=$(e).find(".convertfox-messanger-conversation-avatar img").attr("src"),s=$(e).find(".convertfox-messanger-conversation-reply h3").text(),r=$(e).find(".convertfox-messanger-conversation-avatar .cf-profile-avatar").css("background-color");if(""!=cfCurrentConversationId&&void 0!=cfCurrentConversationId){if(cfGetAllChatMessages(!1),removeOldMessages(),$(".convertfox-messanger-chat-header-avatar .avatar-single-user img").remove(),$(".convertfox-messanger-chat-header-avatar .avatar-single-user .cf-profile-avatar").remove(),void 0!=t)var o='<img class="first-image" src="'+t+'">';else if($(e).find(".convertfox-messanger-conversation-avatar .cf-profile-avatar").length>0)var i=$(e).find(".convertfox-messanger-conversation-avatar .cf-profile-avatar").text(),o='<div class="cf-profile-avatar xl" style="background: '+r+'">'+i+"</div>";$(".convertfox-messanger-chat-header-avatar .avatar-single-user").append(o),$(".convertfox-messanger-chat-header-avatar").css("display","flex"),$(".convertfox-messanger-chat-header-avatar-3-users").css("display","none"),void 0!=s&&$(".convertfox-messanger-chat-title").text(s),parent.postMessage({funName:"setChatOpenAndOpenConversationStatus",params:{openStatus:"true",openConversationId:cfCurrentConversationId,lastActiveAgentImage:t,lastActiveAgentName:s,lastActiveAgentBackground:r}},"*")}$(".cf-chat-list-area-inner").removeClass("active"),$(".cf-chat-area-inner").addClass("active"),$(e).find(".convertfox-messanger-conversation-avatar").hasClass("show-two-agents")||$(e).find(".convertfox-messanger-conversation-avatar").hasClass("show-three-agents")?($(".convertfox-messanger-chat-header-avatar").css("display","none"),$(".convertfox-messanger-chat-header-avatar-3-users").css("display","flex")):($(".convertfox-messanger-chat-header-avatar").css("display","flex"),$(".convertfox-messanger-chat-header-avatar-3-users").css("display","none"))}$.isFunction(window.loadConversationPageEmoji)&&window.loadConversationPageEmoji(),$(".convertfox-messanger-emoji-select").removeClass("is-open"),setTimeout(function(){$("#conversationChatArea").css("display","block"),setTimeout(function(){$(".convertfox-messanger-emoji-select, .convertfox-messanger-gif-select").css("display","block"),$(".convertfox-messanger-emoji-select, .convertfox-messanger-gif-select").css("height",0)},1500)},500)}function addingLoadMoreSpinner(){var e='<div class="cf-load-more-spinner"><img src="'+loadingImage+'"></div>';$(".convertfox-messanger-messages").prepend(e)}function removingLoadMoreSpinner(){$(".cf-load-more-spinner").remove()}function cfScrollChatAreaToBottom(e){var a=parseInt(e);$(".convertfox-messanger-messages").animate({scrollTop:$(".convertfox-messanger-messages").get(0).scrollHeight},a),$("#convertfoxMessageWindow .convertfox-new-message-toast").hide(a,function(){$("#convertfoxMessageWindow .convertfox-new-message-toast").remove(),newUnreadMessageCount=0}),cfMessageSeen()}function openRecentConversationMessage(){0!=$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:first .cf-unread-count-conversation").length&&"none"!=$("#conversation-list-area").css("display")?(currentConversationDetails={data:{user:{}}},currentConversationDetails.data.conversation_identifier=$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:first").attr("data-cf-conversation-identifier"),currentConversationDetails.data.user.avatar_url=$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:first .convertfox-messanger-conversation-avatar img").attr("src"),currentConversationDetails.data.user.full_name=$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:first .convertfox-messanger-conversation-reply h3").text(),currentConversationDetails.data.user.avatar_background=$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:first .convertfox-messanger-conversation-avatar .cf-profile-avatar").css("background-color"),void 0!=currentConversationDetails&&void 0!=currentConversationDetails.data&&void 0!=currentConversationDetails.data.conversation_identifier&&""!=currentConversationDetails.data.conversation_identifier?($("#convertfoxMessageWindow, .convertfox-messanger-window-shadow").css("display","flex"),setTimeout(function(){$("#convertfoxMessageWindow").addClass("is-active")},0),$("#convertfoxBubble").addClass("is-active"),$("#convertfoxChat").addClass("is-active"),$(".triggered-chat-container").css("display","none"),$(".notification-chat-container").hide(),setTimeout(function(){conversationTextAreaFocus()},200),cfGetMessages("",currentConversationDetails),$("#conversation-list-area").css("display","none"),$("#chat-conversation-area").css("display","flex"),$("#chat-conversation-area").removeClass("cf-lead-bot"),$("#chat-conversation-area").removeClass("cf-allow-cursor"),$(".triggered-chat-container, .convertfox-messanger").addClass("box-shadow-padding"),parent.postMessage({funName:"setChatBoxHeight",params:{status:"chatAreaOpen",height:"720px",width:"450px"}},"*"),parent.postMessage({funName:"setChatOpenAndOpenConversationStatus",params:{openStatus:"true",openConversationId:currentConversationDetails.data.conversation_identifier,lastActiveAgentImage:currentConversationDetails.data.user.avatar_url,lastActiveAgentName:currentConversationDetails.data.user.full_name,lastActiveAgentBackground:currentConversationDetails.data.user.avatar_background}},"*")):($("#convertfoxMessageWindow, .convertfox-messanger-window-shadow").css("display","flex"),setTimeout(function(){$("#convertfoxMessageWindow").addClass("is-active")},0),$("#convertfoxBubble").addClass("is-active"),$("#convertfoxChat").addClass("is-active"),$(".triggered-chat-container").css("display","none"),$(".triggered-chat-container, .convertfox-messanger").addClass("box-shadow-padding"),parent.postMessage({funName:"setChatBoxHeight",params:{status:"chatAreaOpen",height:"720px",width:"450px"}},"*"),parent.postMessage({funName:"setChatOpenAndOpenConversationStatus",params:{openStatus:"true",openConversationId:"",lastActiveAgentImage:"",lastActiveAgentName:"",lastActiveAgentBackground:""}},"*"),"none"==$("#conversation-list-area").css("display")&&"none"==$("#chat-conversation-area").css("display")&&($("#conversation-list-area").css("display","flex"),cfGetConversationList(!1)),setTimeout(function(){},200))):""!=cfQueryString.cfChatOpenConversation&&""!=cfQueryString.cfChatLastActiveAgentImage&&""!=cfQueryString.cfChatLastActiveAgentName&&void 0!=currentConversationDetails&&void 0!=currentConversationDetails.data?($(".triggered-chat-container").css("display","none"),$("#convertfoxMessageWindow").removeClass("triggered-chat-active"),$("#convertfoxMessageWindow, .convertfox-messanger-window-shadow").css("display","flex"),setTimeout(function(){$("#convertfoxMessageWindow").addClass("is-active")},0),$(".convertfox-messanger-home-content").removeClass("shirnk"),$("#conversation-list-area").removeClass("is-shrunk"),$("#conversation-list-area").css("display","none"),$("#chat-conversation-area").css("display","flex"),$("#chat-conversation-area").removeClass("cf-lead-bot"),$("#chat-conversation-area").removeClass("cf-allow-cursor"),cfGetMessages("",currentConversationDetails),$("#chat-conversation-area").show(),$("#convertfoxBubble").addClass("is-active"),$("#convertfoxChat").addClass("is-active"),$(".triggered-chat-container, .convertfox-messanger").addClass("box-shadow-padding"),setTimeout(function(){parent.postMessage({funName:"setChatBoxHeight",params:{status:"chatAreaOpen",height:"720px",width:"450px"}},"*"),parent.postMessage({funName:"setChatOpenAndOpenConversationStatus",params:{openStatus:"true",openConversationId:currentConversationDetails.data.conversation_identifier,lastActiveAgentImage:currentConversationDetails.data.user.avatar_url,lastActiveAgentName:currentConversationDetails.data.user.full_name,lastActiveAgentBackground:currentConversationDetails.data.user.avatar_background}},"*")},100),cfQueryString.cfChatOpenConversation="",cfQueryString.cfChatLastActiveAgentImage="",cfQueryString.cfChatLastActiveAgentName="",cfQueryString.cfChatOpenStatus="false",setTimeout(function(){conversationTextAreaFocus()},200)):defaultChatOpenWithConversationList()}function cfGetConversationList(e){$("#conversationChatArea").attr("placeholder",translateWriteReply);var a=randomId,t={person_random_id:a,cf_identified:cfIdentified};if(e){var s=$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:last-child").attr("data-cf-last-message-id");""!=s&&void 0!=s&&(t.last_message_id=s)}else $(".convertfox-messanger-conversation-body .convertfox-messanger-conversation-wrap").empty(),$(".convertfox-messanger-window").hasClass("is-active")&&"none"!=$("#conversation-list-area").css("display")&&$(".cf-loading-full-page").show();$.ajax({method:"GET",url:serverProtocol+cfSubdomain+serverDomain+"/get_conversations",data:t,type:"JSON"}).done(function(e){if(isFoundMeetingInitiated=!1,$(".cf-loading-full-page").hide(),void 0!=e.data.conversations){cfconversationListEnd=!1;var a=(moment().format("YYYY-MM-DD"),e.data.conversations),t=e.data.project_details;$(".convertfox-messanger-conversation-container").css("opacity",1),$(".convertfox-home-x-scroll-content").removeClass("is-welcome"),cfUpdateOverallUnreadCount(e.data.person_total_unread_count),totalUnreadMessageCount=e.data.person_total_unread_count,parent.postMessage({funName:"showFaviconNotification",params:{count:e.data.person_total_unread_count}},"*");for(var s=0;s<a.length;s++){isBotPresent||"bot"!==a[s].conversation_type||(isBotPresent=!0);var n=a[s].chat_messages[0].message_type,o=!1;if("triggered_message"===n)var r=mergeMultipleTagContentTosingleContent(a[s].chat_messages[0].message_content),i=convertTextToEmoji(r,!0);else if("lead_bot_greeting"===n||"lead_bot_question"===n||"lead_bot_response"===n||"lead_bot_user_response"===n||"lead_bot_goal_message"===n)if(o=!0,"lead_bot_question"===n)var c=JSON.parse(a[s].chat_messages[0].message_content),i=convertTextToEmoji($.trim(c.question_text),!0);else var i=convertTextToEmoji($.trim(a[s].chat_messages[0].message_content),!0);else var i=convertTextToEmoji($.trim(a[s].chat_messages[0].message_content),!1);var l=(moment(a[s].chat_messages[0].created_at).format("YYYY-MM-DD"),moment(a[s].chat_messages[0].created_at).fromNow()),d='<div class="convertfox-messanger-conversation goto-chat" onclick="cfGetMessages(this)" data-cf-conversation-identifier="'+a[s].conversation_identifier+'" data-cf-last-message-id="'+a[s].last_message_id+'" > ';d+='<div class="convertfox-messanger-conversation-text"> <div class="convertfox-messanger-conversation-reply"> ',o?(d+='<div class="convertfox-messanger-conversation-avatar"><img src='+chatBotIconUrl+"></div>",d+="<h3>"+escapeHtml(translateBot)+"</h3> "):(void 0!=a[s].last_user?d+='<div class="convertfox-messanger-conversation-avatar"> '+cfGetProfileImage(a[s].last_user,"xs")+"</div>":recentActiveAgents.length>=1?d+='<div class="convertfox-messanger-conversation-avatar">'+cfGetProfileImage(recentActiveAgents[0],"xs")+"</div> ":0==recentActiveAgents.length&&(d+='<div class="convertfox-messanger-conversation-avatar">'+cfGetProfileImage(t,"xs")+"</div> "),void 0!=a[s].last_user?d+="<h3>"+escapeHtml(a[s].last_user.full_name)+"</h3> ":d+="<h3>"+escapeHtml(t.project_name)+"</h3> "),d+='<span class="conversation-reply-time"><time class="timestamp" data-livestamp="'+a[s].chat_messages[0].created_at+'" datetime="'+a[s].chat_messages[0].created_at+'" value="'+a[s].chat_messages[0].created_at+'">'+l+"</time></span> </div> ",void 0!=a[s].chat_messages[0].deleted_at&&null!=a[s].chat_messages[0].deleted_at?d+='<div class="convertfox-messanger-conversation-message-preview con-deleted-message add-linkify-tag" data-id="'+a[s].last_message_id+'"> ':d+='<div class="convertfox-messanger-conversation-message-preview add-linkify-tag" data-id="'+a[s].last_message_id+'"> ',void 0!=a[s].chat_messages[0].deleted_at&&null!=a[s].chat_messages[0].deleted_at?d+="<div>"+i+"</div> ":a[s].chat_messages[0].is_attachment||void 0!=a[s].chat_messages[0].is_gif&&a[s].chat_messages[0].is_gif?d+="<div> Attachment"+paperClipSvg()+" </div> ":d+="<div>"+i+"</div> ",a[s].person_unread_message_count>0&&(a[s].person_unread_message_count>99?d+='<span class="cf-unread-count-conversation">99+</span>':d+='<span class="cf-unread-count-conversation">'+a[s].person_unread_message_count+"</span>"),d+="</div></div></div> ",$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation-wrap").append(d),o||$("#convertfoxChat").hasClass("is-active")||null==cfQueryString.cfChatOpenConversation||void 0==cfQueryString.cfChatOpenConversation||cfQueryString.cfChatOpenConversation!=a[s].conversation_identifier||(void 0!=a[s].last_user?replaceActiveUserImage(a[s].last_user):recentActiveAgents.length>=1?replaceActiveUserImage(recentActiveAgents[0]):0==recentActiveAgents.length&&replaceActiveUserImage(t))}"seen"!=e.data.conversations[0].chat_messages[0].status&&0!=e.data.conversations[0].person_unread_message_count&&(messageId=e.data.conversations[0].last_message_id,null!=e.data.conversations[0].last_user&&void 0!=e.data.conversations[0].last_user&&(cfUnreadMessageUserObject=e.data.conversations[0].last_user)),""!=cfUnreadMessageUserObject&&(assignSetIntervalOnPageFocus(),assignSetIntervalOnPageNotFocus()),$(".add-linkify-tag").linkify({target:"_blank"}),e.data.conversations.length>0&&$(".convertfox-home-x-scroll-content").removeClass("is-welcome")}else cfconversationListEnd=!0,0==$(".convertfox-messanger-conversation").length?($(".convertfox-messanger-conversation-container").css("opacity",0),$(".convertfox-home-x-scroll-content").addClass("is-welcome")):($(".convertfox-messanger-conversation-container").css("opacity",1),$(".convertfox-home-x-scroll-content").removeClass("is-welcome"));DynamicTextColor=""!=specialTextColor&&void 0!=specialTextColor?specialTextColor:settingBackgroundTextColor,
$(".convertfox-messanger-home-title, .convertfox-messanget-home-subtitle, .convertfox-messanger-shrink-header-back-icon i, .convertfox-messanger-shrink-header-content, .convertfox-messanger-shrink-header-sub-content, .present-user-avatar p, .convertfox-messanger-chat-title, .convertfox-messanger-chat-subtitle, .convertfox-messanger-chat-back i, .intro-text,  .convertfox-messanger-widget-title, .convertfox-messanger-conversation-title, .convertfox-messanger-conversation-reply h3, .convertfox-messanger-conversation-reply .conversation-reply-time, .convertfox-messanger-conversation-message-preview div, .convertfox-messanger-chat-title, .convertfox-messanger-home-subtitle, .convertfox-messanger-conversation-message-preview div, .convertfox-messanger-widget-active-users .active-agents span, .convertfox-messanger-home-tab a, .convertfox-messanger-message-send span, .reply-time, .convertfox-messanger-shrink-header-active-agents").css("cssText","color: "+DynamicTextColor+" !important;"),$("g#send, g#send1, g#send3").css("cssText","fill: "+DynamicTextColor+" !important;"),$(".add-linkify-tag").linkify({target:"_blank"}),isConversationLoaded=!0}).error(function(e){$(".cf-loading-full-page").hide()})}function showDownloadButton(e){$(e).load(function(){$(e).parent(".show-attachment-file").children(".overlay-download-link").attr("style","")})}function cfMessageDeliverMethod(e,a,t){if(void 0!=e&&""!=e&&(null!=t||""!=cfCurrentConversationId)){var s={person_random_id:randomId,id:e,status:a,conversation_identifier:cfCurrentConversationId};null!=t&&(s.conversation_identifier=t),$.ajax({method:"POST",url:serverProtocol+cfSubdomain+serverDomain+"/person_update_message_status",data:s,type:"JSON"}).done(function(t){"seen"==a&&messageId==e&&(cfUnreadMessageUserObject="",clearInterval(cfParentPageTitleInterval),clearInterval(cfParentPageTitleIntervalOnPageNotFocus),cfPageFocusSetIntervalInitiated=!1,cfPageNotFocusSetIntervalInitiated=!1,cfParentPageOriginalTitle=!0,parent.postMessage({funName:"changeParentWindowTitle",params:{status:cfParentPageOriginalTitle,userObject:cfUnreadMessageUserObject}},"*"))})}}function bytesToSize(e){if(void 0!=e){var a=["Bytes","KB","MB","GB","TB"];if(0==e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+" "+a[t]}}function createUploadedFileHtml(e,a,t,s,n){var o='<div class="convertfox-messanger-message-photo-upload download-file-link" data-download-file="'+e+'" id="chat-message-file-'+a+'" data-download-type="'+t+'"> <div class="convertfox-messanger-message-photo-icon"> <span class="icon"> '
;return o+="video/mp4"==t?'<svg width="38px" height="48px" viewBox="0 0 38 48" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> \x3c!-- Generator: Sketch 47 (45396) - http://www.bohemiancoding.com/sketch --\x3e <desc>Created with Sketch.</desc> <defs></defs> <g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Icon-File/6" fill-rule="nonzero"> <g id="005-mp4"> <path d="M26.7597727,0 L1.69531818,0 C0.9975,0 0.431818182,0.561428571 0.431818182,1.65085714 L0.431818182,47.1428571 C0.431818182,47.4385714 0.9975,48 1.69531818,48 L36.3046818,48 C37.0025,48 37.5681818,47.4385714 37.5681818,47.1428571 L37.5681818,11.124 C37.5681818,10.5274286 37.4878636,10.3354286 37.3462273,10.194 L27.2969545,0.220285714 C27.1544545,0.0797142857 26.961,0 26.7597727,0 Z" id="Shape" fill="#FFFFFF"></path> <path d="M36.3046818,48 L1.69531818,48 C0.9975,48 0.431818182,47.4385714 0.431818182,46.746 L0.431818182,33.4285714 L37.5681818,33.4285714 L37.5681818,46.746 C37.5681818,47.4385714 37.0025,48 36.3046818,48 Z" id="Shape" fill="#FF5364"></path> <g id="Group" transform="translate(6.909091, 36.000000)" fill="#FFFFFF"> <polygon id="Shape" points="7.25454545 0.792 8.69509091 0.792 8.69509091 9.42857143 7.25454545 9.42857143 7.25454545 3.48685714 5.30618182 8.29114286 4.05477273 8.29114286 2.09431818 3.48685714 2.09431818 9.42857143 0.653772727 9.42857143 0.653772727 0.792 2.09431818 0.792 4.68004545 6.69857143"></polygon> <path d="M12.2731364,9.42857143 L10.8559091,9.42857143 L10.8559091,0.792 L13.3587273,0.792 C13.7283636,0.792 14.0945455,0.850285714 14.4564091,0.967714286 C14.8182727,1.08514286 15.143,1.26085714 15.4305909,1.49485714 C15.7181818,1.72885714 15.9505,2.01257143 16.1275455,2.34428571 C16.3045909,2.676 16.3935455,3.04885714 16.3935455,3.46371429 C16.3935455,3.90171429 16.3184091,4.29771429 16.169,4.65342857 C16.0195909,5.00914286 15.8105909,5.30828571 15.5428636,5.55 C15.2751364,5.79171429 14.9521364,5.97942857 14.5747273,6.11228571 C14.1973182,6.24514286 13.7793182,6.31114286 13.3233182,6.31114286 L12.2722727,6.31114286 L12.2722727,9.42857143 L12.2731364,9.42857143 Z M12.2731364,1.85828571 L12.2731364,5.28 L13.5720455,5.28 C13.7447727,5.28 13.9157727,5.25085714 14.0859091,5.19171429 C14.2551818,5.13342857 14.4106364,5.03742857 14.5522727,4.90457143 C14.6939091,4.77171429 14.8079091,4.58657143 14.8942727,4.34828571 C14.9806364,4.11 15.0238182,3.81514286 15.0238182,3.46371429 C15.0238182,3.32314286 15.0039545,3.16028571 14.9650909,2.97771429 C14.9253636,2.79428571 14.8450455,2.61857143 14.7232727,2.45057143 C14.6006364,2.28257143 14.4296364,2.142 14.2094091,2.02885714 C13.9891818,1.91571429 13.6972727,1.85914286 13.3354091,1.85914286 L12.2731364,1.85914286 L12.2731364,1.85828571 Z" id="Shape"></path> <path d="M21.1409545,7.41257143 L17.3746364,7.41257143 L17.3746364,6.3 L21.1409545,0.792 L22.5815,0.792 L22.5815,6.3 L23.4909091,6.3 L23.4909091,7.41342857 L22.5815,7.41342857 L22.5815,9.42857143 L21.1409545,9.42857143 L21.1409545,7.41257143 Z M21.1409545,6.3 L21.1409545,2.43257143 L18.6372727,6.3 L21.1409545,6.3 Z" id="Shape"></path> </g> <path d="M15.9772727,24 C15.8339091,24 15.6914091,23.9648571 15.5618636,23.8945714 C15.2855,23.7437143 15.1136364,23.4557143 15.1136364,23.1428571 L15.1136364,11.1428571 C15.1136364,10.83 15.2855,10.542 15.5618636,10.3911429 C15.8390909,10.2411429 16.1750455,10.2522857 16.4419091,10.4194286 L25.9419091,16.4194286 C26.1897727,16.5771429 26.3409091,16.8497143 26.3409091,17.1428571 C26.3409091,17.436 26.1897727,17.7085714 25.9410455,17.8662857 L16.4410455,23.8662857 C16.3002727,23.9545714 16.1387727,24 15.9772727,24 Z M16.8409091,12.7037143 L16.8409091,21.5811429 L23.8683182,17.1428571 L16.8409091,12.7037143 Z" id="Shape" fill="#B9BEC6"></path> <path d="M19.4318182,30 C12.2886818,30 6.47727273,24.2322857 6.47727273,17.1428571 C6.47727273,10.0534286 12.2886818,4.28571429 19.4318182,4.28571429 C26.5749545,4.28571429 32.3863636,10.0534286 32.3863636,17.1428571 C32.3863636,24.2322857 26.5749545,30 19.4318182,30 Z M19.4318182,6 C13.2412727,6 8.20454545,10.9988571 8.20454545,17.1428571 C8.20454545,23.2868571 13.2412727,28.2857143 19.4318182,28.2857143 C25.6223636,28.2857143 30.6590909,23.2868571 30.6590909,17.1428571 C30.6590909,10.9988571 25.6223636,6 19.4318182,6 Z" id="Shape" fill="#B9BEC6"></path> <polygon id="Shape" fill="#EBECEE" points="27.2045455 0.129428571 27.2045455 10.2857143 37.4377727 10.2857143"></polygon> </g> </g> </g> </svg> ':"audio/mp3"==t?'<svg width="38px" height="48px" viewBox="0 0 38 48" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> \x3c!-- Generator: Sketch 47 (45396) - http://www.bohemiancoding.com/sketch --\x3e <desc>Created with Sketch.</desc> <defs> <linearGradient x1="85.965183%" y1="80.2734935%" x2="4.97154453%" y2="50%" id="linearGradient-3"> <stop stop-color="#7B75ED" offset="0%"></stop> <stop stop-color="#483BAA" offset="100%"></stop> </linearGradient> </defs> <g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Icon-File/1" fill-rule="nonzero"> <g id="001-mp3"> <path d="M26.7597727,0 L1.69531818,0 C0.9975,0 0.431818182,0.561428571 0.431818182,1.65085714 L0.431818182,47.1428571 C0.431818182,47.4385714 0.9975,48 1.69531818,48 L36.3046818,48 C37.0025,48 37.5681818,47.4385714 37.5681818,47.1428571 L37.5681818,11.124 C37.5681818,10.5274286 37.4878636,10.3354286 37.3462273,10.194 L27.2969545,0.220285714 C27.1544545,0.0797142857 26.961,0 26.7597727,0 Z" id="Shape" fill="#FEFEFE"></path> <polygon id="Shape" fill-opacity="0.269276495" fill="#B9BEC6" points="27.2045455 0.129428571 27.2045455 10.2857143 37.4377727 10.2857143"></polygon> <path d="M36.3046818,48 L1.69531818,48 C0.9975,48 0.431818182,47.4385714 0.431818182,46.746 L0.431818182,33.4285714 L37.5681818,33.4285714 L37.5681818,46.746 C37.5681818,47.4385714 37.0025,48 36.3046818,48 Z" id="Shape" fill="url(#linearGradient-3)"></path> <path d="M25.6240909,12.8451429 C25.1344091,12.1628571 24.5013636,11.5225714 23.6308182,10.83 C20.2505455,8.14628571 19.5225,5.44971429 19.4318182,5.05457143 L19.4318182,4.28571429 C19.4318182,3.81171429 19.0457727,3.42857143 18.5681818,3.42857143 C18.0905909,3.42857143 17.7045455,3.81171429 17.7045455,4.28571429 L17.7045455,5.14285714 L17.7045455,12.3077143 L17.7045455,20.0674286 L14.5039091,20.0674286 C11.1512727,20.0674286 9.06818182,21.7482857 9.06818182,24.4534286 C9.06818182,27.4242857 11.0027273,29.3442857 13.9960909,29.3442857 C16.9937727,29.3442857 19.4318182,26.9245714 19.4318182,23.9494286 L19.4318182,14.1154286 L19.6891818,14.3237143 C19.9828182,14.6117143 20.4327727,14.9408571 21.0027727,15.3565714 C23.0046818,16.8214286 26.3573182,19.2711429 25.5144091,22.0362857 C25.4893636,22.1202857 25.4772727,22.2034286 25.4772727,22.2857143 C25.4772727,22.6542857 25.7173636,22.9937143 26.0904545,23.106 C26.1742273,23.1308571 26.258,23.1428571 26.3409091,23.1428571 C26.7122727,23.1428571 27.0542727,22.9045714 27.1674091,22.5342857 C28.5725455,17.9271429 26.8029545,14.4857143 25.6240909,12.8451429 Z M17.7045455,23.9494286 C17.7045455,25.9791429 16.0411818,27.63 13.9960909,27.63 C11.9622273,27.63 10.7954545,26.472 10.7954545,24.4534286 C10.7954545,22.2454286 12.8120455,21.7817143 14.5039091,21.7817143 L17.7045455,21.7817143 L17.7045455,23.9494286 Z M22.0270455,13.9782857 C21.5339091,13.6165714 21.1072727,13.3054286 20.843,13.0517143 L19.4318182,11.9031429 L19.4318182,8.92628571 C20.1460455,9.93257143 21.1478636,11.0545714 22.5512727,12.1688571 C23.2922727,12.7585714 23.8225455,13.29 24.2172273,13.8402857 C24.8355909,14.7 25.4530909,15.8451429 25.7614091,17.25 C24.6153636,15.87 23.0979545,14.7608571 22.0270455,13.9782857 Z" id="Shape" fill="#B9BEC6"></path> <g id="Group" transform="translate(6.909091, 36.000000)" fill="#FFFFFF"> <polygon id="Shape" points="7.25454545 0.792 8.69509091 0.792 8.69509091 9.42857143 7.25454545 9.42857143 7.25454545 3.48685714 5.30618182 8.29114286 4.05477273 8.29114286 2.09431818 3.48685714 2.09431818 9.42857143 0.653772727 9.42857143 0.653772727 0.792 2.09431818 0.792 4.68004545 6.69857143"></polygon> <path d="M12.2731364,9.42857143 L10.8559091,9.42857143 L10.8559091,0.792 L13.3587273,0.792 C13.7292273,0.792 14.0954091,0.850285714 14.4564091,0.967714286 C14.8174091,1.08514286 15.143,1.26085714 15.4305909,1.49485714 C15.7181818,1.72885714 15.9505,2.01257143 16.1275455,2.34428571 C16.3045909,2.676 16.3935455,3.04885714 16.3935455,3.46371429 C16.3935455,3.90171429 16.3184091,4.29771429 16.169,4.65342857 C16.0195909,5.00914286 15.8105909,5.30828571 15.5428636,5.55 C15.2751364,5.79171429 14.9521364,5.97942857 14.5747273,6.11228571 C14.1973182,6.24514286 13.7793182,6.31114286 13.3233182,6.31114286 L12.2722727,6.31114286 L12.2722727,9.42857143 L12.2731364,9.42857143 Z M12.2731364,1.85828571 L12.2731364,5.28 L13.5720455,5.28 C13.7447727,5.28 13.9157727,5.25085714 14.0859091,5.19171429 C14.2560455,5.13257143 14.4106364,5.03742857 14.5522727,4.90457143 C14.6939091,4.77171429 14.8079091,4.58657143 14.8942727,4.34828571 C14.9806364,4.11 15.0238182,3.81514286 15.0238182,3.46371429 C15.0238182,3.32314286 15.0048182,3.16028571 14.9650909,2.97771429 C14.9253636,2.79514286 14.8450455,2.61857143 14.7232727,2.45057143 C14.6015,2.28257143 14.4296364,2.142 14.2094091,2.02885714 C13.9891818,1.91571429 13.6972727,1.85914286 13.3354091,1.85914286 L12.2731364,1.85914286 L12.2731364,1.85828571 Z" id="Shape"></path> <path d="M21.2584091,4.88142857 C21.4397727,4.90457143 21.6263182,4.96371429 21.8189091,5.05714286 C22.0115,5.15057143 22.1911364,5.28428571 22.3560909,5.45571429 C22.5210455,5.62714286 22.6592273,5.83628571 22.7697727,6.08228571 C22.8803182,6.32828571 22.9347273,6.61114286 22.9347273,6.93171429 C22.9347273,7.32257143 22.8777273,7.66028571 22.7637273,7.94571429 C22.6497273,8.23114286 22.5055,8.46685714 22.3327727,8.65457143 C22.1600455,8.84228571 21.9648636,8.99314286 21.7480909,9.10542857 C21.5313182,9.21771429 21.3214545,9.30257143 21.1167727,9.35742857 C20.9120909,9.41228571 20.7255455,9.44657143 20.5562727,9.46285714 C20.387,9.47914286 20.2548636,9.486 20.1607273,9.486 C19.4991818,9.486 18.9784091,9.44057143 18.5958182,9.35142857 C18.2132273,9.26228571 17.9480909,9.16971429 17.7986818,9.07628571 L18.1173636,8.06828571 C18.1881818,8.10771429 18.2546818,8.15057143 18.3177273,8.19685714 C18.3807727,8.24314286 18.4714545,8.28857143 18.5889091,8.33142857 C18.7063636,8.37428571 18.8721818,8.40942857 19.0846364,8.43685714 C19.2970909,8.46428571 19.5881364,8.478 19.9586364,8.478 C20.5018636,8.478 20.9077727,8.33142857 21.1746364,8.03828571 C21.4415,7.74514286 21.5762273,7.37657143 21.5762273,6.93085714 C21.5762273,6.50914286 21.4535909,6.15342857 21.2100455,5.86457143 C20.9665,5.57571429 20.6080909,5.43085714 20.1356818,5.43085714 L18.9309091,5.43085714 L18.943,5.43085714 L18.9309091,4.482 L19.7340909,4.482 C19.9068182,4.482 20.0821364,4.47771429 20.2591818,4.47 C20.4362273,4.46228571 20.6029091,4.41857143 20.7609545,4.34142857 C20.919,4.26428571 21.0485455,4.13057143 21.1504545,3.94285714 C21.2523636,3.75514286 21.3041818,3.486 21.3041818,3.13457143 C21.3041818,2.994 21.2920909,2.84571429 21.2687727,2.68885714 C21.2454545,2.532 21.1798182,2.388 21.0735909,2.25514286 C20.9673636,2.12228571 20.8119091,2.01514286 20.6072273,1.93285714 C20.4025455,1.85057143 20.1192727,1.80942857 19.7574091,1.80942857 C19.3955455,1.80942857 19.1062273,1.84285714 18.8894545,1.90885714 C18.6726818,1.97485714 18.5103182,2.028 18.3997727,2.06742857 L17.9860909,1.01314286 C18.1752273,0.959142857 18.4092727,0.9 18.6882273,0.837428571 C18.9671818,0.774857143 19.3713636,0.744 19.8981818,0.744 C20.2686818,0.744 20.6184545,0.789428571 20.9492273,0.878571429 C21.28,0.967714286 21.5693182,1.11085714 21.8171818,1.30628571 C22.0650455,1.50171429 22.2619545,1.752 22.4079091,2.05628571 C22.5538636,2.36057143 22.6264091,2.71971429 22.6264091,3.13457143 C22.6264091,3.37628571 22.5832273,3.59742857 22.4968636,3.79628571 C22.4105,3.99514286 22.2999545,4.17 22.1660909,4.31742857 C22.0322273,4.46485714 21.8828182,4.58828571 21.717,4.68685714 C21.5511818,4.78542857 21.4000455,4.85057143 21.2584091,4.88142857 Z" id="Shape"></path> </g> </g> </g> </g> </svg> ':"application/vnd.ms-powerpoint"==t||"application/vnd.openxmlformats-officedocument.presentationml.presentation"==t?'<?xml version="1.0" encoding="iso-8859-1"?>\x3c!-- Generator: Adobe Illustrator 18.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"> <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"viewBox="0 0 56 56" style="enable-background:new 0 0 56 56;" xml:space="preserve"> <g> <path style="fill:#E9E9E0;" d="M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z"/> <polygon style="fill:#D9D7CA;" points="37.5,0.151 37.5,12 49.349,12 \t"/> <path style="fill:#F6712E;" d="M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z"/> <g> <path style="fill:#FFFFFF;" d="M17.581,53H15.94V42.924h2.898c0.428,0,0.852,0.068,1.271,0.205c0.419,0.137,0.795,0.342,1.128,0.615c0.333,0.273,0.602,0.604,0.807,0.991s0.308,0.822,0.308,1.306c0,0.511-0.087,0.973-0.26,1.388c-0.173,0.415-0.415,0.764-0.725,1.046c-0.31,0.282-0.684,0.501-1.121,0.656s-0.921,0.232-1.449,0.232h-1.217V53z M17.581,44.168v3.992h1.504c0.2,0,0.398-0.034,0.595-0.103c0.196-0.068,0.376-0.18,0.54-0.335s0.296-0.371,0.396-0.649c0.1-0.278,0.15-0.622,0.15-1.032c0-0.164-0.023-0.354-0.068-0.567c-0.046-0.214-0.139-0.419-0.28-0.615c-0.142-0.196-0.34-0.36-0.595-0.492c-0.255-0.132-0.593-0.198-1.012-0.198H17.581z"/> <path style="fill:#FFFFFF;" d="M25.853,53h-1.641V42.924h2.898c0.428,0,0.852,0.068,1.271,0.205c0.419,0.137,0.795,0.342,1.128,0.615c0.333,0.273,0.602,0.604,0.807,0.991s0.308,0.822,0.308,1.306c0,0.511-0.087,0.973-0.26,1.388c-0.173,0.415-0.415,0.764-0.725,1.046c-0.31,0.282-0.684,0.501-1.121,0.656s-0.921,0.232-1.449,0.232h-1.217V53z M25.853,44.168v3.992h1.504c0.2,0,0.398-0.034,0.595-0.103c0.196-0.068,0.376-0.18,0.54-0.335s0.296-0.371,0.396-0.649c0.1-0.278,0.15-0.622,0.15-1.032c0-0.164-0.023-0.354-0.068-0.567c-0.046-0.214-0.139-0.419-0.28-0.615c-0.142-0.196-0.34-0.36-0.595-0.492c-0.255-0.132-0.593-0.198-1.012-0.198H25.853z"/> <path style="fill:#FFFFFF;" d="M39.606,42.924v1.121h-3.008V53h-1.654v-8.955h-3.008v-1.121H39.606z"/> </g> <path style="fill:#C8BDB8;" d="M39.5,30h-24V14h24V30z M17.5,28h20V16h-20V28z"/> <path style="fill:#C8BDB8;" d="M20.499,35c-0.175,0-0.353-0.046-0.514-0.143c-0.474-0.284-0.627-0.898-0.343-1.372l3-5c0.284-0.474,0.898-0.627,1.372-0.343c0.474,0.284,0.627,0.898,0.343,1.372l-3,5C21.17,34.827,20.839,35,20.499,35z"/> <path style="fill:#C8BDB8;" d="M34.501,35c-0.34,0-0.671-0.173-0.858-0.485l-3-5c-0.284-0.474-0.131-1.088,0.343-1.372c0.474-0.283,1.088-0.131,1.372,0.343l3,5c0.284,0.474,0.131,1.088-0.343,1.372C34.854,34.954,34.676,35,34.501,35z"/> <path style="fill:#C8BDB8;" d="M27.5,16c-0.552,0-1-0.447-1-1v-3c0-0.553,0.448-1,1-1s1,0.447,1,1v3C28.5,15.553,28.052,16,27.5,16z"/> <rect x="17.5" y="16" style="fill:#D3CCC9;" width="20" height="12"/></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>':"application/pdf"==t?'<?xml version="1.0" encoding="iso-8859-1"?>\x3c!-- Generator: Adobe Illustrator 18.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"> <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"viewBox="0 0 56 56" style="enable-background:new 0 0 56 56;" xml:space="preserve"> <g> <path style="fill:#E9E9E0;" d="M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z"/> <polygon style="fill:#D9D7CA;" points="37.5,0.151 37.5,12 49.349,12 \t"/> <path style="fill:#CC4B4C;" d="M19.514,33.324L19.514,33.324c-0.348,0-0.682-0.113-0.967-0.326c-1.041-0.781-1.181-1.65-1.115-2.242c0.182-1.628,2.195-3.332,5.985-5.068c1.504-3.296,2.935-7.357,3.788-10.75c-0.998-2.172-1.968-4.99-1.261-6.643c0.248-0.579,0.557-1.023,1.134-1.215c0.228-0.076,0.804-0.172,1.016-0.172c0.504,0,0.947,0.649,1.261,1.049c0.295,0.376,0.964,1.173-0.373,6.802c1.348,2.784,3.258,5.62,5.088,7.562c1.311-0.237,2.439-0.358,3.358-0.358c1.566,0,2.515,0.365,2.902,1.117c0.32,0.622,0.189,1.349-0.39,2.16c-0.557,0.779-1.325,1.191-2.22,1.191c-1.216,0-2.632-0.768-4.211-2.285c-2.837,0.593-6.15,1.651-8.828,2.822c-0.836,1.774-1.637,3.203-2.383,4.251C21.273,32.654,20.389,33.324,19.514,33.324z M22.176,28.198c-2.137,1.201-3.008,2.188-3.071,2.744c-0.01,0.092-0.037,0.334,0.431,0.692C19.685,31.587,20.555,31.19,22.176,28.198zM35.813,23.756c0.815,0.627,1.014,0.944,1.547,0.944c0.234,0,0.901-0.01,1.21-0.441c0.149-0.209,0.207-0.343,0.23-0.415c-0.123-0.065-0.286-0.197-1.175-0.197C37.12,23.648,36.485,23.67,35.813,23.756z M28.343,17.174c-0.715,2.474-1.659,5.145-2.674,7.564c2.09-0.811,4.362-1.519,6.496-2.02C30.815,21.15,29.466,19.192,28.343,17.174zM27.736,8.712c-0.098,0.033-1.33,1.757,0.096,3.216C28.781,9.813,27.779,8.698,27.736,8.712z"/> <path style="fill:#CC4B4C;" d="M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z"/> <g> <path style="fill:#FFFFFF;" d="M17.385,53h-1.641V42.924h2.898c0.428,0,0.852,0.068,1.271,0.205c0.419,0.137,0.795,0.342,1.128,0.615c0.333,0.273,0.602,0.604,0.807,0.991s0.308,0.822,0.308,1.306c0,0.511-0.087,0.973-0.26,1.388c-0.173,0.415-0.415,0.764-0.725,1.046c-0.31,0.282-0.684,0.501-1.121,0.656s-0.921,0.232-1.449,0.232h-1.217V53z M17.385,44.168v3.992h1.504c0.2,0,0.398-0.034,0.595-0.103c0.196-0.068,0.376-0.18,0.54-0.335c0.164-0.155,0.296-0.371,0.396-0.649c0.1-0.278,0.15-0.622,0.15-1.032c0-0.164-0.023-0.354-0.068-0.567c-0.046-0.214-0.139-0.419-0.28-0.615c-0.142-0.196-0.34-0.36-0.595-0.492c-0.255-0.132-0.593-0.198-1.012-0.198H17.385z"/> <path style="fill:#FFFFFF;" d="M32.219,47.682c0,0.829-0.089,1.538-0.267,2.126s-0.403,1.08-0.677,1.477s-0.581,0.709-0.923,0.937s-0.672,0.398-0.991,0.513c-0.319,0.114-0.611,0.187-0.875,0.219C28.222,52.984,28.026,53,27.898,53h-3.814V42.924h3.035c0.848,0,1.593,0.135,2.235,0.403s1.176,0.627,1.6,1.073s0.74,0.955,0.95,1.524C32.114,46.494,32.219,47.08,32.219,47.682zM27.352,51.797c1.112,0,1.914-0.355,2.406-1.066s0.738-1.741,0.738-3.09c0-0.419-0.05-0.834-0.15-1.244c-0.101-0.41-0.294-0.781-0.581-1.114s-0.677-0.602-1.169-0.807s-1.13-0.308-1.914-0.308h-0.957v7.629H27.352z"/> <path style="fill:#FFFFFF;" d="M36.266,44.168v3.172h4.211v1.121h-4.211V53h-1.668V42.924H40.9v1.244H36.266z"/> </g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg> ':'<svg width="38px" height="48px" viewBox="0 0 38 48" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> \x3c!-- Generator: Sketch 47 (45396) - http://www.bohemiancoding.com/sketch --\x3e <desc>Created with Sketch.</desc> <defs> <linearGradient x1="85.965183%" y1="80.2734935%" x2="4.97154453%" y2="50%" id="linearGradient-4"> <stop stop-color="#2E4BE5" offset="0%"></stop> <stop stop-color="#5DA9FF" offset="100%"></stop> </linearGradient> </defs> <g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Icon-File/3" fill-rule="nonzero"> <g id="012-doc"> <path d="M26.7597727,0 L1.69531818,0 C0.9975,0 0.431818182,0.561428571 0.431818182,1.65085714 L0.431818182,47.1428571 C0.431818182,47.4385714 0.9975,48 1.69531818,48 L36.3046818,48 C37.0025,48 37.5681818,47.4385714 37.5681818,47.1428571 L37.5681818,11.124 C37.5681818,10.5274286 37.4878636,10.3354286 37.3462273,10.194 L27.2969545,0.220285714 C27.1544545,0.0797142857 26.961,0 26.7597727,0 Z" id="Shape" fill="#FFFFFF"></path> <polygon id="Shape" fill="#EBECEE" points="27.2045455 0.129428571 27.2045455 10.2857143 37.4377727 10.2857143"></polygon> <path d="M10.7954545,11.1428571 L5.61363636,11.1428571 C5.13690909,11.1428571 4.75,10.7588571 4.75,10.2857143 C4.75,9.81257143 5.13690909,9.42857143 5.61363636,9.42857143 L10.7954545,9.42857143 C11.2721818,9.42857143 11.6590909,9.81257143 11.6590909,10.2857143 C11.6590909,10.7588571 11.2721818,11.1428571 10.7954545,11.1428571 Z" id="Shape" fill="url(#linearGradient-4)"></path> <path d="M13.3863636,15.4285714 L5.61363636,15.4285714 C5.13690909,15.4285714 4.75,15.0445714 4.75,14.5714286 C4.75,14.0982857 5.13690909,13.7142857 5.61363636,13.7142857 L13.3863636,13.7142857 C13.8630909,13.7142857 14.25,14.0982857 14.25,14.5714286 C14.25,15.0445714 13.8630909,15.4285714 13.3863636,15.4285714 Z" id="Shape" fill="url(#linearGradient-4)"></path> <path d="M16.8409091,15.4285714 C16.6163636,15.4285714 16.3918182,15.3342857 16.2277273,15.18 C16.0722727,15.0171429 15.9772727,14.7942857 15.9772727,14.5714286 C15.9772727,14.3485714 16.0722727,14.1257143 16.2277273,13.9628571 C16.5472727,13.6457143 17.1345455,13.6457143 17.4540909,13.9628571 C17.6095455,14.1257143 17.7045455,14.3485714 17.7045455,14.5714286 C17.7045455,14.7942857 17.6095455,15.0171429 17.4540909,15.18 C17.29,15.3342857 17.0654545,15.4285714 16.8409091,15.4285714 Z" id="Shape" fill="url(#linearGradient-4)"></path> <path d="M27.2045455,15.4285714 L20.2954545,15.4285714 C19.8187273,15.4285714 19.4318182,15.0445714 19.4318182,14.5714286 C19.4318182,14.0982857 19.8187273,13.7142857 20.2954545,13.7142857 L27.2045455,13.7142857 C27.6812727,13.7142857 28.0681818,14.0982857 28.0681818,14.5714286 C28.0681818,15.0445714 27.6812727,15.4285714 27.2045455,15.4285714 Z" id="Shape" fill="url(#linearGradient-4)"></path> <path d="M5.61363636,28.2857143 C5.38909091,28.2857143 5.16454545,28.1914286 5.00045455,28.0371429 C4.845,27.8742857 4.75,27.6514286 4.75,27.4285714 C4.75,27.2057143 4.845,26.9828571 5.00045455,26.82 C5.32,26.5028571 5.90727273,26.5028571 6.22681818,26.82 C6.38227273,26.9828571 6.47727273,27.1971429 6.47727273,27.4285714 C6.47727273,27.6514286 6.38227273,27.8742857 6.22681818,28.0371429 C6.06272727,28.1914286 5.83818182,28.2857143 5.61363636,28.2857143 Z" id="Shape" fill="url(#linearGradient-4)"></path> <path d="M15.9772727,28.2857143 L9.06818182,28.2857143 C8.59145455,28.2857143 8.20454545,27.9017143 8.20454545,27.4285714 C8.20454545,26.9554286 8.59145455,26.5714286 9.06818182,26.5714286 L15.9772727,26.5714286 C16.454,26.5714286 16.8409091,26.9554286 16.8409091,27.4285714 C16.8409091,27.9017143 16.454,28.2857143 15.9772727,28.2857143 Z" id="Shape" fill="url(#linearGradient-4)"></path> <path d="M32.3863636,15.4285714 L30.6590909,15.4285714 C30.1823636,15.4285714 29.7954545,15.0445714 29.7954545,14.5714286 C29.7954545,14.0982857 30.1823636,13.7142857 30.6590909,13.7142857 L32.3863636,13.7142857 C32.8630909,13.7142857 33.25,14.0982857 33.25,14.5714286 C33.25,15.0445714 32.8630909,15.4285714 32.3863636,15.4285714 Z" id="Shape" fill="url(#linearGradient-4)"></path> <path d="M24.6136364,19.7142857 L5.61363636,19.7142857 C5.13690909,19.7142857 4.75,19.3302857 4.75,18.8571429 C4.75,18.384 5.13690909,18 5.61363636,18 L24.6136364,18 C25.0903636,18 25.4772727,18.384 25.4772727,18.8571429 C25.4772727,19.3302857 25.0903636,19.7142857 24.6136364,19.7142857 Z" id="Shape" fill="url(#linearGradient-4)"></path> <path d="M32.3863636,19.7142857 L27.2045455,19.7142857 C26.7278182,19.7142857 26.3409091,19.3302857 26.3409091,18.8571429 C26.3409091,18.384 26.7278182,18 27.2045455,18 L32.3863636,18 C32.8630909,18 33.25,18.384 33.25,18.8571429 C33.25,19.3302857 32.8630909,19.7142857 32.3863636,19.7142857 Z" id="Shape" fill="url(#linearGradient-4)"></path> <path d="M9.06818182,24 L5.61363636,24 C5.13690909,24 4.75,23.616 4.75,23.1428571 C4.75,22.6697143 5.13690909,22.2857143 5.61363636,22.2857143 L9.06818182,22.2857143 C9.54490909,22.2857143 9.93181818,22.6697143 9.93181818,23.1428571 C9.93181818,23.616 9.54490909,24 9.06818182,24 Z" id="Shape" fill="url(#linearGradient-4)"></path> <path d="M21.1590909,24 L12.5227273,24 C12.046,24 11.6590909,23.616 11.6590909,23.1428571 C11.6590909,22.6697143 12.046,22.2857143 12.5227273,22.2857143 L21.1590909,22.2857143 C21.6358182,22.2857143 22.0227273,22.6697143 22.0227273,23.1428571 C22.0227273,23.616 21.6358182,24 21.1590909,24 Z" id="Shape" fill="url(#linearGradient-4)"></path> <path d="M32.3863636,24 L24.6136364,24 C24.1369091,24 23.75,23.616 23.75,23.1428571 C23.75,22.6697143 24.1369091,22.2857143 24.6136364,22.2857143 L32.3863636,22.2857143 C32.8630909,22.2857143 33.25,22.6697143 33.25,23.1428571 C33.25,23.616 32.8630909,24 32.3863636,24 Z" id="Shape" fill="url(#linearGradient-4)"></path> <path d="M36.3046818,48 L1.69531818,48 C0.9975,48 0.431818182,47.4385714 0.431818182,46.746 L0.431818182,33.4285714 L37.5681818,33.4285714 L37.5681818,46.746 C37.5681818,47.4385714 37.0025,48 36.3046818,48 Z" id="Shape" fill="url(#linearGradient-4)"></path> <g id="Group" transform="translate(7.772727, 36.000000)" fill="#FFFFFF"> <path d="M7.34090909,4.87028571 C7.34090909,5.58085714 7.26404545,6.18857143 7.11031818,6.69257143 C6.95659091,7.19657143 6.76227273,7.61828571 6.52563636,7.95857143 C6.289,8.29885714 6.02386364,8.56628571 5.7285,8.76171429 C5.43313636,8.95714286 5.14813636,9.10285714 4.87263636,9.20142857 C4.59713636,9.29914286 4.34495455,9.36171429 4.11695455,9.38914286 C3.88895455,9.41485714 3.71968182,9.42857143 3.61,9.42857143 L0.316090909,9.42857143 L0.316090909,0.792 L2.93636364,0.792 C3.66872727,0.792 4.31213636,0.907714286 4.86659091,1.13742857 C5.42104545,1.36714286 5.88222727,1.67485714 6.24840909,2.05714286 C6.61459091,2.43942857 6.8875,2.87571429 7.06886364,3.36342857 C7.25022727,3.852 7.34090909,4.35428571 7.34090909,4.87028571 Z M3.13759091,8.39742857 C4.09795455,8.39742857 4.79059091,8.09314286 5.2155,7.48371429 C5.64040909,6.87428571 5.85286364,5.99142857 5.85286364,4.83514286 C5.85286364,4.476 5.80968182,4.12028571 5.72331818,3.76885714 C5.63609091,3.41742857 5.46940909,3.09942857 5.22154545,2.814 C4.97368182,2.52857143 4.63686364,2.298 4.21195455,2.12228571 C3.78704545,1.94657143 3.23604545,1.85828571 2.55895455,1.85828571 L1.73245455,1.85828571 L1.73245455,8.39742857 L3.13759091,8.39742857 L3.13759091,8.39742857 Z" id="Shape"></path> <path d="M15.9556818,5.06914286 C15.9556818,5.796 15.8632727,6.43628571 15.6784545,6.99085714 C15.4936364,7.54542857 15.2371364,8.00657143 14.9106818,8.37342857 C14.5842273,8.74114286 14.2025,9.018 13.7655,9.20571429 C13.3285,9.39342857 12.8500455,9.48685714 12.331,9.48685714 C11.8119545,9.48685714 11.3335,9.39342857 10.8965,9.20571429 C10.4595,9.018 10.0777727,8.74114286 9.75131818,8.37342857 C9.42486364,8.00571429 9.16836364,7.54542857 8.98354545,6.99085714 C8.79872727,6.43628571 8.70631818,5.79514286 8.70631818,5.06914286 C8.70631818,4.34314286 8.79872727,3.70371429 8.98354545,3.15342857 C9.16836364,2.60228571 9.424,2.14371429 9.75131818,1.77685714 C10.0777727,1.40914286 10.4595,1.13057143 10.8965,0.938571429 C11.3335,0.746571429 11.8119545,0.651428571 12.331,0.651428571 C12.8500455,0.651428571 13.3285,0.746571429 13.7655,0.938571429 C14.2025,1.13057143 14.5842273,1.40914286 14.9106818,1.77685714 C15.2371364,2.14457143 15.4927727,2.60314286 15.6784545,3.15342857 C15.8624091,3.70371429 15.9556818,4.34228571 15.9556818,5.06914286 Z M12.2947273,8.33914286 C12.5857727,8.33914286 12.863,8.28257143 13.1272727,8.16942857 C13.3906818,8.05628571 13.6273182,7.87028571 13.8354545,7.61314286 C14.0435909,7.35514286 14.2076818,7.01742857 14.3251364,6.59914286 C14.4425909,6.18085714 14.5056364,5.67171429 14.5142727,5.07 C14.5065,4.48371429 14.4451818,3.98571429 14.3311818,3.576 C14.2171818,3.16542857 14.06,2.82771429 13.8587727,2.562 C13.6575455,2.29628571 13.4295455,2.10514286 13.1739091,1.98771429 C12.9182727,1.87028571 12.6488182,1.812 12.3646818,1.812 C12.0736364,1.812 11.7955455,1.866 11.5321364,1.97571429 C11.2678636,2.08542857 11.0320909,2.27057143 10.8239545,2.532 C10.6149545,2.79428571 10.4517273,3.13114286 10.3342727,3.546 C10.2168182,3.96085714 10.1529091,4.46742857 10.1451364,5.06914286 C10.1529091,5.65542857 10.2142273,6.15514286 10.3282273,6.56914286 C10.4422273,6.98314286 10.5994091,7.32085714 10.8006364,7.58314286 C11.0018636,7.84542857 11.2298636,8.03571429 11.4855,8.15742857 C11.742,8.27828571 12.0114545,8.33914286 12.2947273,8.33914286 Z" id="Shape"></path> <path d="M23.8424091,8.55 C23.5194091,8.862 23.1532273,9.09685714 22.7447273,9.25285714 C22.3353636,9.40971429 21.8949091,9.48685714 21.4225,9.48685714 C20.9025909,9.48685714 20.425,9.39342857 19.988,9.20571429 C19.551,9.018 19.1692727,8.74114286 18.8428182,8.37342857 C18.5163636,8.00571429 18.2598636,7.54542857 18.0750455,6.99085714 C17.8902273,6.43628571 17.7978182,5.79514286 17.7978182,5.06914286 C17.7978182,4.34314286 17.8902273,3.70371429 18.0750455,3.15342857 C18.2598636,2.60228571 18.5155,2.14371429 18.8428182,1.77685714 C19.1692727,1.40914286 19.5527273,1.13057143 19.9940455,0.938571429 C20.4345,0.746571429 20.9112273,0.651428571 21.4225,0.651428571 C21.8949091,0.651428571 22.3353636,0.729428571 22.7447273,0.885428571 C23.1540909,1.04228571 23.5194091,1.27628571 23.8424091,1.58828571 L22.8621818,2.45571429 C22.6652727,2.22857143 22.4467727,2.06485714 22.2066818,1.96371429 C21.9665909,1.86257143 21.717,1.81114286 21.4570455,1.81114286 C21.166,1.81114286 20.8879091,1.86514286 20.6245,1.97485714 C20.3602273,2.08457143 20.1244545,2.26971429 19.9163182,2.53114286 C19.7073182,2.79342857 19.5440909,3.13028571 19.4266364,3.54514286 C19.3091818,3.96 19.2452727,4.46657143 19.2375,5.06828571 C19.2452727,5.65457143 19.3065909,6.15428571 19.4205909,6.56828571 C19.5345909,6.98228571 19.6917727,7.32 19.893,7.58228571 C20.0942273,7.84457143 20.3222273,8.03485714 20.5778636,8.15657143 C20.8335,8.27828571 21.1029545,8.33828571 21.3870909,8.33828571 C21.6712273,8.33828571 21.9363636,8.28685714 22.1842273,8.18571429 C22.4320909,8.08457143 22.6583636,7.92 22.8630455,7.69371429 L23.8424091,8.55 Z" id="Shape"></path> </g> </g> </g> </g> </svg>',o+='</span> </div> <div class="convertfox-messanger-message-photo-text"> <h4> '+s+"</h4> ",void 0!=n&&null!=n&&(o+="<p>"+bytesToSize(n)+"</p> "),o+="</div> </div>"}function fillEmailField(e){("getEmail"!=e&&""!=e&&void 0!=e||""!=cfUserEmail&&void 0!=cfUserEmail)&&($("#cfChatEmail").val(cfUserEmail),$("#cfChatEmail").prop("disabled","disabled"),$("#cfChatEmail").css("cursor","not-allowed"),$("#cfSendEmailForm").html(tickSvg()))}function qualificationBot(e,a){var t=JSON.parse(e[a].message_content),s=t.name,n=t.name,o=t.type,r=t.value,i='<input type="text" data-type="text" class="convertfox-messenger-message-text-input" id="'+s+'">',c='<button type="button" class="convertfox-messanger-message-qualification-send" id="cfSend-'+s+'" onclick="qualificationDataIdentify(\''+s+"','"+cfUserEmail+"')\">"+paperPlaneSvg()+"</button>";return"date"===o.toLowerCase()&&(n+=" (DD/MM/YYYY)",""!==r&&(r=moment.unix(r).format("DD/MM/YYYY"))),""!==r&&(i='<input type="text" data-type="'+o+'" class="convertfox-messenger-message-text-input" id="'+s+'" value="'+r+'" disabled style="cursor: not-allowed">',c='<button type="button" class="convertfox-messanger-message-qualification-send" id="cfSend-'+s+'">'+tickSvg()+"</button>"),'<div class="convertfox-messanger-content '+s+'"><div class="convertfox-messanger-chat-message"><div class="convertfox-messanger-chat-message-body"><div class="convertfox-messanger-message-bubble" style="width:100%"><p class="convertfox-messanger-qualification-title">'+n.split("_").join(" ")+'</p><div class="convertfox-messanger-message-qualification-form">'+i+c+"</div></div></div></div></div>"}function botText(e,a){
return'<div class="convertfox-messanger-content"><div class="convertfox-messanger-chat-message"><div class="convertfox-messanger-chat-message-body"><div class="convertfox-messanger-message-bubble"><p>'+e[a].message_content+"</p></div></div></div></div>"}function cfGetAllChatMessages(e){activeAgentImagesLoaded||activateRecentAgentsImages();var a=randomId,t=cfCurrentConversationId;if(e){var s=document.getElementById("convertfox-messanger-messages").firstChild,n=s.id,o=$(".convertfox-messanger-messages").get(0).scrollHeight;""==(parseInt(n)||"")&&(n=s.getAttribute("data-email-content-message-id"))}else"none"!=$("#chat-conversation-area").css("display")&&$(".cf-loading-full-page").show();var r={person_random_id:a,conversation_identifier:t};void 0!=n&&(r.id=n),$.ajax({method:"GET",url:serverProtocol+cfSubdomain+serverDomain+"/get_messages",data:r,type:"JSON"}).done(function(a){activeAgentImagesLoaded||activateRecentAgentsImages(),cfUpdateOverallUnreadCount(totalUnreadMessageCount),getEmailBoxShownInCurrCon=a.data.get_email_message;var t=[];if(void 0!=a.data.popped_qualification_bots&&0!=a.data.popped_qualification_bots.length)for(var s=0;s<a.data.popped_qualification_bots.length;s++)t.push(JSON.parse(a.data.popped_qualification_bots[s]).name);qualificationSettings=qualificationSettings.filter(function(e){return-1===t.indexOf(e.name)});var n="";$(".cf-loading-full-page").hide(),removingLoadMoreSpinner();var r=a.data.messages;if("bot"===a.data.conversation_type?(isBotPresent=!0,isBotConversation=!0):($("#conversationChatArea").attr("placeholder",translateWriteReply),isBotPresent=!1,isBotConversation=!1),handleTypingArea(isBotEmailPresent),meetingInitiatedIndex=-1,!isFoundMeetingInitiated)for(var i=0;i<r.length;i++)"meeting_scheduler"==r[i].message_type&&"initiated"===r[i].meeting_status&&(isFoundMeetingInitiated=!0,meetingInitiatedIndex=i);for(var i=0;i<r.length;i++){var c=!1;if("meeting_scheduler"==r[i].message_type)c=!0,0==$("#"+r[i].id).length&&("initiated"===r[i].meeting_status?(d='<div class="convertfox-messanger-content" id="'+r[i].id+'" data-chat-message-status="'+r[i].status+'"></div>',$(".convertfox-messanger-messages").append(d),d=getMeetingDetail(r[i],meetingInitiatedIndex===i)):["scheduled","cancelled","rescheduled"].includes(r[i].meeting_status)&&addingMeetingStatus(r[i]));else{if("triggered_message"==r[i].message_type)var l=convertTextToEmoji($.trim(r[i].message_content),!0);else var l=convertTextToEmoji($.trim(r[i].message_content),!1);var d="";if(void 0==r[i].user||null==r[i].user)if(["getEmail","assignment_rule","qualification_property","bot_text","qualification_bot","lead_bot_greeting","lead_bot_question","lead_bot_response","lead_bot_goal_message","lead_bot_attribute_mapping"].includes(r[i].message_type))"getEmail"==r[i].message_type?(n=r[i].id,d=addEmailFormToMessageArea(r[i].id)):["bot_text"].includes(r[i].message_type)?d=botText(r,i):["qualification_bot"].includes(r[i].message_type)?d=qualificationBot(r,i):["lead_bot_greeting","lead_bot_question","lead_bot_response","lead_bot_goal_message"].includes(r[i].message_type)&&(d=addingLeadBotMessageBubble(r[i].message_type,r[i],r[i].id,r.length-1===i));else{r[i].id;d='<div class="convertfox-messanger-content" id="'+r[i].id+'" data-chat-message-status="'+r[i].status+'"> <div class="convertfox-messanger-chat-message primary"> <div class="convertfox-messanger-chat-message-body"> ',void 0!=r[i].deleted_at&&null!=r[i].deleted_at?d+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-emojis deleted-message">'+l+"</div>":r[i].is_attachment?null!=r[i].file_type&&("image"==r[i].file_type.split("/")[0]?(d+='<div  class="convertfox-messanger-message-bubble add-linkify-tag show-attachment-file" onclick="downloadFileAttachment(this)"><div class="convertfox-messanger-message-photo-upload"> <div class="convertfox-messanger-message-photo-icon"> <span class="photo"><img id="chat-message-image-'+r[i].id+'" src="'+r[i].message_content+'"></span> </div> <div class="convertfox-messanger-message-photo-text"> <h4>'+r[i].file_name+"</h4> ",void 0!=r[i].file_size&&null!=r[i].file_size&&(d+="<p>"+bytesToSize(r[i].file_size)+"</p> "),d+="</div> </div></div> "):d+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-emojis">'+createUploadedFileHtml(r[i].message_content,r[i].id,r[i].file_type,r[i].file_name,r[i].file_size)+"</div>"):void 0!=r[i].is_gif&&r[i].is_gif?d+='<div class="convertfox-messanger-message-bubble show-gif"><a href="'+l+'" target="_blank"><img src="'+l+'"></a></div>':1==l.split(" ").length&&l.length<=2&&checkSingleEmojiText(l)?d+='<div  class="convertfox-messanger-message-bubble add-linkify-tag show-single-emoji">'+l+"</div>":d+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-emojis">'+l+"</div>","seen"==r[i].status||"responded"==r[i].status?($(".cf-seen-status").each(function(){$(this).remove()}),d+='<div class="message-status convertfox-messenger-tooltip" data-tooltip="'+moment(r[i].created_at).format("Do MMM YYYY, hh:mm A")+'" id="cf-status-'+r[i].id+'"> ',void 0!=r[i].is_gif&&r[i].is_gif&&(d+='<span class="is-gif-status">Via Tenor</span> '),d+='<span><time class="timestamp" data-livestamp="'+r[i].created_at+'" value="'+r[i].created_at+'">'+moment(r[i].created_at).fromNow()+'</time></span> <span class="cf-seen-status">'+messageStatus(r[i].status)+"</span> </div> </div> </div> </div>"):"sent"==r[i].status?($(".cf-sent-status").each(function(){$(this).remove()}),d+='<div class="message-status convertfox-messenger-tooltip" data-tooltip="'+moment(r[i].created_at).format("Do MMM YYYY, hh:mm A")+'"  id="cf-status-'+r[i].id+'">',void 0!=r[i].is_gif&&r[i].is_gif&&(d+='<span class="is-gif-status">Via Tenor</span> '),d+=' <span><time class="timestamp" data-livestamp="'+r[i].created_at+'" value="'+r[i].created_at+'">'+moment(r[i].created_at).fromNow()+'</time></span> <span class="cf-sent-status">'+messageStatus(r[i].status)+"</span> </div> </div> </div> </div>"):"delivered"==r[i].status&&($(".cf-delivered-status").each(function(){$(this).remove()}),d+='<div class="message-status convertfox-messenger-tooltip" data-tooltip="'+moment(r[i].created_at).format("Do MMM YYYY, hh:mm A")+'"  id="cf-status-'+r[i].id+'"> ',void 0!=r[i].is_gif&&r[i].is_gif&&(d+='<span class="is-gif-status">Via Tenor</span> '),d+=' <span><time class="timestamp" data-livestamp="'+r[i].created_at+'" value="'+r[i].created_at+'">'+moment(r[i].created_at).fromNow()+'</time></span> <span class="cf-delivered-status">'+messageStatus(r[i].status)+"</span> </div> </div> </div> </div>"),"lead_bot_user_response"!==r[i].message_type&&(isUserInitiatedChat=!0)}else{r[i].id;d='<div class="convertfox-messanger-content" id="'+r[i].id+'" data-chat-message-status="'+r[i].status+'"> <div class="convertfox-messanger-chat-message"> <div class="convertfox-messanger-message-avatar">'+cfGetProfileImage(r[i].user,"lg")+'</div> <div class="convertfox-messanger-chat-message-body"> ',d+='<div class="message-name"> <span>'+escapeHtml(r[i].user.full_name)+"</span></div>",void 0!=r[i].deleted_at&&null!=r[i].deleted_at?d+=' <div class="convertfox-messanger-message-bubble add-linkify-tag show-emojis deleted-message">'+l+"</div> ":r[i].is_attachment?null!=r[i].file_type&&("image"==r[i].file_type.split("/")[0]?(d+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-attachment-file" onclick="downloadFileAttachment(this)"><div class="convertfox-messanger-message-photo-upload"> <div class="convertfox-messanger-message-photo-icon"> <span class="photo"><img id="chat-message-image-'+r[i].id+'" src="'+r[i].message_content+'"></span> </div> <div class="convertfox-messanger-message-photo-text"> <h4>'+r[i].file_name+"</h4> ",void 0!=r[i].file_size&&null!=r[i].file_size&&(d+="<p>"+bytesToSize(r[i].file_size)+"</p> "),d+="</div> </div></div>"):d+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-emojis">'+createUploadedFileHtml(r[i].message_content,r[i].id,r[i].file_type,r[i].file_name,r[i].file_size)+"</div>"):void 0!=r[i].is_gif&&r[i].is_gif?d+='<div class="convertfox-messanger-message-bubble show-gif"><a href="'+l+'" target="_blank"><img src="'+l+'"></a></div>':1==l.split(" ").length&&l.length<=2&&checkSingleEmojiText(l)?d+=' <div class="convertfox-messanger-message-bubble add-linkify-tag show-single-emoji">'+l+"</div> ":d+=' <div class="convertfox-messanger-message-bubble add-linkify-tag show-emojis">'+l+"</div> ",d+='<div class="message-status convertfox-messenger-tooltip" data-tooltip="'+moment(r[i].created_at).format("Do MMM YYYY, hh:mm A")+'"> <span><time class="timestamp" data-livestamp="'+r[i].created_at+'" value="'+r[i].created_at+'">'+moment(r[i].created_at).fromNow()+"</time></span> ",void 0!=r[i].is_gif&&r[i].is_gif&&(d+='<span class="is-gif-status"> Via Tenor</span> '),d+="</div> </div> </div> </div>"}}c||(e?void 0!=r[i].user&&null!=r[i].user||!["getEmail"].includes(r[i].message_type)?["bot_text","qualification_bot"].includes(r[i].message_type)?$(".convertfox-messanger-messages").prepend(d):0==$("#"+r[i].id).length&&$(".convertfox-messanger-messages").prepend(d):0==$(".convertfox-messanger-messages #email-submit-bubble").length&&($(".convertfox-messanger-messages").prepend(d),fillEmailField(r[i].message_content)):void 0!=r[i].user&&null!=r[i].user||!["getEmail"].includes(r[i].message_type)?["bot_text","qualification_bot"].includes(r[i].message_type)?$(".convertfox-messanger-messages").append(d):0==$("#"+r[i].id).length&&$(".convertfox-messanger-messages").append(d):0==$(".convertfox-messanger-messages #email-submit-bubble").length&&($(".convertfox-messanger-messages").append(d),fillEmailField(r[i].message_content)),showDownloadButton(".show-attachment-file img#chat-message-image-"+r[i].id)),"lead_bot_user_response"===r[i].message_type&&($(".cf-seen-status").remove(),$(".cf-sent-status").remove(),$(".cf-delivered-status").remove())}if($(".add-linkify-tag").linkify({target:"_blank"}),e){var m=$(".convertfox-messanger-messages").get(0).scrollHeight,g=m-o;document.getElementById("convertfox-messanger-messages").scrollTop=g}else{if(null!=a.data.deleted){var v='<div class="delete-conversation-message"><p>'+translateNoLogerActive+"</p><span>Please start a new conversation if required.</span></div>";disableConversationChatArea(),$(".convertfox-messanger-messages").append(v)}else userBlocked||enableConversationChatArea();userBlocked&&disableConversationChatArea(),null!=a.data.deleted||userBlocked||$("#conversationChatArea").val(chatAreaValue),cfScrollChatAreaToBottom(0),cfMessageSeen()}showEmailChatBox(n),changeTextColor()}).error(function(e){$(".cf-cf-loading-full-page").hide(),removingLoadMoreSpinner()})}function showPage(){$(function(){$(".convertfox-messanger-bubble").addClass("is-animating")}),$(".convertfox-messanger-open-icon").on("transitionend MSTransitionEnd webkitTransitionEnd oTransitionEnd",function(){$(".convertfox-messanger-bubble").addClass("is-loaded").removeClass("is-animating")})}function timeoutFunction(){typing=!1;var e={room:applicationId,conversation_identifier:cfCurrentConversationId};socket.emit("typing_stopped",e)}function typingStatusStoped(){typing=!1;var e={room:applicationId,conversation_identifier:cfCurrentConversationId};socket.emit("typing_stopped",e)}function addCurrentConversationMessages(e){if($(".convertfox-messanger-emoji-select, .convertfox-messanger-gif-select").removeClass("is-open"),isBotConversation&&isBotPresent){""!=$.trim($("#conversationChatArea").val())&&(handleTypingArea(),$("#conversationChatArea").blur(),sendQuestionResponse($("#conversationChatArea"),!0))}else{if("outside"==e)var a=$.trim($("#chatArea").val());else if("inside"==e)var a=$.trim($("#conversationChatArea").val());timeoutFunction();var t=$(".convertfox-messanger-chat-header-avatar img").attr("src"),s=$(".convertfox-messanger-chat-header-text .convertfox-messanger-chat-title:first").text(),n=$(".convertfox-messanger-chat-header-avatar .cf-profile-avatar").css("background-color"),o=generateChatRandomId();" "!=cfCurrentConversationId&&""!=cfCurrentConversationId||(cfCurrentConversationId=cfRandomIdGenerate(applicationId),parent.postMessage({funName:"setChatOpenAndOpenConversationStatus",params:{openStatus:"true",openConversationId:cfCurrentConversationId,lastActiveAgentImage:t,lastActiveAgentName:s,lastActiveAgentBackground:n}},"*"));var r={person_random_id:randomId,conversation_identifier:cfCurrentConversationId,message_content:a,message_temp_id:o,request_from_url:document.referrer,page_title:parentPageTitle,project_secret_key:applicationId},i=convertTextToEmoji(a,!1);$(".cf-sent-status").each(function(){$(this).remove()});var c='<div class="convertfox-messanger-content" id="'+o+'"> <div class="convertfox-messanger-chat-message primary"> <div class="convertfox-messanger-chat-message-body"> ';1==i.split(" ").length&&i.length<=2&&checkSingleEmojiText(i)?c+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-single-emoji">'+i+"</div> ":c+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-emojis">'+i+"</div>",c+='<div class="message-status convertfox-messenger-tooltip" data-tooltip="'+moment().format("Do MMM YYYY, hh:mm A")+'" id="cf-status-'+o+'"> <span>'+translateJustNow+"</span> </div></div> </div> </div>",$(".convertfox-messanger-messages").append(c),$(".add-linkify-tag").linkify({target:"_blank"}),changeTextColor(),$("#chatArea").val(""),$("#conversationChatArea").val(""),$(".convertfox-messanger-messages").animate({scrollTop:$(".convertfox-messanger-messages").get(0).scrollHeight},500),$.ajax({method:"POST",url:serverProtocol+cfSubdomain+serverDomain+"/send_person_message",data:r,type:"JSON",messageTempId:o,error:function(e){if(422==e.status&&("Sorry you cannot chat anymore. Please contact support for further assistance"==e.responseJSON.error.message&&($(".convertfox-error-toast-message").css("z-index",3),$(".convertfox-error-toast-message span").text(e.responseJSON.error.message),$(".convertfox-error-toast-message").css("opacity",1),setTimeout(function(){$(".convertfox-error-toast-message").css("opacity",0),$(".convertfox-error-toast-message").css("z-index",0)},3e3),disableConversationChatArea(),disableHompepageChatArea(),userBlocked=!0,parent.postMessage({funName:"setChatIframeBlock",params:{block:!0}},"*"),parent.postMessage({funName:"setChatOpenAndOpenConversationStatus",params:{openStatus:"true",openConversationId:"",lastActiveAgentImage:"",lastActiveAgentName:"",lastActiveAgentBackground:""}},"*")),"Conversation doesn't exist"==e.responseJSON.error.message)){var a='<div class="delete-conversation-message"><p>'+translateNoLogerActive+"</p></div>";disableConversationChatArea(),$(".convertfox-messanger-messages").append(a)}422!=e.status&&this.tryCount<=this.retryLimit||$("#cf-status-"+this.messageTempId).find("span").text(translateFailed+"..").css("color","#fa7360")}}).done(function(e){var a=e.data;isUserInitiatedChat=!0,0==$("#"+a.id).length&&($("#"+a.message_temp_id).attr("id",a.id),$("#cf-status-"+a.message_temp_id).attr("id","cf-status-"+a.id),$("#cf-status-"+a.id).html('<span><time class="timestamp" data-livestamp="'+a.created_at+'" value="'+a.created_at+'">'+moment(a.created_at).fromNow()+'</time></span> <span class="cf-sent-status">'+messageStatus(a.status)+"</span>")),showEmailChatBox(a.id),cfScrollChatAreaToBottom(0),chatAreaValue="",void 0!=e.data.ga_integrated&&null!=e.data.ga_integrated&&e.data.ga_integrated&&parent.postMessage({funName:"sendGoogleAnalytics",params:{method:"startConversation"}},"*")}),$(".convertfox-messanger-emoji-select").hasClass("is-open")||($(".convertfox-messanger-message-actions circle#Oval1, .convertfox-messanger-message-actions circle#Oval2,.convertfox-messanger-message-actions circle#Oval3, .convertfox-messanger-message-emojis path#Shape, .convertfox-messanger-message-actions circle#Oval-Copy").css("stroke","rgb(185, 190, 198)"),$(".convertfox-messanger-message-actions circle#small1, .convertfox-messanger-message-actions circle#small1-Copy, .convertfox-messanger-message-actions circle#small2, .convertfox-messanger-message-actions circle#small2-Copy, .convertfox-messanger-message-actions circle#small3, .convertfox-messanger-message-actions circle#small3-Copy").css("fill","rgb(185, 190, 198)")),$(".convertfox-messanger-gif-select").hasClass("is-open")||$(".convertfox-messanger-message-actions path#gif-path-1, .convertfox-messanger-message-actions path#gif-path-2").css("stroke","rgb(185, 190, 198)"),cfQueryString.cfDeviceType&&($("#conversationChatArea").focus(),parent.postMessage({funName:"pageScrollToBottom"},"*")),typingStatusStoped()}}function emitSocketData(e){var a="";a=allowMagicTyping?void 0==e.doNotTrackEnabled||null==e.doNotTrackEnabled||e.doNotTrackEnabled?null:$.trim($("#conversationChatArea").val()):null;var t={room:applicationId,conversation_identifier:cfCurrentConversationId,content:a};socket.emit("typing_started",t),timeout=setTimeout(timeoutFunction,2e3)}function moveToConversationArea(){$(".convertfox-messanger-emoji-select, .convertfox-messanger-gif-select").removeClass("is-open"),""!=$.trim($("#chatArea").val())&&(cfCurrentConversationId="",$(".convertfox-messanger-chat-title").text(compayNameOrProjectName),$(".convertfox-messanger-chat-header-avatar img").attr("src",projectAvatarUrl),$("#conversation-list-area").addClass("slide-leave-active"),$(".convertfox-messanger-home-content").addClass("enter-message"),$(".convertfox-messanger-messages").empty(),removeOldMessages(),addCurrentConversationMessages("outside"),$(".convertfox-messanger-chat-header-avatar").css("display","none"),$(".convertfox-messanger-chat-header-avatar-3-users").css("display","flex"),setTimeout(function(){$("#chat-conversation-area").show(),$(".convertfox-messanger-home-content").removeClass("shirnk"),$("#conversation-list-area").removeClass("is-shrunk"),$(".convertfox-messanger-home-content").removeClass("enter-message"),$("#conversation-list-area").hide(),$("#conversation-list-area").removeClass("slide-enter-active slide-leave-active"),$("#chat-conversation-area").removeClass("slide-enter-active slide-leave-active"),$("#chat-conversation-area").removeClass("cf-lead-bot"),$("#chat-conversation-area").removeClass("cf-allow-cursor"),$("#conversationChatArea").css("display","block"),setTimeout(function(){$(".convertfox-messanger-emoji-select, .convertfox-messanger-gif-select").css("display","block"),$(".convertfox-messanger-emoji-select, .convertfox-messanger-gif-select").css("height",0)},1500)},350))}function sendUserMessageToAgent(e){var a,t,s=generateChatRandomId();a=t="getEmail"," "!=cfCurrentConversationId&&""!=cfCurrentConversationId||(cfCurrentConversationId=cfRandomIdGenerate(applicationId)),void 0!==e&&(t=e.type,a=e.value);var n={person_random_id:randomId,conversation_identifier:cfCurrentConversationId,message_content:a,message_type:t,message_temp_id:s,request_from_url:document.referrer,page_title:parentPageTitle,project_secret_key:applicationId};$.ajax({method:"POST",url:serverProtocol+cfSubdomain+serverDomain+"/send_person_message",data:n,type:"JSON",messageTempId:s,error:function(e){if(422==e.status&&("Sorry you cannot chat anymore. Please contact support for further assistance"==e.responseJSON.error.message&&($(".convertfox-error-toast-message").css("z-index",3),$(".convertfox-error-toast-message span").text(e.responseJSON.error.message),$(".convertfox-error-toast-message").css("opacity",1),setTimeout(function(){$(".convertfox-error-toast-message").css("opacity",0),$(".convertfox-error-toast-message").css("z-index",0)},3e3),disableConversationChatArea(),disableHompepageChatArea(),userBlocked=!0,parent.postMessage({funName:"setChatIframeBlock",params:{block:!0}},"*")),"Conversation doesn't exist"==e.responseJSON.error.message)){disableConversationChatArea(),$(".convertfox-messanger-messages").append('<div class="delete-conversation-message"><p>This conversation is no more active.</p><span>Please start new conversation if required.</span></div>')}}}).done(function(e){e.data;isUserInitiatedChat=!0,"getEmail"===t?getEmailBoxShownInCurrCon=!0:"bot_text"===t&&appendQualificationField(),chatAreaValue="",void 0!=e.data.ga_integrated&&null!=e.data.ga_integrated&&e.data.ga_integrated&&parent.postMessage({funName:"sendGoogleAnalytics",params:{method:"startConversation"}},"*")}),$(".convertfox-messanger-emoji-select").hasClass("is-open")||($(".convertfox-messanger-message-actions circle#Oval1, .convertfox-messanger-message-actions circle#Oval2,.convertfox-messanger-message-actions circle#Oval3, .convertfox-messanger-message-emojis path#Shape, .convertfox-messanger-message-actions circle#Oval-Copy").css("stroke","rgb(185, 190, 198)"),$(".convertfox-messanger-message-actions circle#small1, .convertfox-messanger-message-actions circle#small1-Copy, .convertfox-messanger-message-actions circle#small2, .convertfox-messanger-message-actions circle#small2-Copy, .convertfox-messanger-message-actions circle#small3, .convertfox-messanger-message-actions circle#small3-Copy").css("fill","rgb(185, 190, 198)")),$(".convertfox-messanger-gif-select").hasClass("is-open")||$(".convertfox-messanger-message-actions path#gif-path-1, .convertfox-messanger-message-actions path#gif-path-2").css("stroke","rgb(185, 190, 198)")}function addNewEmailFormToChat(e){var a=addEmailFormToMessageArea(e);0==$(".convertfox-messanger-messages #email-submit-bubble").length&&($(".convertfox-messanger-messages").append(a),$("#cfChatEmail").focus(),sendUserMessageToAgent())}function appendQualificationField(){var e=qualificationSettings[0].name,a=qualificationSettings[0].name,t=qualificationSettings[0].type;"date"===t&&(a+=" (DD/MM/YYYY)"),$(".convertfox-messanger-messages").append('<div class="convertfox-messanger-content '+e+'"><div class="convertfox-messanger-chat-message"><div class="convertfox-messanger-chat-message-body"><div class="convertfox-messanger-message-bubble" style="width:100%"><p class="convertfox-messanger-qualification-title">'+a.split("_").join(" ")+'</p><div class="convertfox-messanger-message-qualification-form"><input type="text" data-type="'+t+'" class="convertfox-messenger-message-text-input" id="'+e+'"><button type="button" class="convertfox-messanger-message-qualification-send" id="cfSend-'+e+'" onclick="qualificationDataIdentify(\''+e+"','"+cfUserEmail+"')\">"+paperPlaneSvg()+"</button></div></div></div></div></div>"),$(".convertfox-messenger-message-text-input").last().focus(),$(".convertfox-messanger-messages").animate({scrollTop:$(".convertfox-messanger-messages").get(0).scrollHeight},500),sendUserMessageToAgent({value:JSON.stringify({name:e,value:"",type:t}),type:"qualification_bot"})}function getQualificationAttributes(){qualificationSettings.length&&($(".convertfox-messanger-messages").append('<div class="convertfox-messanger-content"><div class="convertfox-messanger-chat-message"><div class="convertfox-messanger-chat-message-body"><div class="convertfox-messanger-message-bubble"><p>'+settingQualificationText+"</p></div></div></div></div>"),sendUserMessageToAgent({value:settingQualificationText,type:"bot_text"}))}function addError(e,a){$("#cf-"+e+"-status").remove(),$('<div id="cf-'+e+'-status" class="cf-chat-error">Sorry, I didn\'t understand that.</div>').insertAfter(a.parent())}function qualificationDataIdentify(e,a){var t={},s=$(".convertfox-messanger-message-qualification-form input#"+e);t.email=a,t[e]=s.val().trim();var n=s.attr("data-type").toLowerCase();if(""!=t[e]){var o=!0;if("number"===n&&isNaN(t[e]))o=!1,addError(e,s);else if("date"===n){var r=moment(t[e],"DD/MM/YYYY").isValid()&&dateRegex.test(t[e]);r?t[e]=moment(t[e],"DD/MM/YYYY").unix():(o=!1,addError(e,s))}"phone"===e&&t[e].length<10&&(o=!1,addError(e,s)),o&&(parent.postMessage({funName:"identifyCallBack",params:t},"*"),$("#cf-"+e+"-status").remove(),s.prop("disabled","disabled"),s.css("cursor","not-allowed"),$("#cfSend-"+e).removeAttr("onclick"),$("#cfSend-"+e).html(tickSvg),qualificationSettings=qualificationSettings.filter(function(a){return a.name!=e}),qualificationSettings.length&&appendQualificationField())}}function addEmailFormToMessageArea(e){return'<div class="convertfox-messanger-content" id="email-submit-bubble" data-email-content-message-id="'+e+'"> <div class="convertfox-messanger-chat-message"> <div class="convertfox-messanger-chat-message-body"> <div class="convertfox-messanger-message-bubble"> <p>'+getEmailText+'</p> <div class="convertfox-messanger-message-email-form"> <input type="email" class="convertfox-messanger-message-email-input" placeholder="'+translateYourEmail+'" id="cfChatEmail"> <button type="button" class="convertfox-messanger-message-email-send" id="cfSendEmailForm">'+paperPlaneSvg()+'</button> </div> <div id="cfEmailStatus"></div></div> </div> </div> </div>'}function paperPlaneSvg(){return'<svg width="17px" height="17px" viewBox="0 0 17 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="cf-chat-email-send" fill-rule="evenodd" fill="#B9BEC6"><path d="M8.92169405,13.7631008 L6.44678595,16.6507571 C5.84238956,17.3559506 4.68688074,16.9280916 4.68750022,15.999333 L4.69125022,10.3771455 C4.69147287,10.0433376 4.85824098,9.73165174 5.13582441,9.54624626 L8.58373113,7.24329611 C9.04299249,6.93654303 9.66396988,7.06017541 9.97072296,7.51943677 C10.277476,7.97869812 10.1538437,8.59967552 9.6945823,8.9064286 L7.71552595,10.2282939 L12.0611824,13.7200685 L14.1886299,3.082831 L3.4390048,7.38268104 L3.85981245,7.71724991 C4.29211339,8.06095667 4.36393315,8.69003522 4.02022639,9.12233616 C3.67651962,9.5546371 3.04744108,9.62645686 2.61514014,9.28275009 L0.846413845,7.87650009 C0.24560204,7.39881646 0.38469284,6.4503399 1.09735932,6.16527331 L15.1598593,0.540273309 C15.897188,0.245341847 16.6675718,0.886160284 16.5118307,1.66486614 L13.6993307,15.7273661 C13.5521816,16.4631114 12.6772842,16.7807517 12.0923884,16.3107826 L8.92169405,13.7631008 Z M7.36184488,12.5097477 L6.69018819,11.9700654 L6.68930483,13.2944494 L7.36184488,12.5097477 Z" id="send-Shape"></path></g></g></svg>'}function tickSvg(){return'<svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>checkmark-circle</title><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="icon-tick" fill="#7ED321" fill-rule="nonzero"><path d="M10,0 C15.5225,0 20,4.475 20,10 C20,15.525 15.5225,20 10,20 C4.4775,20 0,15.525 0,10 C0,4.475 4.4775,0 10,0 Z M13.766875,5.66875 C13.4675,5.49375 13.085625,5.6 12.913125,5.89375 L8.91625,12.81875 L6.68,10.75625 C6.44375,10.50625 6.048125,10.49375 5.79625,10.73125 C5.544375,10.9625 5.53125,11.3625 5.7675,11.6125 L8.625,14.25 C8.860625,14.5 9.25625,14.5125 9.508125,14.275 C9.584375,14.20625 13.995625,6.51875 13.995625,6.51875 C14.168125,6.225 14.065625,5.8375 13.766875,5.66875 Z" id="checkmark-circle"></path></g></g></svg>'}function paperClipSvg(){return'<svg xmlns="http://www.w3.org/2000/svg" width="23.437500" height="25.580357" viewBox="0.066964 -49.084821 23.437500 25.580357" fill="'+specialTextColor+'" class="paper-clip-icon"><path d="M23.504464 -28.108259C23.504464 -26.802455 23.063616 -25.708705 22.181920 -24.827009C21.300223 -23.945312 20.206473 -23.504464 18.900670 -23.504464C17.393973 -23.504464 16.082589 -24.062500 14.966518 -25.178571L1.958705 -38.169643C0.697545 -39.453125 0.066964 -40.965402 0.066964 -42.706473C0.066964 -44.481027 0.680804 -45.987723 1.908482 -47.226562C3.136161 -48.465402 4.637277 -49.084821 6.411830 -49.084821C8.175223 -49.084821 9.698661 -48.454241 10.982143 -47.193080L21.110491 -37.047991C21.222098 -36.936384 21.277902 -36.813616 21.277902 -36.679688C21.277902 -36.501116 21.107701 -36.241629 20.767299 -35.901228C20.426897 -35.560826 20.167411 -35.390625 19.988839 -35.390625C19.843750 -35.390625 19.715402 -35.446429 19.603795 -35.558036L9.458705 -45.719866C8.577009 -46.579241 7.566964 -47.008929 6.428571 -47.008929C5.245536 -47.008929 4.246652 -46.590402 3.431920 -45.753348C2.617188 -44.916295 2.209821 -43.906250 2.209821 -42.723214C2.209821 -41.551339 2.633929 -40.541295 3.482143 -39.693080L16.473214 -26.685268C17.176339 -25.982143 17.985491 -25.630580 18.900670 -25.630580C19.614955 -25.630580 20.206473 -25.864955 20.675223 -26.333705C21.143973 -26.802455 21.378348 -27.393973 21.378348 -28.108259C21.378348 -29.023438 21.026786 -29.832589 20.323661 -30.535714L10.597098 -40.262277C10.306920 -40.530134 9.972098 -40.664062 9.592634 -40.664062C9.268973 -40.664062 9.001116 -40.558036 8.789062 -40.345982C8.577009 -40.133929 8.470982 -39.866071 8.470982 -39.542411C8.470982 -39.185268 8.610491 -38.856027 8.889509 -38.554688L15.753348 -31.690848C15.864955 -31.579241 15.920759 -31.456473 15.920759 -31.322545C15.920759 -31.143973 15.747768 -30.881696 15.401786 -30.535714C15.055804 -30.189732 14.793527 -30.016741 14.614955 -30.016741C14.481027 -30.016741 14.358259 -30.072545 14.246652 -30.184152L7.382812 -37.047991C6.679688 -37.728795 6.328125 -38.560268 6.328125 -39.542411C6.328125 -40.457589 6.646205 -41.233259 7.282366 -41.869420C7.918527 -42.505580 8.694196 -42.823661 9.609375 -42.823661C10.591518 -42.823661 11.422991 -42.472098 12.103795 -41.768973L21.830357 -32.042411C22.946429 -30.948661 23.504464 -29.637277 23.504464 -28.108259ZM23.504464 -28.108259"/></svg>'}function checkAskEmailcondition(){return"always"==settingAskEmail||"never"!=settingAskEmail&&("non_office_hours"==settingAskEmail?0==officeHours.length&&null==timeDifferenceText||0!=officeHours.length&&null!=timeDifferenceText:void 0)}function showEmailChatBox(e){setTimeout(function(){""!=cfUserEmail||!isUserInitiatedChat||0!=$(".convertfox-messanger-messages #email-submit-bubble").length||isBotConversation||null!=getEmailBoxShownInCurrCon&&0!=getEmailBoxShownInCurrCon||!checkAskEmailcondition()||addNewEmailFormToChat(e)},1e3)}function cfValidatateChatEmailId(e){return!!/^\w+([.-]\w+)*\+?\w*@\w+([.-]\w+)*\.\w{2,}$/.test(e)}function handleMeetingStatusFromBot(e){if(isShowingBotTypingBubble)var a=setInterval(function(){if(!isShowingBotTypingBubble){clearInterval(a);var t='<div class="convertfox-messanger-content" id="'+e.id+'"></div>';$(".convertfox-messanger-messages").append(t),getMeetingDetail(e,!0)}},500);else{var t='<div class="convertfox-messanger-content" id="'+e.id+'"></div>';$(".convertfox-messanger-messages").append(t),getMeetingDetail(e,!0)}}function cfFindConversationAlreadyAddedOrNot(e){var a=!1,t=$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation[data-cf-conversation-identifier="+e+"]").index();return-1!=t&&(t++,a=!0),[a,t]}function manageBadgeCount(e){var a=0;if("0"==cfIdentified)if("undefined"!=e.unread_count&&void 0!=e.unread_count&&jQuery.isArray(e.unread_count)){for(var t=0;t<e.unread_count.length;t++)if(e.unread_count[t][0]==randomId){a=e.unread_count[t][1];break}0==e.unread_count.length&&(a=0)}else a=e.person_total_unread_count;else"1"==cfIdentified&&(a=e.person_total_unread_count);if(void 0!=e.user&&null!=e.user&&0!=a&&"seen"!=e.status&&(removeTypingBubble(),messageId=e.id,cfUnreadMessageUserObject=e.user),void 0!=cfUnreadMessageUserObject&&""!=cfUnreadMessageUserObject&&(assignSetIntervalOnPageFocus(),assignSetIntervalOnPageNotFocus()),""!=messageId&&messageId==e.id&&"seen"==e.status||void 0!=e.conversation&&void 0!=e.conversation.person_unread_message_count&&e.conversation.person_unread_message_count<1){cfUnreadMessageUserObject="",clearInterval(cfParentPageTitleInterval),clearInterval(cfParentPageTitleIntervalOnPageNotFocus),cfPageFocusSetIntervalInitiated=!1,cfPageNotFocusSetIntervalInitiated=!1,cfParentPageOriginalTitle=!0,parent.postMessage({funName:"changeParentWindowTitle",params:{status:cfParentPageOriginalTitle,userObject:cfUnreadMessageUserObject}},"*")
;var s=$(".convertfox-messanger-conversation-wrap").find("[data-cf-conversation-identifier='"+e.conversation.conversation_identifier+"']"),n=$(s).find(".cf-unread-count-conversation");1==s.length&&1==n.length&&$(n).hide()}void 0!=a&&(cfUpdateOverallUnreadCount(a),totalUnreadMessageCount=a),parent.postMessage({funName:"showFaviconNotification",params:{count:a}},"*")}function handleBotInConversationList(e,a){var t=cfFindConversationAlreadyAddedOrNot(e.conversation_identifier),s=t[0],n=t[1];if(s){if("sent"==e.status){var o=moment().format("YYYY-MM-DD"),r=moment(e.created_at).format("YYYY-MM-DD");if(moment(r).isSame(o))var i=moment(e.created_at).fromNow();else var i=moment(e.created_at).format("YYYY-MM-DD");var c='<time class="timestamp" data-livestamp="'+e.created_at+'" datetime="'+e.created_at+'" value="'+e.created_at+'">'+i+"</time>";if($(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+n+") .convertfox-messanger-conversation-reply .conversation-reply-time time").remove(),$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+n+") .convertfox-messanger-conversation-reply .conversation-reply-time").append(c),$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+n+") .convertfox-messanger-conversation-message-preview div").html(a),$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+n+") .convertfox-messanger-conversation-message-preview .cf-unread-count-conversation").remove(),$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+n+")").attr("data-cf-last-message-id",e.id),e.conversation.person_unread_message_count>0){if(e.conversation.person_unread_message_count>99)var l='<span class="cf-unread-count-conversation">99+</span>';else var l='<span class="cf-unread-count-conversation">'+e.conversation.person_unread_message_count+"</span>";$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+n+") .convertfox-messanger-conversation-message-preview").append(l)}$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+n+") .convertfox-messanger-conversation-message-preview").attr("data-id",e.id),cfMessageDeliverMethod(e.id,"delivered",e.conversation_identifier)}else"responded"==e.status?0!=$("#cf-status-"+e.id).length&&($(".cf-seen-status").each(function(){$(this).remove()}),$("#cf-status-"+e.id+" .cf-sent-status").remove(),$("#cf-status-"+e.id+" .cf-delivered-status").remove(),$("#cf-status-"+e.id).append(' <span class="cf-seen-status">'+messageStatus(e.status)+"</span>")):"delivered"==e.status&&0!=$("#cf-status-"+e.id).length&&($(".cf-delivered-status").each(function(){$(this).remove()}),$("#cf-status-"+e.id+" .cf-sent-status").remove(),$("#cf-status-"+e.id).append(' <span class="cf-delivered-status">'+messageStatus(e.status)+"</span>"));$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+n+") .convertfox-messanger-conversation-reply h3").html("Bot")}else if(["lead_bot_greeting","lead_bot_question","lead_bot_response","lead_bot_goal_message"].includes(e.message_type)){s&&$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+n+")").remove();var o=moment().format("YYYY-MM-DD"),r=moment(e.created_at).format("YYYY-MM-DD");if(moment(r).isSame(o))var i=moment(e.created_at).fromNow();else var i=moment(e.created_at).format("YYYY-MM-DD");$(".convertfox-messanger-conversation-container").css("opacity",1),$(".convertfox-home-x-scroll-content").removeClass("is-welcome");var c='<div class="convertfox-messanger-conversation goto-chat" onclick="cfGetMessages(this)" data-cf-conversation-identifier="'+e.conversation_identifier+'" data-cf-last-message-id="'+e.id+'"> <div class="convertfox-messanger-conversation-text" > <div class="convertfox-messanger-conversation-reply"> <div class="convertfox-messanger-conversation-avatar"><img src='+chatBotIconUrl+"></div><h3>"+escapeHtml(translateBot)+'</h3><span class="conversation-reply-time"><time class="timestamp" data-livestamp="'+e.created_at+'" datetime="'+e.created_at+'" value="'+e.created_at+'">'+i+'</time></span></div> <div class="convertfox-messanger-conversation-message-preview" data-id="'+e.id+'"> ';c+="<div>"+a+"</div> ",e.conversation.person_unread_message_count>0&&(e.conversation.person_unread_message_count>99?c+='<span class="cf-unread-count-conversation">99+</span>':c+='<span class="cf-unread-count-conversation">'+e.conversation.person_unread_message_count+"</span>"),c+="</div> </div> </div>",$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation-wrap").prepend(c),cfMessageDeliverMethod(e.id,"delivered",e.conversation_identifier)}else if("sent"==e.status){var o=moment().format("YYYY-MM-DD"),r=moment(e.created_at).format("YYYY-MM-DD");if(moment(r).isSame(o))var i=moment(e.created_at).fromNow();else var i=moment(e.created_at).format("YYYY-MM-DD");s&&$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+n+")").remove();var c='<div class="convertfox-messanger-conversation goto-chat" onclick="cfGetMessages(this)" data-cf-conversation-identifier="'+e.conversation_identifier+'" data-cf-last-message-id="'+e.id+'"> ';c+='<div class="convertfox-messanger-conversation-text" > <div class="convertfox-messanger-conversation-reply"> <div class="convertfox-messanger-conversation-avatar"> <img src='+chatBotIconUrl+"></div><h3>"+escapeHtml(translateBot)+'</h3><span class="conversation-reply-time"><time class="timestamp" data-livestamp="'+e.created_at+'" datetime="'+e.created_at+'" value="'+e.created_at+'">'+i+'</time></span></div> <div class="convertfox-messanger-conversation-message-preview add-linkify-tag" data-id="'+e.id+'"> ',c+="<div>"+a+"</div></div> </div> </div>",$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation-wrap").prepend(c)}else"seen"!=e.status&&"responded"!=e.status||s&&$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+n+") .convertfox-messanger-conversation-message-preview .cf-unread-count-conversation").remove()}function addGifImageToConversation(e){$("#conversation-area-gif-button").parents("#chat-conversation-area").find(".convertfox-messanger-gif-select").hasClass("is-open")&&($("#conversation-area-gif-button").parents("#chat-conversation-area").find(".convertfox-messanger-gif-select").removeClass("is-open"),$("#conversation-area-gif-button").addClass("focus")),$("#home-page-gif-button").parents("#conversation-list-area").find(".convertfox-messanger-gif-select").hasClass("is-open")&&($("#home-page-gif-button").parents("#conversation-list-area").find(".convertfox-messanger-gif-select").removeClass("is-open"),$("#home-page-gif-button").addClass("focus"));var a=generateChatRandomId();if(" "==cfCurrentConversationId||""==cfCurrentConversationId){cfCurrentConversationId=cfRandomIdGenerate(applicationId);var t=$.trim($("#chatArea").val());void 0!=t&&""!=t&&$("#conversationChatArea").val(t)}$(".cf-sent-status").each(function(){$(this).remove()});var s="";s='<div class="convertfox-messanger-content" id="'+a+'"><div class="convertfox-messanger-chat-message primary"><div class="convertfox-messanger-chat-message-body"><div class="convertfox-messanger-message-bubble show-gif"><a href="'+e.gifurl+'" target="_blank"><img src="'+e.tinyurl+'"></a></div><div class="message-status convertfox-messenger-tooltip"  data-tooltip="'+moment().format("Do MMM YYYY, hh:mm A")+'"  id="cf-status-'+a+'"><span class="is-gif-status">Via Tenor</span><span>'+translateJustNow+"</span> </div></div></div></div>",$(".convertfox-messanger-messages").append(s),changeTextColor();var n={person_random_id:randomId,conversation_identifier:cfCurrentConversationId,message_content:e.tinyurl,message_temp_id:a,request_from_url:document.referrer,page_title:parentPageTitle,project_secret_key:applicationId,original_gif:e.gifurl,is_gif:!0};$.ajax({method:"POST",url:serverProtocol+cfSubdomain+serverDomain+"/send_person_message",data:n,type:"JSON",messageTempId:a,error:function(e){if(422==e.status&&("Sorry you cannot chat anymore. Please contact support for further assistance"==e.responseJSON.error.message&&($(".convertfox-error-toast-message").css("z-index",3),$(".convertfox-error-toast-message span").text(e.responseJSON.error.message),$(".convertfox-error-toast-message").css("opacity",1),setTimeout(function(){$(".convertfox-error-toast-message").css("opacity",0),$(".convertfox-error-toast-message").css("z-index",0)},3e3),disableConversationChatArea(),disableHompepageChatArea(),userBlocked=!0,parent.postMessage({funName:"setChatIframeBlock",params:{block:!0}},"*")),"Conversation doesn't exist"==e.responseJSON.error.message)){disableConversationChatArea(),$(".convertfox-messanger-messages").append('<div class="delete-conversation-message"><p>This conversation is no more active.</p><span>Please start new conversation if required.</span></div>')}}}).done(function(e){var a=e.data;isUserInitiatedChat=!0,0==$("#"+a.id).length&&($("#"+a.message_temp_id).attr("id",a.id),$("#cf-status-"+a.message_temp_id).attr("id","cf-status-"+a.id),$("#cf-status-"+a.id).html('<span class="is-gif-status">Via Tenor</span><span><time class="timestamp" data-livestamp="'+a.created_at+'" value="'+a.created_at+'">'+moment(a.created_at).fromNow()+'</time></span> <span class="cf-sent-status">'+messageStatus(a.status)+"</span>")),showEmailChatBox(a.id),cfScrollChatAreaToBottom(0),chatAreaValue="",void 0!=e.data.ga_integrated&&null!=e.data.ga_integrated&&e.data.ga_integrated&&parent.postMessage({funName:"sendGoogleAnalytics",params:{method:"startConversation"}},"*")}),$(".convertfox-messanger-emoji-select").hasClass("is-open")||($(".convertfox-messanger-message-actions circle#Oval1, .convertfox-messanger-message-actions circle#Oval2,.convertfox-messanger-message-actions circle#Oval3, .convertfox-messanger-message-emojis path#Shape, .convertfox-messanger-message-actions circle#Oval-Copy").css("stroke","rgb(185, 190, 198)"),$(".convertfox-messanger-message-actions circle#small1, .convertfox-messanger-message-actions circle#small1-Copy, .convertfox-messanger-message-actions circle#small2, .convertfox-messanger-message-actions circle#small2-Copy, .convertfox-messanger-message-actions circle#small3, .convertfox-messanger-message-actions circle#small3-Copy").css("fill","rgb(185, 190, 198)")),$(".convertfox-messanger-gif-select").hasClass("is-open")||$(".convertfox-messanger-message-actions path#gif-path-1, .convertfox-messanger-message-actions path#gif-path-2").css("stroke","rgb(185, 190, 198)")}function addAttachmentToConversation(e){var a=e;timeoutFunction();var t=generateChatRandomId();if(" "==cfCurrentConversationId||""==cfCurrentConversationId){cfCurrentConversationId=cfRandomIdGenerate(applicationId);var s=$.trim($("#chatArea").val());void 0!=s&&""!=s&&$("#conversationChatArea").val(s)}$(".cf-sent-status").each(function(){$(this).remove()});var n='<div class="convertfox-messanger-content" id="'+t+'"> <div class="convertfox-messanger-chat-message primary"> <div class="convertfox-messanger-chat-message-body"> ';if("image"==a.files[0].type.split("/")[0]?n+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-attachment-file" onclick="downloadFileAttachment(this)"><div class="convertfox-messanger-message-photo-upload"> <div class="convertfox-messanger-message-photo-icon"> <span class="photo"><img id="chat-message-image-'+t+'"  src=""></span> </div> <div class="convertfox-messanger-message-photo-text"> <h4>'+a.files[0].name+"</h4> <p>"+bytesToSize(a.files[0].size)+"</p> </div> </div></div> ":n+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-emojis">'+createUploadedFileHtml("",t,a.files[0].type,a.files[0].name,a.files[0].size)+"</div>",n+='<div class="message-status convertfox-messenger-tooltip"  data-tooltip="'+moment().format("Do MMM YYYY, hh:mm A")+'"  id="cf-status-'+t+'"> <span>'+translateJustNow+"</span> </div></div> </div> </div>",$(".convertfox-messanger-messages").append(n),changeTextColor(),"image"==a.files[0].type.split("/")[0]&&a.files&&a.files[0]){var o=new FileReader;o.onload=function(e){$("#chat-message-image-"+t).attr("src",e.target.result)},o.readAsDataURL(a.files[0])}var r=new FormData;r.append("file_attachment",$(e)[0].files[0]),r.append("person_random_id",randomId),r.append("conversation_identifier",cfCurrentConversationId),r.append("message_temp_id",t),r.append("request_from_url",document.referrer),r.append("page_title",parentPageTitle),r.append("project_secret_key",applicationId),$("#conversation-page-file").val(""),$(".add-linkify-tag").linkify({target:"_blank"}),$(".convertfox-messanger-messages").animate({scrollTop:$(".convertfox-messanger-messages").get(0).scrollHeight},500),$.ajax({method:"POST",url:serverProtocol+cfSubdomain+serverDomain+"/create_attachments",processData:!1,contentType:!1,data:r,error:function(e){422==e.status&&"Sorry you cannot chat anymore. Please contact support for further assistance"==e.responseJSON.error.message&&($(".convertfox-error-toast-message").css("z-index",3),$(".convertfox-error-toast-message span").text(e.responseJSON.error.message),$(".convertfox-error-toast-message").css("opacity",1),setTimeout(function(){$(".convertfox-error-toast-message").css("opacity",0),$(".convertfox-error-toast-message").css("z-index",0)},3e3),disableConversationChatArea(),disableHompepageChatArea(),userBlocked=!0,parent.postMessage({funName:"setChatIframeBlock",params:{block:!0}},"*")),422!=e.status&&this.tryCount<=this.retryLimit||$("#cf-status-"+t).find("span").text(translateFailed+"..").css("color","#fa7360")}}).done(function(e){var a=e.data;isUserInitiatedChat=!0,0==$("#"+a.id).length&&($("#"+a.message_temp_id).attr("id",a.id),$("#cf-status-"+a.message_temp_id).attr("id","cf-status-"+a.id),$("#cf-status-"+a.id).html('<span><time class="timestamp" data-livestamp="'+a.created_at+'" value="'+a.created_at+'">'+moment(a.created_at).fromNow()+'</time></span><span class="cf-sent-status">'+messageStatus(a.status)+"</span>")),a.message_temp_id==t&&($("#chat-message-image-"+t).attr("src",a.message_content),$("#chat-message-file-"+t).attr("data-download-file",a.message_content),$("#chat-message-file-"+t).attr("data-download-type",a.file_type),$("#chat-message-file-"+t).removeClass("uploading-file-class")),showEmailChatBox(a.id),cfScrollChatAreaToBottom(0)})}function checkUploadFileValidation(e,a){var t=e,s=!1,n=t.files[0].size/1024;n/1024>1?n/1024/1024<1&&(n=Math.round(n/1024*100)/100,"image"==t.files[0].type.split("/")[0]?parseFloat(n)<=parseFloat(maxFileSize.image)&&(s=!0):parseFloat(n)<=parseFloat(maxFileSize.file)&&(s=!0)):(n=Math.round(100*n)/100,n+"Kb",s=!0),void 0!=a&&a(s)}function isDataURL(e){return!!e.match(isDataURL.regex)}function downloadFileAttachment(e){var a=$(e).find("img").attr("src");""==a||void 0==a||"undefined"==a||a.startsWith("data:")||window.open(a,"_blank")}function updateOfficeHours(e){var a=["Saturday","Sunday"];if(void 0!=e.time_zone&&(timeZone=e.time_zone,agentCurrentDate=moment().tz(timeZone),agentCurrentDay=agentCurrentDate.day(),isWeekendStatus=a.includes(agentCurrentDate.format("dddd")),nonWorkingDays=e.non_working_dates),void 0!=e.office_hours&&e.office_hours.length>0){agentAvailability=[],officeHours=e.office_hours,getProperAgentAvailabilityTimeDetails(officeHours),filterCurrentWeekAvailability(agentAvailability),findNonWorkingDays(nonWorkingDays);var t=getDifferenceBetweenAgentAndEndUserTime(agentAvailability);timeDifferenceText=getTimeDifferenceText(t),parent.postMessage({funName:"initPrompt",params:{shownTriggeredChatIds:cfTriggeredChatIds,shownLeadBotIds:cfLeadBotIds,officeHours:timeDifferenceText,weekEndStatus:isWeekendStatus}},"*"),null!=timeDifferenceText&&($(".convertfox-messanger-chat-subtitle").text(timeDifferenceText),$(".convertfox-messanger-shrink-header-sub-content").text(timeDifferenceText),$(".reply-time").text(timeDifferenceText))}else parent.postMessage({funName:"initPrompt",params:{shownTriggeredChatIds:cfTriggeredChatIds,shownLeadBotIds:cfLeadBotIds,officeHours:null,weekEndStatus:isWeekendStatus}},"*")}function checkNextWeekAvailability(e){for(var a=e.dayNumber,t=1;t<=99;t++){var s=moment().tz(timeZone),n=s.day(a).add(t,"weeks").format("YYYY-MM-DD");if(n&&-1==nonWorkingDays.indexOf(n)){e.nextAvailability=n,nextAvailability.push(e);break}}nextAvailability=nextAvailability.sort(function(e,a){var t=e.nextAvailability,s=a.nextAvailability;return moment(t).isBefore(s)?-1:moment(t).isAfter(s)?1:0})}function filterCurrentDateFormAvailability(e){currentWeekAvailability=$.grep(currentWeekAvailability,function(a){return a.currentWeekDate!=e.currentWeekDate}),checkNextWeekAvailability(e)}function filterCurrentWeekAvailability(e){for(var a=0;a<e.length;a++)-1!=nonWorkingDays.indexOf(e[a].currentWeekDate)?checkNextWeekAvailability(e[a]):(e[a].nextAvailability="",currentWeekAvailability.push(e[a]))}function findNonWorkingDays(e){for(var a in e)if(moment(agentCurrentDate.format("YYYY-MM-DD")).isSame(moment(e[a],"YYYY-MM-DD").format("YYYY-MM-DD"))){checkCurrentDayWorkingDayOrNot=!1;break}if(checkCurrentDayWorkingDayOrNot){var t=$.grep(agentAvailability,function(e){return e.currentWeekDate==agentCurrentDate.format("YYYY-MM-DD")});if(0!=t.length){var s=t[0],n=agentCurrentDate.format("HH:mm"),o=moment(s.from,"HH:mm"),r=moment(s.to,"HH:mm");n=moment(n,"HH:mm"),n.isBetween(o,r,null,[])?checkCurrentDayWorkingDayOrNot=!0:n.isAfter(r)&&(checkCurrentDayWorkingDayOrNot=!1,filterCurrentDateFormAvailability(s))}}}function getProperAgentAvailabilityTimeDetails(e){var a,t;for(var s in e){var n=Object.keys(e[s]);if(n.length>0){var o=dayInNumber(n[0]);if(o<=6)a=moment().tz(timeZone),t=agentCurrentDay<=o?a.day(o).format("YYYY-MM-DD"):a.day(o).add(1,"weeks").format("YYYY-MM-DD"),agentAvailability.push({dayNumber:o,from:e[s][n[0]].from,to:e[s][n[0]].to,currentWeekDate:t});else if(7==o)for(var r=0;r<7;r++)a=moment().tz(timeZone),t=agentCurrentDay<=r?a.day(r).format("YYYY-MM-DD"):a.day(r).add(1,"weeks").format("YYYY-MM-DD"),agentAvailability.push({dayNumber:r,from:e[s][n[0]].from,to:e[s][n[0]].to,currentWeekDate:t});else if(8==o)a=moment().tz(timeZone),t=agentCurrentDay<=0?a.day(0).format("YYYY-MM-DD"):a.day(0).add(1,"weeks").format("YYYY-MM-DD"),agentAvailability.push({dayNumber:0,from:e[s][n[0]].from,to:e[s][n[0]].to,currentWeekDate:t}),a=moment().tz(timeZone),t=agentCurrentDay<=6?a.day(6).format("YYYY-MM-DD"):a.day(6).add(1,"weeks").format("YYYY-MM-DD"),agentAvailability.push({dayNumber:6,from:e[s][n[0]].from,to:e[s][n[0]].to,currentWeekDate:t});else if(9==o)for(var r=1;r<6;r++){var a=moment().tz(timeZone);t=agentCurrentDay<=r?a.day(r).format("YYYY-MM-DD"):a.day(r).add(1,"weeks").format("YYYY-MM-DD"),agentAvailability.push({dayNumber:r,from:e[s][n[0]].from,to:e[s][n[0]].to,currentWeekDate:t})}}}agentAvailability=agentAvailability.sort(function(e,a){var t=new Date(e.dayNumber),s=new Date(a.dayNumber);return t<s?-1:t>s?1:0})}function dayInNumber(e){var a;switch(e){case"Sunday":a=0;break;case"Monday":a=1;break;case"Tuesday":a=2;break;case"Wednesday":a=3;break;case"Thursday":a=4;break;case"Friday":a=5;break;case"Saturday":a=6;break;case"Everyday":a=7;break;case"Weekends":a=8;break;case"Weekdays":a=9}return a}function getDifferenceBetweenAgentAndEndUserTime(e){var a=[];return e.length>0?(e.forEach(function(t){if(agentCurrentDay==t.dayNumber&&checkCurrentDayWorkingDayOrNot){var s=agentCurrentDate.format("HH:mm"),n=moment(t.from,"HH:mm"),o=moment(t.to,"HH:mm");s=moment(s,"HH:mm"),s.isBetween(n,o,null,[])?a.push(-1):s.isAfter(o)?isFindNextAgentActiveDate||a.push(findNextActiveDay(e)):a.push(-2)}else isFindNextAgentActiveDate||a.push(findNextActiveDay(e))}),a.sort()):[]}function findNextActiveDay(e){for(var a=0,t=null,s=agentCurrentDay+1;a<=7;s++){a++,7===s&&(s=0);for(var n=0;n<currentWeekAvailability.length;n++)if(s==currentWeekAvailability[n].dayNumber){t=currentWeekAvailability[n].dayNumber;break}if(null!=t){isFindNextAgentActiveDate=!0;break}}if(null==t){a=0;for(var s=0;a<=7;s++){a++,7===s&&(s=0);for(var n=0;n<nextAvailability.length;n++){t="nextAvailability",nextAvailableDate=nextAvailability[n].nextAvailability;break}if(null!=t){isFindNextAgentActiveDate=!0;break}}}return t}function getTimeDifferenceText(e){var a=null;if(e.length)switch(e[0]){case-1:a=null;break;case-2:a=translateBackInFewHours;break;case-3:a=translateBackOnTomorrow;break;case"nextAvailability":a="We will be back on "+moment(nextAvailableDate,"YYYY-MM-DD").format(displayDateFormat);break;default:a=dayInString(e[0])}return a}function defaultChatOpenWithConversationList(){if($("#convertfoxMessageWindow, .convertfox-messanger-window-shadow").css("display","flex"),setTimeout(function(){$("#convertfoxMessageWindow").addClass("is-active")},0),$("#convertfoxBubble").addClass("is-active"),$("#convertfoxChat").addClass("is-active"),$(".triggered-chat-container").css("display","none"),$(".triggered-chat-container, .convertfox-messanger").addClass("box-shadow-padding"),parent.postMessage({funName:"setChatBoxHeight",params:{status:"chatAreaOpen",height:"720px",width:"450px"}},"*"),"none"==$("#conversation-list-area").css("display")&&"none"==$("#chat-conversation-area").css("display")&&($("#conversation-list-area").css("display","flex"),cfGetConversationList(!1),setTimeout(function(){},200)),"none"==$("#conversation-list-area").css("display")&&"none"!=$("#chat-conversation-area").css("display")){var e=$(".convertfox-messanger-chat-header-avatar img").attr("src"),a=$(".convertfox-messanger-chat-header-text .convertfox-messanger-chat-title:first").text(),t=$(".convertfox-messanger-chat-header-avatar .cf-profile-avatar").css("background-color");parent.postMessage({funName:"setChatOpenAndOpenConversationStatus",params:{openStatus:"true",openConversationId:cfCurrentConversationId,lastActiveAgentImage:e,lastActiveAgentName:a,lastActiveAgentBackground:t}},"*"),setTimeout(function(){conversationTextAreaFocus()},200),$(".convertfox-messanger-messages").animate({scrollTop:$(".convertfox-messanger-messages").scrollTop()},500)}else parent.postMessage({funName:"setChatOpenAndOpenConversationStatus",params:{openStatus:"true",openConversationId:"",lastActiveAgentImage:"",lastActiveAgentName:"",lastActiveAgentBackground:""}},"*"),setTimeout(function(){},200)}function openConversation(e,a,t){activeAgentImagesLoaded||activateRecentAgentsImages(),isBotPresent=!1,isBotConversation=!1,handleTypingArea(),cfCurrentConversationId="";var s=!1;"flex"==$(".triggered-chat-container").css("display")&&(s=!0),$(".triggered-chat-container").css("display","none"),$("#convertfoxMessageWindow").removeClass("triggered-chat-active"),$("#convertfoxBubble").addClass("is-active"),$("#convertfoxMessageWindow, .convertfox-messanger-window-shadow").css("display","flex"),setTimeout(function(){$("#convertfoxMessageWindow").addClass("is-active")},0),$("#convertfoxChat").addClass("is-active"),$(".convertfox-messanger-chat-title").text(compayNameOrProjectName),$("#chat-conversation-area").show(),$("#conversation-list-area").hide(),$("#chat-conversation-area").removeClass("cf-lead-bot"),$("#chat-conversation-area").removeClass("cf-allow-cursor"),$(".convertfox-messanger-messages").empty(),$(".convertfox-messanger-chat-header-avatar").css("display","none"),$(".convertfox-messanger-chat-header-avatar-3-users").css("display","flex"),$(".triggered-chat-container, .convertfox-messanger").addClass("box-shadow-padding"),parent.postMessage({funName:"setTriggeredChatOpen",params:{status:!1}},"*"),void 0!=t&&"fromMethod"==t?parent.postMessage({funName:"setChatBoxHeight",params:{status:"chatAreaOpen",height:"720px",width:"450px"}},"*"):s?parent.postMessage({funName:"setChatBoxHeight",params:{status:"chatAreaOpen",height:"100%",width:"450px",mode:"openChatviaTriggeredChat"}},"*"):parent.postMessage({funName:"setChatBoxHeight",params:{status:"chatAreaOpen",height:"100%",width:"450px",mode:"openTriggeredChat"}},"*"),parent.postMessage({funName:"setChatOpenAndOpenConversationStatus",params:{openStatus:"true",openConversationId:"",lastActiveAgentImage:"",lastActiveAgentName:""}},"*"),""!=a&&($("#conversationChatArea").val(a),setTimeout(function(){$("#conversationChatArea").keyup(),$("#conversationChatArea").focus()},1500)),setTimeout(function(){$("#conversationChatArea").css("display","block"),setTimeout(function(){$(".convertfox-messanger-emoji-select, .convertfox-messanger-gif-select").css("display","block"),$(".convertfox-messanger-emoji-select, .convertfox-messanger-gif-select").css("height",0)},1500)},500),setTimeout(function(){conversationTextAreaFocus()},1e3)}function cfListOpenWhileAssistantOpen(){$(".notification-chat-container").hide(),$(".triggered-chat-container").css("display","none"),$("#convertfoxMessageWindow").removeClass("triggered-chat-active"),$(".convertfox-messanger-home-content").removeClass("shirnk"),$("#conversation-list-area").removeClass("is-shrunk"),cfGetConversationList(!1),$("#convertfoxBubble").addClass("is-active"),$("#convertfoxChat").addClass("is-active"),$(".triggered-chat-container, .convertfox-messanger").addClass("box-shadow-padding"),parent.postMessage({funName:"setTriggeredChatOpen",params:{status:!1}},"*"),parent.postMessage({funName:"setChatBoxHeight",params:{status:"chatAreaOpen",mode:"openChatviaTriggeredChat",height:"720px",width:"450px"}},"*"),parent.postMessage({funName:"setChatOpenAndOpenConversationStatus",params:{openStatus:"true",openConversationId:"",lastActiveAgentImage:"",lastActiveAgentName:"",lastActiveAgentBackground:""}},"*"),$("#chat-conversation-area").css("display","none"),$("#conversation-list-area").css("display","flex"),$("#chat-conversation-area").removeClass("cf-lead-bot"),$("#chat-conversation-area").removeClass("cf-allow-cursor"),$("#convertfoxMessageWindow, .convertfox-messanger-window-shadow").css("display","flex"),setTimeout(function(){$("#convertfoxMessageWindow").addClass("is-active")},0),setTimeout(function(){},200)}function openConversationList(){function e(){"none"!=$(".triggered-chat-container").css("display")||"none"!=$(".notification-chat-container").css("display")?cfListOpenWhileAssistantOpen():!$("#convertfoxMessageWindow").hasClass("is-active")||"none"==$("#chat-conversation-area").css("display")||"none"==$(".convertfox-messanger-chat-header-avatar").css("display")&&"none"==$(".convertfox-messanger-chat-header-avatar-3-users").css("display")?(parent.postMessage({funName:"setChatBoxHeight",params:{status:"chatAreaOpen",height:"720px",width:"450px"}},"*"),setTimeout(function(){cfListOpenWhileAssistantOpen()},300)):$("#message-back-button").trigger("click")}if(activeAgentImagesLoaded||activateRecentAgentsImages(),attachClickFlag=!0,$(".convertfox-messanger-emoji-select").removeClass("is-open"),$(".convertfox-messanger-gif-select").removeClass("is-open"),setTimeout(function(){$(".convertfox-messanger-emoji-select, .convertfox-messanger-gif-select").css("display","block"),$(".convertfox-messanger-emoji-select, .convertfox-messanger-gif-select").css("height",0)},1e3),$("#convertfoxChat").addClass("hide-default-bubble"),$("#convertfoxChat").hasClass("hide-default-bubble"))e();else var a=setInterval(function(){$("#convertfoxChat").hasClass("hide-default-bubble")&&(e(),clearInterval(a))},1e3);cfQueryString.cfDeviceType&&$("#convertfox-chat-mobile-close").css("right","10px")}function openLeadBotConversation(e,a){if(!isBotPresent&&isConversationLoaded){if(a.split("|").indexOf(e.id.toString())<0&&cfLeadBotIds.indexOf(e.id)<0){isBotPresent=!0;var t=generateChatRandomId();addingBotNotification(e,!0,t),createLeadBot(e,t)}}else isConversationLoaded||setTimeout(function(){openLeadBotConversation(e,a)},500)}function addingBotNotification(e,a,t){$("#convertfoxBubble").hasClass("is-active")||"none"!=$(".triggered-chat-container").css("display")||(cfCurrentConversationId="",(a||"sent"==e.status)&&(isNotificationPresent=!0,parent.postMessage({funName:"setChatBoxHeight",params:{status:"chatAreaOpen",height:"200px",width:"440px",mode:"openNotification"}},"*"),botNotificationContent(e,a,t),$(".notification-chat-container").show(),$("#convertfoxChat").addClass("box-shadow-padding"),$("#chat-conversation-area").hide(),$("#conversation-list-area").hide(),$(".triggered-chat-container").hide()))}function botNotificationContent(e,a,t){if($(".notification-chat-container").attr("data-notification-id",t),a)var s=$.trim(e.greeting_message);else var s=$.trim(e.message_content);var n='<div class="notification-user-image"><img src="'+chatBotIconUrl+'"><span class="agent-status online" style="display: none;"></span></div>';$(".notification-user-image").replaceWith(n);var o='<div class="notification-chat-text"><h4>'+escapeHtml(translateBot)+'</h4><div class="notification-display-message add-linkify-tag cf-bot">'+s+"</div></div></div>";$(".notification-chat-content .notification-chat-text").replaceWith(o),$(".add-linkify-tag").linkify({target:"_blank"})}function addingLeadBotAdminMessage(e,a,t){if("question"===e&&null==a.question);else{if(void 0==t)var s=generateChatRandomId();else var s=t;var n=addingLeadBotMessageBubble(e,a,s);$(".convertfox-messanger-messages").append(n),$(".add-linkify-tag").linkify({target:"_blank"}),changeTextColor()}}function addingLeadBotMessageBubble(e,a,t,s){var n,o=!1,r="";if("welcomeMessage"===e?(r=a.greeting_message,o=!0):"question"===e?r=a.question.question_text:"lead_bot_greeting"===e||"lead_bot_response"===e?(r=a.message_content,o=!0):"lead_bot_goal_message"===e?r=a.message_content:"lead_bot_question"===e&&(n=JSON.parse(a.message_content),r=n.question_text),r=convertTextToEmoji(r,!0),void 0==s||s)if("question"===e)"capture_email"===a.question.question_type&&(lastQuestionId=a.question.id,handleTypingArea(!0));else if("lead_bot_question"===e){var i=JSON.parse(a.message_content);"capture_email"===i.question_type&&(lastQuestionId=i.id,handleTypingArea(!0))}else"lead_bot_response"===e?void 0!=a.lead_bot_response_type&&"invalid_response"===a.lead_bot_response_type&&handleTypingArea(!0):handleTypingArea();else handleTypingArea();var c='<div class="convertfox-messanger-content '+addingMarginBottom(o)+'"  id="'+t+'" data-chat-message-status="'+getMessageStatus(a)+'"> <div class="convertfox-messanger-chat-message"> <div class="convertfox-messanger-message-avatar '+addingOpacity(o)+'"><img src='+chatBotIconUrl+"></div> ";return c+="lead_bot_question"===e?'<div class="convertfox-messanger-chat-message-body" data-question-id="'+n.id+'"> ':"question"===e?'<div class="convertfox-messanger-chat-message-body" data-question-id="'+a.question.id+'"> ':'<div class="convertfox-messanger-chat-message-body"> ',o&&(c+='<div class="message-name"> <span>'+translateBot+"</span></div>"),void 0!=r&&(1==r.split(" ").length&&r.length<=2&&checkSingleEmojiText(r,!1)?c+=' <div class="convertfox-messanger-message-bubble  add-linkify-tag show-single-emoji">'+r+"</div> ":c+=' <div class="convertfox-messanger-message-bubble add-linkify-tag show-emojis">'+r+"</div> "),c+="lead_bot_greeting"===e||"lead_bot_response"===e||"lead_bot_goal_message"===e||"lead_bot_question"===e?'<div class="message-status convertfox-messenger-tooltip" data-tooltip="'+moment(a.created_at).format("Do MMM YYYY, hh:mm A")+'"> <span><time class="timestamp" data-livestamp="'+a.created_at+'" value="'+a.created_at+'">'+moment(a.created_at).fromNow()+"</time></span></div> ":'<div class="message-status convertfox-messenger-tooltip" data-tooltip="'+moment(a.created_at).format("Do MMM YYYY, hh:mm A")+'"> <span><time class="timestamp" data-livestamp="'+moment().format()+'" value="'+moment().format()+'">'+moment().fromNow()+"</time></span> </div> ",c+="</div> </div> </div>","question"===e&&null!=a.question?c+=addingLeadBotQuestionChoices(a.question):isBotConversation&&"lead_bot_question"===e&&(void 0==s||s)&&(c+=addingLeadBotQuestionChoices(n)),c}function getMessageStatus(e){return void 0!=e.status?e.status:"sent"}
function createLeadBot(e,a,t){var s={conversation_identifier:cfRandomIdGenerate(applicationId),assistant_id:e.id,person_random_id:randomId,message_temp_ids:{lead_bot_greeting:a}};$.ajax({method:"POST",url:serverProtocol+cfSubdomain+serverDomain+"/projects/"+applicationId+"/end_user_bots.json",data:s,type:"JSON"}).done(function(a){parent.postMessage({funName:"setPromptInitiated",params:{}},"*"),parent.postMessage({funName:"setLeadBotId",params:{id:e.id}},"*"),$("#convertfoxBubble").hasClass("is-active")||(cfCurrentConversationId=a.data.messages[0].conversation_identifier,currentConversationDetails={data:a.data.messages[0]})}).error(function(e){})}function addingMarginBottom(e){return e?"cf-m-b-0":""}function addingOpacity(e){return e?"":"cf-opacity-0"}function addingLeadBotQuestionChoices(e){var a=e.choices,t=a.length,s="";if(t){s+='<div class="convertfox-messanger-content cf-choices-section" data-question-id="'+e.id+'"> <div class="convertfox-messanger-chat-message"> <div class="chatbot-buttons">';for(var n=0;n<t;n++)s+='<button type="button" id="'+a[n].id+'" onclick="sendQuestionResponse(this)">'+a[n].choice_text+"</button>";s+="</div></div></div>"}return s}function addingLeadBotEndUserMessage(e,a){var t=e;if(void 0==a)var s=generateChatRandomId();else var s=a;$(".cf-sent-status").each(function(){$(this).remove()});var n='<div class="convertfox-messanger-content" id="'+s+'" data-chat-message-status=""> <div class="convertfox-messanger-chat-message primary"> <div class="convertfox-messanger-chat-message-body"> ';return 1==t.split(" ").length&&t.length<=2&&checkSingleEmojiText(t)?n+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-single-emoji">'+t+"</div> ":n+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-emojis">'+t+"</div>",n+='<div class="message-status convertfox-messenger-tooltip" data-tooltip="'+moment().format("Do MMM YYYY, hh:mm A")+'" id="cf-status-'+s+'"> <span>Sending..</span> </div></div> </div> </div>',$(".convertfox-messanger-messages").append(n),$(".add-linkify-tag").linkify({target:"_blank"}),changeTextColor(),cfScrollChatAreaToBottom(0),s}function sendQuestionResponse(e,a){if(a){var t=$("#conversationChatArea").val(),s=addingLeadBotEndUserMessage(t);$("#conversationChatArea").val("");var n=$(".convertfox-messanger-content").last().attr("data-question-id");n||(n=lastQuestionId)}else{var o=$(e).attr("id"),n=$(e).parents(".cf-choices-section").attr("data-question-id");$(e).parents(".cf-choices-section").hide();var s=addingLeadBotEndUserMessage($(e).html())}var r={conversation_identifier:cfCurrentConversationId,question_id:n,page_title:parentPageTitle,request_from_url:document.referrer,message_temp_ids:{lead_bot_user_response:s}};a?r.response_text=t:r.choice_id=o,$.ajax({method:"POST",url:serverProtocol+cfSubdomain+serverDomain+"/projects/"+applicationId+"/end_user_bot_responses.json",data:r,type:"JSON"}).done(function(s){var n=s.data.messages;if($(e).parents(".cf-choices-section").remove(),n.length){handleTypingArea(),cfCurrentConversationId=n[0].conversation_identifier;for(var o=0;o<n.length;o++)"lead_bot_user_response"===n[o].message_type&&0!=$("#"+n[o].message_temp_id).length&&($("#"+n[o].message_temp_id).attr("data-chat-message-status",n[o].status),$("#cf-status-"+n[o].message_temp_id).attr("id","cf-status-"+n[o].id),$("#cf-status-"+n[o].id).html('<span><time class="timestamp" data-livestamp="'+n[o].created_at+'" value="'+n[o].created_at+'">'+moment(n[o].created_at).fromNow()+'</time></span><span class="cf-sent-status"></span>'),$("#"+n[o].message_temp_id).attr("id",n[o].id)),a&&(isBotEmailPresent=!1,"lead_bot_response"===n[o].message_type&&void 0!=n[o].lead_bot_response_type&&"valid_response"==n[o].lead_bot_response_type&&(void 0!=s.data.user_type&&parent.postMessage({funName:"updateFormSessionData",params:{userType:s.data.user_type,userEmail:t,randomId:randomId,chatReload:!1}},"*"),void 0!=s.data.identified&&parent.postMessage({funName:"setIdentifyEmailStatusAfterGetChatMail",params:{identify:s}},"*"),cfUserEmail=t,void 0!=s.data.ga_integrated&&null!=s.data.ga_integrated&&s.data.ga_integrated&&parent.postMessage({funName:"sendGoogleAnalytics",params:{method:"emailCapture"}},"*")))}}).error(function(t){$("#cf-status-"+s).find("span").text(translateFailed+"..").css("color","#fa7360"),a?handleTypingArea(!0):422==t.status&&"The conversation is no more a bot conversation"==t.responseJSON.errors?($("#cf-status-"+s).find("span").text("Bot conversation is ended..").css("color","#fa7360"),removedLeadBotUserResponseMessage(s)):removedLeadBotUserResponseMessage(s,e)})}function removedLeadBotUserResponseMessage(e,a){setTimeout(function(){$(".convertfox-messanger-content#"+e).remove(),void 0!=a&&$(a).parents(".cf-choices-section").show()},2e3)}function handleTypingArea(e){e&&isBotConversation?($("#conversationChatArea").attr("placeholder",translateEnterYourEmailAddress),$("#chat-conversation-area").addClass("cf-allow-cursor"),conversationTextAreaFocus(),isBotPresent=!0,isBotEmailPresent=!0):(isBotEmailPresent=!1,isBotConversation?($("#conversationChatArea").attr("placeholder",translateChooseResponse),$("#chat-conversation-area").addClass("cf-lead-bot"),$("#chat-conversation-area").removeClass("cf-allow-cursor"),$("#conversationChatArea:focus").blur()):($("#chat-conversation-area").removeClass("cf-lead-bot"),$("#chat-conversation-area").removeClass("cf-allow-cursor"),$("#conversationChatArea").attr("placeholder",translateWriteReply),conversationTextAreaFocus()))}function sendUpdatedEmailAddress(e){var a=$("#cfChatEmail").val();$("#cfSendEmailForm").attr("disabled",!0);var t=randomId,s={person_random_id:t,email:a};void 0!=e&&(s.has_consent=e),$("#cfEmailStatus").removeClass("cf-chat-error"),$("#cfEmailStatus").addClass("cf-chat-success"),$("#cfChatEmail").attr("disabled","disabled"),$("#cfEmailStatus").text(translateThanksNotifyYou),$("#gdprOptionSetting").hide(),$.ajax({method:"POST",url:serverProtocol+cfSubdomain+serverDomain+"/update_email_address",data:s,type:"JSON"}).done(function(e){if($("#cfSendEmailForm").html(tickSvg()),void 0!=e.data&&parent.postMessage({funName:"updateFormSessionData",params:{userType:e.data.user_type,userEmail:a,randomId:t,chatReload:!1}},"*"),e.data.identified&&parent.postMessage({funName:"setIdentifyEmailStatusAfterGetChatMail",params:{identify:e}},"*"),cfUserEmail=a,void 0!=e.data.ga_integrated&&null!=e.data.ga_integrated&&e.data.ga_integrated&&parent.postMessage({funName:"sendGoogleAnalytics",params:{method:"emailCapture"}},"*"),void 0!=e.data&&void 0!=e.data.qualification_data){var s=e.data.qualification_data,n=[];qualificationSettings.forEach(function(e){s[e.name]&&n.push(e.name)}),qualificationSettings=qualificationSettings.filter(function(e){return-1===n.indexOf(e.name)})}getQualificationAttributes(),$("#gdprOptionSetting").hide()}).error(function(e){var a="";void 0!=e.responseText&&(a=JSON.parse(e.responseText).error.message),$("#cfChatEmail").attr("disabled",!1),$("#cfEmailStatus").removeClass("cf-chat-success"),$("#cfSendEmailForm").attr("disabled",!1),$("#cfSendEmailForm").removeAttr("disabled"),$("#cfSendEmailForm").html(paperPlaneSvg()),$("#cfEmailStatus").addClass("cf-chat-error"),$("#cfEmailStatus").html(a)})}function sendGdprAcceptence(e){sendUpdatedEmailAddress(e)}function getMeetingDetail(e,a,t){if(""!=e.users_profile.profile_link&&void 0!=e.users_profile.profile_link){if(""!=e.meeting_link.link&&void 0!=e.meeting_link.link)var s=e.meeting_link.link;var n=domainName+"/"+e.users_profile.profile_link+"/"+s+"/get_time_slots_for_a_week.json";if(a)checkExistingMeetingStatus(t,s),$.ajax({method:"GET",url:n,type:"JSON",retryLimit:5,tryCount:0}).done(function(a){if(profileLink=e.users_profile.profile_link,meeting=JSON.parse(a.meeting_link),agentTimeZone=meeting.time_zone,scheduledSlotsForWeek=a.scheduled_slots_for_a_week,bufferTime=meeting.buffer_time,maxMeetingsCount=meeting.max_meeting_count,minScheduleNotice=meeting.minimum_notice_time,meetingCountsPerDate=a.scheduled_date_count,durations=a.durations,agentMeetingAvailability=[],agentAvailabityUserTimeZone=[],cfServerCurrentTime=a.current_time_in_utc,unavailability=a.unavailability,!t){var n=getMeetingSchedulerUI(e,a);checkExistingMeetingStatus(t,s),$(".convertfox-messanger-content#"+e.id).replaceWith(n),initMeetingScheduler(e),setTimeout(function(){cfScrollChatAreaToBottom(500)},1500)}$(".select-timezone-picker").val(moment.tz.guess()),isMeetingLastState=!1}).error(function(e){422!=e.status&&this.tryCount<=this.retryLimit&&(this.tryCount++,$.ajax(this))});else{var o=domainName+"/"+e.users_profile.profile_link+"/"+s+"?message_identifier="+cfCurrentConversationId+"-"+e.id,r=getMeetingLink(e.status,e.id,o);$(".convertfox-messanger-content#"+e.id).replaceWith(r)}}}function checkExistingMeetingStatus(e,a){var t=$(".convertfox-messanger-content[data-meeting-status=initiated]");if(t.length>0&&!e){var s=$(t).attr("id"),n=domainName+"/"+$(t).attr("data-profile-link")+"/"+a+"?message_identifier="+cfCurrentConversationId+"-"+s,o=$(t).attr("data-chat-message-status"),r=getMeetingLink(o,s,n);$(t).replaceWith(r)}}function getMeetingLink(e,a,t){return'<div class="convertfox-messanger-content" id="'+a+'" data-chat-message-status="'+e+'"><div class="convertfox-messanger-chat-message"> <div class="convertfox-messanger-chat-message-body"> <div class="convertfox-messanger-message-bubble"> <a href="'+t+'" target="_blank"><strong>Click here</strong></a> to book a meeting.</div></div></div>'}function getMeetingSchedulerUI(e,a){var t='<div class="convertfox-messanger-content cf-meeting-schedule" id="'+e.id+'" data-meeting-status="'+e.meeting_status+'" data-profile-link="'+e.users_profile.profile_link+'" data-chat-message-status="'+e.status+'"> <div class="convertfox-messanger-chat-message"><div class="convertfox-messanger-schedule-meeting"><div class="convertfox-meeting-scheduler"><div class="convertfox-meeting-scheduler--card" id="convertfox-meeting-scheduler--card"><div class="convertfox-meeting-scheduler--card-tabs" id="convertfox-meeting-scheduler--card-tabs"><div class="convertfox-meeting-scheduler--card-tabs-inner">';return t+=getTakeYourPickScreen(a)+getMeetingSlotScreen()+getUserDetailsScreen(a)+getConfirmationScreen(e,a)+getShowingStatuScreen(e),t+="</div></div></div></div></div></div></div>"}function getTakeYourPickScreen(e){var a='<div class="convertfox-meeting-scheduler--card-tabs-item"><div class="convertfox-meeting-scheduler--card-header"><h3>Take your pick</h3></div><div class="convertfox-meeting-scheduler--card-body">';return a+=getTimeZoneList()+getDurationHtml(e.durations),a+="</div></div>"}function getMeetingSlotScreen(){return'<div class="convertfox-meeting-scheduler--card-tabs-item"><div class="convertfox-meeting-scheduler--card-header --nav"><div class="card-header--nav --prev"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16"><desc>Prev</desc><g fill="none"><g style="stroke-width:2;stroke:#383647"><g transform="translate(-864 -392)translate(792 269)translate(81.5 131)rotate(-360)translate(-81.5 -131)translate(74 125)"><path d="M15 6L0 6"/><polyline points="6.2 0 0 6 6.2 12"/></g></g></g></svg></div><h3> March 10, 2018</h3><div class="card-header--nav --next"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16"><desc>Next</desc><g fill="none"><g style="stroke-width:2;stroke:#383647"><g transform="translate(-1064 -392)translate(792 269)translate(279.5 131)rotate(-180)translate(-279.5 -131)translate(272 125)"><path d="M15 6L0 6"/><polyline points="6.2 0 0 6 6.2 12"/></g></g></g></svg></div></div><div class="convertfox-meeting-scheduler--card-body"><div class="select-day" id="select-day"></div><div class="select-time" id="select-time" style="display: none;"></div></div></div>'}function getUserDetailsScreen(e){return'<div class="convertfox-meeting-scheduler--card-tabs-item"><div class="convertfox-meeting-scheduler--card-header"><h3>Confirm meeting</h3></div><div class="convertfox-meeting-scheduler--card-body"><div class="confirm-meeting-form"><form id="meeting-form">'+getOtherDetail(e.invitee_other_questions)+'<div class="form-group"><button type="submit" class="btn btn-block" id="schedule-meeting" disabled>Schedule a Meeting </button></div></form></div></div></div>'}function getConfirmationScreen(e){return'<div class="convertfox-meeting-scheduler--card-tabs-item"><div class="convertfox-meeting-scheduler--card-body"><div class="confirm-meeting">'+agentProfile(e)+'<h4>Wednesday, March 10, 2018</h4><p>1:30 AM-2:00 AM, GMT + 05:50 (India)</p><button type="button" class="btn btn-block" id="confirm-meeting">Confirm Meeting </button><span class="confirm-edit"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><desc>Edit</desc><g fill="none"><g fill="#AFBBC1"><path d="M7.1 3L0.2 9.9C0.1 10 0 10.1 0 10.3L0 13.4C0 13.8 0.2 14 0.6 14L3.7 14C3.8 14 4 13.9 4.1 13.8L11 6.9 7.1 3Z"/><path d="M13.8 3.5L10.5 0.2C10.2-0.1 9.8-0.1 9.5 0.2L8 1.7 12.3 6 13.8 4.5C14.1 4.2 14.1 3.8 13.8 3.5Z"/></g> </g> </svg></span></div> </div> </div>'}function getShowingStatuScreen(e){return'<div class="convertfox-meeting-scheduler--card-tabs-item"><div class="convertfox-meeting-scheduler--card-body"><div class="confirm-meeting meeting-status">'+agentProfile(e)+'<div class="confirm-icon"><svg width="44px" height="44px" viewBox="0 0 44 44" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><desc>Check</desc><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="7-Schedule-a-meeting-Copy" transform="translate(-2320.000000, -473.000000)"><g id="05" transform="translate(2155.000000, 269.000000)"><g id="Group-27" transform="translate(165.000000, 204.000000)"><circle id="Oval" fill="#ee6a25" cx="22" cy="22" r="22"></circle><g id="check-2" transform="translate(16.000000, 18.000000)" stroke="#FFFFFF" stroke-linecap="square" stroke-width="2"><g id="Shape"><polyline points="0 3.69230769 4.2 8 12 0"></polyline></g> </g> </g> </g> </g> </g> </svg></div><h4>Booking confirmed</h4><p class="sm">Wednesday,March 10, 2018 <span>1:30 AM-2:00 AM, GMT + 05:50 (India)</span> </p></div></div></div>'}function getDurationHtml(e){var a='<div class="select-minutes" id="select-minutes">';return e.length>0?e.forEach(function(e,t){a+='<div class="select-minutes-item"><input type="radio" name="select-minutes" id="'+e.slot_duration+'min" value="'+e.slot_duration+'"><label for="'+e.slot_duration+'min">'+e.slot_duration+" Minutes</label></div>"}):a+="<div>No available duration</div>",a+="</div>"}function getTimeZoneList(){momentTimezones=moment.tz.names().sort(function(e,a){var t=parseInt(moment.tz(e).format("ZZ")),s=parseInt(moment.tz(a).format("ZZ"));return t<s?-1:t>s?1:0});var e='<div class="select-timezone"><select class="select-timezone-picker">';return momentTimezones.forEach(function(a){e+='<option value="'+a+'">GMT '+moment.tz(a).format("Z")+" "+a+"</option>"}),e+="</select></div>"}function getOtherDetail(e){var a="";return e.length>0&&e.forEach(function(e,t){var s="";void 0!=e.required&&"1"==e.required&&(s="required"),a+='<div class="form-group invitee-other-details" ><label class="sr-only">'+e.name+'</label><input type="text" class="form-control" placeholder="'+e.name+'" id="meeting-'+e.name.toLowerCase()+'" '+s+"></div>"}),a}function initMeetingScheduler(e){!function(){function a(){$("#"+e.id+" #convertfox-meeting-scheduler--card").addClass("shrink"),setTimeout(function(){$("#"+e.id+" #convertfox-meeting-scheduler--card").removeClass("shrink")},500),o.eq(d).addClass("active"),o.eq(d).siblings().removeClass("active"),n.css("transform","translateX(-"+c+"%)"),c+=l,d++}function t(){$("#"+e.id+" #select-day").empty(),$("#"+e.id+" #select-time").empty(),defaultUserSlot=[],availabilitySlot=[];var a=$("#"+e.id+" .select-timezone-picker").val();null==a&&(a=moment.tz.guess()),dates=getDaysBetweenDates(moment.tz(cfServerCurrentTime,"YYYY-MM-DD HH:mm:ss z",a),moment.tz(cfServerCurrentTime,"YYYY-MM-DD HH:mm:ss z",a).add(60,"days")),formattedDateSets=[],count=1,dates.forEach(function(e){constructDefaultUserSlot(e,a,cfServerCurrentTime),formattedDateSets.push('<div class="select-day-item" dateAttr="'+e.format(userDateFormat)+'" count="'+count+'"><input type="radio" name="select-day" id="'+e.format("MMMDDdddd")+'" value="'+e.clone().tz(agentTimeZone).format(userDateFormat)+'"><label for="'+e.format("MMMDDdddd")+'">'+e.format("ddd")+"<span>"+e.format("DD")+"</span></label></div>"),count+=1});for(var t=0;t<7;t++)$("#"+e.id+" .select-day").append(formattedDateSets[t]);$("#"+e.id+" .card-header--nav.--prev").addClass("cf-disabled"),$("#"+e.id+" .convertfox-meeting-scheduler--card-header.--nav").find("h3").text(moment($("#"+e.id+" .select-day .select-day-item").first().attr("dateAttr"),userDateFormat).format("MMMM DD, YYYY"))}function s(a){$("#"+e.id+" #select-time").empty(),a.forEach(function(a){$("#"+e.id+" #select-time").append('<div class="select-time-item" timeAttr="'+a.format("HH:mm")+'"><input type="radio" name="select-time" id="'+a.format("HH:mm")+'" value="'+a.clone().format("DD/MM/YYYY HH:mm:ss Z")+'"><label for="'+a.format("HH:mm")+'">'+a.format("hh:mm A")+"</label></div>")})}var n=$("#"+e.id+" #convertfox-meeting-scheduler--card-tabs").find(".convertfox-meeting-scheduler--card-tabs-inner"),o=$("#"+e.id+" .convertfox-meeting-scheduler--card-tabs-item"),r=n.children().length,i=100*r,c=100/r,l=100/r,d=1;n.css("width",i+"%"),o.eq(d-1).addClass("active").siblings().removeClass("active"),$("#"+e.id+" #select-minutes .select-minutes-item").on("click",function(s){if($(this).find("input[type='radio']:checked").length){$(this).addClass("pointer-none"),durationId=parseInt($(this).find("input[type='radio']:checked").val()),durations.map(function(e,a){if(e.slot_duration==durationId)return currentSlotDuration=e.slot_duration,!0}),t();var n=$("#"+e.id+" .select-timezone-picker").val();if(null==n&&(n=moment.tz.guess()),getProperAgentMeetingAvailabilityTimeDetails(meeting.availability),convertAgentAvailToUserAvail(agentMeetingAvailability,n,cfServerCurrentTime),agentMeetingAvailability.length)for(var o=0;o<7;o++){var r=$("#"+e.id+" .select-day .select-day-item")[o];void 0!=r&&getAvailabilitySlots(agentAvailabityUserTimeZone,r,scheduledSlotsForWeek,n,cfServerCurrentTime,unavailability)}m(e),setTimeout(function(){$("#"+e.id+" #select-minutes .select-minutes-item").removeClass("pointer-none"),a()},400)}}),$("#"+e.id+" #select-time").on("click",function(t){$(this).find("input[type='radio']:checked").length&&($(this).addClass("pointer-none"),setTimeout(function(){$("#"+e.id+" #select-time").removeClass("pointer-none"),a()},400))}),$("#"+e.id+" #confirm-meeting").on("click",function(t){$(this).addClass("pointer-none");for(var s=domainName+"/"+profileLink+"/scheduled_meetings.json",n={},o=$("#"+e.id+" #meeting-form"),r=o.find(".invitee-other-details"),i=0;i<r.length;i++){var l=$(r[i]).find("input").attr("id").split("-")[1],m=$(r[i]).find("input").val();"name"!==l&&"email"!=l&&(n[l]=m)}var g={scheduled_meeting:{invitee_name:$("#"+e.id+" #meeting-name").val(),invitee_email:$("#"+e.id+" #meeting-email").val(),invitee_other_details:n,duration:$("#"+e.id+" #select-minutes .select-minutes-item input:radio:checked").val(),scheduled_time:$("#"+e.id+" #select-time .select-time-item input:radio:checked").val(),user_time_zone:$("#"+e.id+" .select-timezone-picker").val(),message_id:e.id,meeting_link_id:e.meeting_link.id}};$("#"+e.id+" #confirm-meeting").attr("disabled",!0),isMeetingLastState=!0,$.ajax({type:"POST",url:s,dataType:"JSON",contentType:"application/json",data:JSON.stringify(g)}).done(function(t){$("#"+e.id+" #confirm-meeting").removeClass("pointer-none"),$("#"+e.id+" #confirm-meeting").attr("disabled",!1),$("#"+e.id+" .confirm-meeting.meeting-status h4").text("Booking confirmed"),$("#"+e.id+" .confirm-meeting.meeting-status p").html(timeToScheduleMoment.format("dddd")+", "+timeToScheduleMoment.format("MMMM DD")+", "+timeToScheduleMoment.format("YYYY")+"<span>"+timeToScheduleMoment.format("hh:mm A")+" - "+endTime+" GMT "+timeToScheduleMoment.format("Z")+" ("+t.message.scheduled_meeting.user_time_zone+") </span>"),isMeetingLastState&&(a(),setTimeout(function(){$("#"+e.id+" .convertfox-meeting-scheduler--card-tabs-item").eq(4).addClass("active"),$("#"+e.id+" .convertfox-meeting-scheduler--card-tabs-item").eq(4).siblings().removeClass("active"),$("#"+e.id+" .convertfox-meeting-scheduler--card-tabs-item").eq(4).siblings().remove(),$("#"+e.id+" .convertfox-meeting-scheduler--card-tabs-inner").css({width:"auto",transform:"translateX(0%)"})},1e3)),setTimeout(function(){$("#"+e.id).attr("data-meeting-status","scheduled")},1e3),isMeetingLastState=!1}).error(function(t){if($("#"+e.id+" #confirm-meeting").removeClass("pointer-none"),422==t.status){var s=["Invitee name","Invitee email"];-1!=t.responseJSON.error.message.indexOf(s[0])||-1!=t.responseJSON.error.message.indexOf(s[1])?(d=2,c=40):(d=0,c=0,$("#"+e.id+" .convertfox-meeting-scheduler--card-body input:radio").prop("checked",!1),getMeetingDetail(e,!0,!0)),$(".convertfox-error-toast-message").css("z-index",3),$(".convertfox-error-toast-message span").html(t.responseJSON.error.message),$(".convertfox-error-toast-message").css("opacity",1),setTimeout(function(){$(".convertfox-error-toast-message").css("opacity",0),$(".convertfox-error-toast-message").css("z-index",0),a(),$("#"+e.id+" #confirm-meeting").attr("disabled",!1)},3e3)}else d=0,c=0,$("#"+e.id+" .convertfox-meeting-scheduler--card-body input:radio").prop("checked",!1),getMeetingDetail(e,!0,!0),$(".convertfox-error-toast-message").css("z-index",3),$(".convertfox-error-toast-message span").html("Please try again."),$(".convertfox-error-toast-message").css("opacity",1),setTimeout(function(){$(".convertfox-error-toast-message").css("opacity",0),$(".convertfox-error-toast-message").css("z-index",0),a(),$("#"+e.id+" #confirm-meeting").attr("disabled",!1)},3e3)})}),$("#"+e.id+" #schedule-meeting").on("click",function(t){$(this).addClass("pointer-none"),t.preventDefault();var s,n=!0,o=$("#"+e.id+" #meeting-form"),r=o.find('input[type="text"]:required'),i=$("#"+e.id+" #meeting-email").val();if(void 0!=r&&"undefined"!=r&&null!=r&&"null"!=r)for(var c=0;c<r.length;c++)if(""==(s=$(r[c]).val().trim())||void 0==s||null==s){n=!1;break}var l=$("#"+e.id+" .select-timezone-picker").val();null==l&&(l=moment.tz.guess()),cfValidatateChatEmailId(i)&&n?(setTimeout(function(){$("#"+e.id+" #schedule-meeting").removeClass("pointer-none"),a()},400),timeToSchedule=$("#"+e.id+" #select-time .select-time-item input:radio:checked").val(),durationId=$("#"+e.id+" #select-minutes .select-minutes-item input:radio:checked").val(),durationValue=null,durations.map(function(e,a){if(e.slot_duration==durationId)return durationValue=e.slot_duration,!0}),timeToScheduleMoment=moment.tz(timeToSchedule,"DD/MM/YYYY HH:mm:SS Z",l),endTime=timeToScheduleMoment.clone().add(durationValue,"minutes").format("hh:mm A"),$("#"+e.id+" .confirm-meeting h4").text(timeToScheduleMoment.format("dddd")+", "+timeToScheduleMoment.format("MMMM DD")+", "+timeToScheduleMoment.format("YYYY")),$("#"+e.id+" .confirm-meeting p").text(timeToScheduleMoment.format("hh:mm A")+" - "+endTime+" GMT "+timeToScheduleMoment.format("Z")+" ("+l+")")):$("#"+e.id+" #schedule-meeting").attr("disabled",!0)}),$("#"+e.id+" #select-day").on("click",function(a){$("#"+e.id+" #select-time").slideDown(300)}),$("#"+e.id+" input").on("keyup change",function(a){var t=!0,s=$("#"+e.id+" #meeting-form"),n=s.find('input[type="text"]:required'),o=$("#"+e.id+" #meeting-email").val();if(void 0!=n&&"undefined"!=n&&null!=n&&"null"!=n)for(var r=0;r<n.length;r++)if(currentFieldvalue=$(n[r]).val().trim(),""==currentFieldvalue||void 0==currentFieldvalue||null==currentFieldvalue){t=!1;break}cfValidatateChatEmailId(o)&&t?$("#"+e.id+" #schedule-meeting").attr("disabled",!1):$("#"+e.id+" #schedule-meeting").attr("disabled",!0)}),$("#"+e.id+" .confirm-edit").on("click",function(a){c=100/r,d=1,$("#"+e.id+" #convertfox-meeting-scheduler--card").addClass("shrink"),setTimeout(function(){$("#"+e.id+" #convertfox-meeting-scheduler--card").removeClass("shrink")},500),o.eq(0).addClass("active"),o.eq(0).siblings().removeClass("active"),n.css("transform","translateX(0%)"),$("#"+e.id+" .convertfox-meeting-scheduler--card-body input:radio").prop("checked",!1)});var m=function(){var a=!0,t=1;$("#"+e.id+" .select-day .select-day-item input:radio").each(function(){if(!$(this).is(":disabled"))return $(this).prop("checked",!0),$(this).parent().trigger("click"),$("#"+e.id+" .convertfox-meeting-scheduler--card-header.--nav").find("h3").text(moment($(this).parent().attr("dateAttr"),userDateFormat).format("MMMM DD, YYYY")),a=!1,!1;t++}),a&&($("#"+e.id+" .convertfox-meeting-scheduler--card-header.--nav").find("h3").text("No slots for this week."),$("#"+e.id+" .select-time").hide())};$(document).on("click","#"+e.id+" .select-day .select-day-item",function(a){var t=$(this).attr("dateattr");$(this).find("input:radio").prop("checked",!0),$("#"+e.id+" .convertfox-meeting-scheduler--card-header.--nav").find("h3").text(moment(t,userDateFormat).format("MMMM DD, YYYY")),s(availabilitySlot[t])}),$("#"+e.id+" .card-header--nav.--next").on("click",function(){$("#"+e.id+" .card-header--nav.--prev").removeClass("cf-disabled"),$("#"+e.id+" #select-time").empty();for(var a=parseInt($("#"+e.id+" .select-day .select-day-item").last().attr("count")),t=[],s=a;s<a+7;s++)t.push(formattedDateSets[s]);$("#"+e.id+" #select-day").empty(),t.forEach(function(a){$("#"+e.id+" #select-day").append(a)}),a=parseInt($("#"+e.id+" .select-day .select-day-item").last().attr("count"));var n=parseInt($("#"+e.id+" .select-day .select-day-item").first().attr("count"));60==a?($("#"+e.id+" .card-header--nav.--prev").removeClass("cf-disabled"),$("#"+e.id+" .card-header--nav.--next").addClass("cf-disabled")):$("#"+e.id+" .card-header--nav.--next").removeClass("cf-disabled"),1!=n&&$("#"+e.id+" .card-header--nav.--prev").removeClass("cf-disabled"),$("#"+e.id+" .convertfox-meeting-scheduler--card-header.--nav").find("h3").text(moment($("#"+e.id+" .select-day .select-day-item").first().attr("dateAttr"),userDateFormat).format("MMMM DD, YYYY"));var o=$("#"+e.id+" .select-timezone-picker").val();null==o&&(o=moment.tz.guess());for(var r=0;r<7;r++){var i=$("#"+e.id+" .select-day .select-day-item")[r];void 0!=i&&getAvailabilitySlots(agentAvailabityUserTimeZone,i,scheduledSlotsForWeek,o,null,unavailability)}m()}),$("#"+e.id+" .card-header--nav.--prev").on("click",function(){$("#"+e.id+" #select-time").empty();for(var a=parseInt($("#"+e.id+" .select-day .select-day-item").first().attr("count")),t=[],s=a-8;s<a-1;s++)t.push(formattedDateSets[s]);$("#"+e.id+" #select-day").empty(),t.forEach(function(a){$("#"+e.id+" #select-day").append(a)}),a=parseInt($("#"+e.id+" .select-day .select-day-item").first().attr("count"));var n=parseInt($("#"+e.id+" .select-day .select-day-item").last().attr("count"));1==a?$("#"+e.id+" .card-header--nav.--prev").addClass("cf-disabled"):$("#"+e.id+" .card-header--nav.--prev").removeClass("cf-disabled"),60!=n&&$("#"+e.id+" .card-header--nav.--next").removeClass("cf-disabled"),$("#"+e.id+" .convertfox-meeting-scheduler--card-header.--nav").find("h3").text(moment($("#"+e.id+" .select-day .select-day-item").first().attr("dateAttr"),userDateFormat).format("MMMM DD, YYYY"));var o=$("#"+e.id+" .select-timezone-picker").val();null==o&&(o=moment.tz.guess());for(var r=0;r<7;r++){var i=$("#"+e.id+" .select-day .select-day-item")[r];void 0!=i&&getAvailabilitySlots(agentAvailabityUserTimeZone,i,scheduledSlotsForWeek,o,null,unavailability)}m()})}()}function addingMeetingStatus(e){var a='<div class="convertfox-messanger-content cf-meeting-schedule" id="'+e.id+'" data-chat-message-status="'+e.status+'"><div class="convertfox-messanger-chat-message"><div class="convertfox-messanger-schedule-meeting"><div class="convertfox-meeting-scheduler"><div class="convertfox-meeting-scheduler--card" id="convertfox-meeting-scheduler--card"><div class="convertfox-meeting-scheduler--card-tabs" id="convertfox-meeting-scheduler--card-tabs"><div class="convertfox-meeting-scheduler--card-tabs-inner">'+getShowingStatuScreen(e)+"</div> </div> </div> </div></div></div></div></div>";if($("#"+e.id).length>0){4==$("#"+e.id+" .convertfox-meeting-scheduler--card-tabs-item.active").index()||isMeetingLastState?(isMeetingLastState=!1,$("#"+e.id).attr("data-meeting-status","scheduled"),$("#"+e.id+" #convertfox-meeting-scheduler--card").addClass("shrink"),setTimeout(function(){$("#"+e.id+" #convertfox-meeting-scheduler--card").removeClass("shrink")},500),$("#"+e.id+" .convertfox-meeting-scheduler--card-tabs-item").eq(4).addClass("active"),$("#"+e.id+" .convertfox-meeting-scheduler--card-tabs-item").eq(4).siblings().removeClass("active"),$("#"+e.id+" .convertfox-meeting-scheduler--card-tabs-item").eq(4).siblings().remove(),$("#"+e.id+" .convertfox-meeting-scheduler--card-tabs-inner").css({width:"auto",transform:"translateX(0%)"})):($("#"+e.id).replaceWith(a),$("#"+e.id+" .convertfox-meeting-scheduler--card-tabs-item").addClass("active"))}else $(".convertfox-messanger-messages").append(a),$("#"+e.id+" .convertfox-meeting-scheduler--card-tabs-item").addClass("active");var t=moment.unix(e.scheduled_meeting.scheduled_timestamp),s=moment.tz(t,e.scheduled_meeting.user_time_zone),n=e.scheduled_meeting.slot_duration,o=s.clone().add(n,"minutes").format("hh:mm A");if("cancelled"==e.meeting_status){$("#"+e.id+" .confirm-meeting.meeting-status h4").text("Booking cancelled"),$("#"+e.id+" .confirm-icon").addClass("cancel");$("#"+e.id+" .confirm-icon svg").replaceWith('<svg width="44px" height="44px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve"><circle style="fill:#D75A4A;" cx="25" cy="25" r="25"/><polyline style="fill:none;stroke:#FFFFFF;stroke-width:2;stroke-linecap:round;stroke-miterlimit:10;" points="16,34 25,25 34,16"/><polyline style="fill:none;stroke:#FFFFFF;stroke-width:2;stroke-linecap:round;stroke-miterlimit:10;" points="16,16 25,25 34,34"/></svg>')}else $("#"+e.id+" .confirm-meeting.meeting-status h4").text("Booking confirmed");$("#"+e.id+" .confirm-meeting.meeting-status p").html(s.format("dddd")+", "+s.format("MMMM DD")+", "+s.format("YYYY")+"<span>"+s.format("hh:mm A")+" - "+o+" GMT "+s.format("Z")+" ("+e.scheduled_meeting.user_time_zone+") </span>")}function disableDate(e){$("#select-time").empty(),$(e).find("input[type=radio]").prop("checked",!1),$(e).find("input[type=radio]").prop("disabled",!0),$(e).addClass("cf-disabled")}function agentProfile(e){return void 0!=e.users_profile.profile_photo_url&&null!=e.users_profile.profile_photo_url?'<img src="'+e.users_profile.profile_photo_url+'" class="avatar">':cfGetProfileImage(e.users_profile.user_details,"xxl avatar")}function addingNotification(e){$(".notification-chat-container").attr("data-notification-id",e.id),cfCurrentConversationId=e.conversation_identifier,currentConversationDetails={data:e};var a=escapeHtml($.trim(e.message_content));null==e.user.avatar_url||e.user.avatar_url.includes("avatar.tobi.sh")?$(".notification-user-image .cf-profile-avatar").length?($(".notification-user-image  .cf-profile-avatar").text(e.user.avatar_letter),$(".notification-user-image .cf-profile-avatar").css("background",e.user.avatar_background)):addingNotificationMessageUserImage(e):$(".notification-user-image img").length?$(".notification-user-image img").attr("src")!=e.user.avatar_url&&addingNotificationMessageUserImage(e):addingNotificationMessageUserImage(e);var t='<div class="notification-chat-text"><h4>'+escapeHtml(e.user.full_name)+"</h4>"
;null!=e.deleted_at&&void 0!=e.deleted_at?t+='<div class="notification-display-message deleted-message">':t+='<div class="notification-display-message">',t+='<p class="add-linkify-tag">',e.is_attachment||void 0!=e.is_gif&&e.is_gif?t+=" Attachment"+paperClipSvg()+" </p>":t+=a+"</p>",t+="</div></div>",$(".notification-chat-content .notification-chat-text").replaceWith(t),$.each(recentActiveAgents,function(a,t){if(null!=t&&void 0!=t&&null!=t.full_name&&void 0!=t.full_name&&e.user.full_name==t.full_name)return void $(".notification-user-image .agent-status.online").show()}),$(".add-linkify-tag").linkify({target:"_blank"})}function addingNotificationMessageUserImage(e){var a='<div class="notification-user-image">'+cfGetProfileImage(e.user,"xl")+'<span class="agent-status online" style="display: none;"></span></div>';$(".notification-user-image").replaceWith(a)}function conversationTextAreaFocus(){cfQueryString.cfDeviceType||isBotConversation||$("#conversationChatArea").focus()}var cfEmojisArray=[{fname:":grinning:",search_name:["grinning face","happy face","smiley face"],val:"",unicode:"1f600"},{fname:":smiley:",search_name:["grinning face","smiley face","happy face","happy","grinning face with open mouth","smiling face with open mouth"],val:"",unicode:"1f603"},{fname:":smile:",search_name:["smile face","grinning face","happy face","grinning face with squinting eyes","smilling face with open mouth and smiling eyes"],val:"",unicode:"1f604"},{fname:":grin:",search_name:["grinning face with smiling eyes","grin"],val:"",unicode:"1f601"},{fname:":laughing:",search_name:["big grin","laughing","closed-eyes smile","grinning face with tightly closed eyes","smiling face with open mouth and tightly-closed eyes"],val:"",unicode:"1f606"},{fname:":sweat_smile:",search_name:["sweat_smile","exercise","happy sweat","grinning face with squinting eyes and sweat drop","smiling face with open mouth and cold sweat"],val:"",unicode:"1f605"},{fname:":joy:",search_name:["joy","laughing","laughing crying","laughing tears","face with tears of joy"],val:"",unicode:"1f602"},{fname:":rolling_on_the_floor_laughing:",search_name:["rolling on the floor laughing"],val:"",unicode:"1f923"},{fname:":blush:",search_name:["blush","happy face","smile","smiley face","smiling face with squinting eyes"],val:"",unicode:"1f60a"},{fname:":innocent:",search_name:["innocent","angel","halo","smiling face with halo"],val:"",unicode:"1f607"},{fname:":slightly_smiling_face:",search_name:["slightly smiling face","slightly happy","this is fine"],val:"",unicode:"1f642"},{fname:":upside_down_face:",search_name:["upside down face","sarcasm","silly"],val:"",unicode:"1f643"},{fname:":wink:",search_name:["wink","wink face","winky face","winking face"],val:"",unicode:"1f609"},{fname:":relieved:",search_name:["relieved","content","pleased","relieved face"],val:"",unicode:"1f60c"},{fname:":heart_eyes:",search_name:["heart eyes","heart face","smiling face with heart-shaped eyes"],val:"",unicode:"1f60d"},{fname:":kissing_heart:",search_name:["kissing heart","blow a kiss","blowing kiss","kissing","face blowing a kiss","face throwing a kiss"],val:"",unicode:"1f618"},{fname:":kissing:",search_name:["kissing","duck face","kissy face","whistling","kissing face"],val:"",unicode:"1f617"},{fname:":kissing_closed_eyes:",search_name:["kissing closed eyes","kiss face","kissy face","kissing face with closed eyes"],val:"",unicode:"1f61a"},{fname:":yum:",search_name:["yum","goofy","hungry","smiling face licking lips","face savouring delicious food"],val:"",unicode:"1f60b"},{fname:":stuck_out_tongue_winking_eye:",search_name:["stuck out tongue winking eye","crazy","crazy face","winking face with stuck-out tongue","face with stuck-out tongue and winking eye"],val:"",unicode:"1f61c"},{fname:":stuck_out_tongue_closed_eyes:",search_name:["stuck out tongue closed eyes","tongue out","face with stuck out tongue and tightly-closed eyes"],val:"",unicode:"1f61d"},{fname:":stuck_out_tongue:",search_name:["stuck out tongue","cheeky","tongue face","tongue-out","face with stuck-out tongue"],val:"",unicode:"1f61b"},{fname:":disappointed:",search_name:["disappointed","sad","sadface","disappointed face"],val:"",unicode:"1f61e"},{fname:":pensive:",search_name:["pensive","sad","sadface","sorrowful","sad pensive face"],val:"",unicode:"1f614"},{fname:":worried:",search_name:["worried","sad","sadface","worried face"],val:"",unicode:"1f61f"},{fname:":confused:",search_name:["confused","Nonplussed","puzzled","confused face"],val:"",unicode:"1f615"},{fname:":slightly_frowning_face:",search_name:["slightly frowning face","slightly sad","slightly frowning face"],val:"",unicode:"1f641"},{fname:":persevere:",search_name:["persevere","megafrown","frowning face","white frowning face"],val:"",unicode:"1f623"},{fname:":confounded:",search_name:["confounded","quivering mouth","scrunched face","confounded face"],val:"",unicode:"1f616"},{fname:":kissing_smiling_eyes:",search_name:["kissing smiling eyes","kiss face","kissy","whistle","whistling","kissing face with squinting eyes"],val:"",unicode:"1f619"},{fname:":zany_face:",search_name:["crazy eyes","excited","wild","goofy face","grinning face with one large and one small eye"],val:"",unicode:"1f92a"},{fname:":money_mouth:",search_name:["money mouth","money mouth face","dollar sign eyes","rich"],val:"",unicode:"1f911"},{fname:":hugging:",search_name:["hugging","hugging face","hug","hugging","hugs","happy face with hugging hands"],val:"",unicode:"1f917"},{fname:":face_with_hand_over_mouth:",search_name:["face with hand over mouth","blushing face with hand over mouth","smiling face with smiling eyes and hand covering mouth"],val:"",unicode:"1f92d"},{fname:":shushing_face:",search_name:["shushing face","hush","quiet","shh","face with finger covering closed lips"],val:"",unicode:"1f92b"},{fname:":thinking:",search_name:["thinking","chin thumb","thinker","throwing shade","thinking face"],val:"",unicode:"1f914"},{fname:":zipper_mouth:",search_name:["zipper mouth","zipper mouth face","lips sealed","sealed lips","zip it","face with a zipper mouth"],val:"",unicode:"1f910"},{fname:":face_with_raised_eyebrow:",search_name:["face with raised eyebrow","colbert","the rock","face with one eyebrow raised"],val:"",unicode:"1f928"},{fname:":neutral_face:",search_name:["neutral face","face with straight mouth","straight faced"],val:"",unicode:"1f610"},{fname:":expressionless:",search_name:["expressionless","face with straight mouth","straight face"],val:"",unicode:"1f611"},{fname:":no_mouth:",search_name:["no mouth","blank face","mouthless","silence","silent","face without mouth"],val:"",unicode:"1f636"},{fname:":unamused:",search_name:["unamused","dissatisfied","meh","side-eye","unimpressed","unamused face"],val:"",unicode:"1f612"},{fname:":smirk:",search_name:["smirk","smirking face","flirting","sexual face","smug face","suggestive smile"],val:"",unicode:"1f60f"},{fname:":rolling_eyes:",search_name:["rolling eyes","face with rolling eyes","eye roll"],val:"",unicode:"1f644"},{fname:":grimacing:",search_name:["grimacing face","awkward","eek","foot in mouth","nervous","snapchat mutual #1 best friend"],val:"",unicode:"1f62c"},{fname:":liar:",search_name:["liar","lying face","long nose","pinocchio"],val:"",unicode:"1f925"},{fname:":sleepy_face:",search_name:["sleepy face","side tear","snot bubble"],val:"",unicode:"1f62a"},{fname:":drool:",search_name:["drool","drooling face"],val:"",unicode:"1f924"},{fname:":thermometer_face:",search_name:["thermometer face","face with thermometer","sick","ill"],val:"",unicode:"1f912"},{fname:":mask:",search_name:["mask","bird flu","doctor","mask face","sick","surgical mask","sars","face with medical mask"],val:"",unicode:"1f637"},{fname:":sleeping:",search_name:["sleeping","sleeping face","sleep face","snoring","zzz face"],val:"",unicode:"1f634"},{fname:":head_bandage:",search_name:["head bandage","face with head bandage","bandaged head","clumsy","injured"],val:"",unicode:"1f915"},{fname:":sneeze:",search_name:["sneeze","sneezing face","gesundheit"],val:"",unicode:"1f927"},{fname:":dizzy_face:",search_name:["dizzy face","cross eyes face","spiral eyes face"],val:"",unicode:"1f635"},{fname:":exploding_head:",search_name:["exploding head","mind blown","shocked face with exploding head"],val:"",unicode:"1f92f"},{fname:":cowboy:",search_name:["cowboy","face with cowboy hat","cowboy face"],val:"",unicode:"1f920"},{fname:":smiling_face_with_sunglasses:",search_name:["smiling face with sunglasses","cool","sunglasses","mutual best friends"],val:"",unicode:"1f60e"},{fname:":nerd_face:",search_name:["nerd face","nerdy"],val:"",unicode:"1f913"},{fname:":face_with_monocle:",search_name:["face with monocle"],val:"",unicode:"1f9d0"},{fname:":open_mouth:",search_name:["open mouth","surprised","surprised face with open mouth"],val:"",unicode:"1f62e"},{fname:":hushed:",search_name:["open mouth","surprise","surprised face"],val:"",unicode:"1f62f"},{fname:":astonished:",search_name:["astonished","drunk face","gasping face","shocked face"],val:"",unicode:"1f632"},{fname:":flushed:",search_name:["flushed","flushed face","shame","embarrassed","face with wide open eyes"],val:"",unicode:"1f633"},{fname:":frowning:",search_name:["frowning","yawning","frowning face with open mouth"],val:"",unicode:"1f626"},{fname:":anguished:",search_name:["anguished","pained face","anguished face"],val:"",unicode:"1f627"},{fname:":fearful:",search_name:["fearful","scared","surprised","fearful face"],val:"",unicode:"1f628"},{fname:":cold_sweat:",search_name:["cold sweat","blue face","concerned face","nervous face","face with open mouth and cold sweat"],val:"",unicode:"1f630"},{fname:":disappointed_relieved:",search_name:["disappointed relieved","eyebrow sweat","disappointed but relieved face"],val:"",unicode:"1f625"},{fname:":cry:",search_name:["cry","tear","crying face"],val:"",unicode:"1f622"},{fname:":sob:",search_name:["sob","crying","bawling","sad tears","sobbing","loudly crying face"],val:"",unicode:"1f62d"},{fname:":scream:",search_name:["scream","home alone","scream","screaming face","face screaming in fear"],val:"",unicode:"1f631"},{fname:":sweat:",search_name:["sweat","hard work","sad sweat face","face with cold sweat"],val:"",unicode:"1f613"},{fname:":weary:",search_name:["weary","distraught face","wailing","weary face"],val:"",unicode:"1f629"},{fname:":tired_face:",search_name:["tired face","exhausted","fed up","distraught face"],val:"",unicode:"1f62b"},{fname:":triumph:",search_name:["triumph","steaming","mad face","frustrated","airing of grievances","huffing with anger face","face with look of triumph"],val:"",unicode:"1f624"},{fname:":rage:",search_name:["rage","angry face","grumpy face","mad face","red face","pouting face"],val:"",unicode:"1f621"},{fname:":angry:",search_name:["angry","grumpy face","angry face"],val:"",unicode:"1f620"},{fname:":face_with_symbols_on_mouth:",search_name:["angry","face with symbols on mouth"],val:"",unicode:"1f92c"},{fname:":wave:",search_name:["wave","goodbye","hand wave","hello","waving","waving hand sign"],val:"",unicode:"1f44b"},{fname:":raised_back_of_hand:",search_name:["back hand","back of hand","raised back of hand"],val:"",unicode:"1f91a"},{fname:":hand_with_fingers_splayed:",search_name:["hand with fingers splayed","five hand","splayed hand","raised hand with fingers splayed"],val:"",unicode:"1f590"},{fname:":raised_hand:",search_name:["raised hand","high five","stop","raised hand"],val:"",unicode:"270b"},{fname:":raised_hand_with_part_between_middle_and_ring_fingers:",search_name:["raised hand with part between middle and ring fingers","vulcan","spock","star trek","vulcan salute","hand with fingers split between middle and ring fingers","raised hand with part between middle and ring fingers"],val:"",unicode:"1f596"},{fname:":ok_hand:",search_name:["ok hand","okay","perfect","ok hand sign"],val:"",unicode:"1f44c"},{fname:":good_luck:",search_name:["fingers crossed","good luck","hand with index and middle fingers crossed"],val:"",unicode:"1f91e"},{fname:":love_you_gesture:",search_name:["love you gesture","i love you hand sign"],val:"",unicode:"1f91f"},{fname:":sign_of_the_horns:",search_name:["sign of the horns","devil fingers","heavy metal","rock on"],val:"",unicode:"1f918"},{fname:":call_me:",search_name:["call me","phone hand","shaka","call me hand"],val:"",unicode:"1f919"},{fname:":point_left:",search_name:["point left","backhand index finger pointing left","white left pointing backhand index"],val:"",unicode:"1f448"},{fname:":point_right:",search_name:["point right","backhand index finger pointing right","white right pointing backhand index"],val:"",unicode:"1f449"},{fname:":point_up_2:",search_name:["point up","pointing up","backhand index finger pointing up","white up pointing backhand index"],val:"",unicode:"1f446"},{fname:":middle_finger:",search_name:["middle finger","dito medio","flipping the bird","rude finger","reversed hand with middle finger extended"],val:"",unicode:"1f595"},{fname:":point_down:",search_name:["point down","pointing down","backhand index finger pointing down","white down pointing backhand index"],val:"",unicode:"1f447"},{fname:":thumbup:",search_name:["thumbup","like","yes","thumbs up","thumbs up sign"],val:"",unicode:"1f44d"},{fname:":thumbdown:",search_name:["thumbdown","dislike","bad","no","thumbs down","thumbs down sign"],val:"",unicode:"1f44e"},{fname:":fist:",search_name:["fist","fist pump","raised pump"],val:"",unicode:"270a"},{fname:":punch:",search_name:["punch","brofist","fist bump","closed fist","fisted hand sign"],val:"",unicode:"1f44a"},{fname:":left_fist:",search_name:["left fist","left fist bump","left facing first"],val:"",unicode:"1f91b"},{fname:":right_fist:",search_name:["right fist","right fist bump","right facing first"],val:"",unicode:"1f91c"},{fname:":clap:",search_name:["clap","applause","applause","clapping","golf clap","round of applause","clapping hands","clapping hands sign"],val:"",unicode:"1f44f"},{fname:":raised_hands:",search_name:["arms in the air","raised hands","banzai","festivus miracle","hallelujah","praise hands","two hands","hands raised in celebration","person raising both hands in celebration"],val:"",unicode:"1f64c"},{fname:":open_hands:",search_name:["open hands","hug","jazz hands","open hands","open hands sign"],val:"",unicode:"1f450"},{fname:":palms_up_together:",search_name:["palms up together","dua","palms together facing up"],val:"",unicode:"1f932"},{fname:":handshake:",search_name:["handshake","shaking hands"],val:"",unicode:"1f91d"},{fname:":pray:",search_name:["pray","high five","namaste","please","prayer","thank you","hands pressed together","person with folded hands"],val:"",unicode:"1f64f"}],asciiRegexp="(\\*\\\\0\\/\\*|\\*\\\\O\\/\\*|\\-___\\-|\\:'\\-\\)|'\\:\\-\\)|'\\:\\-D|\\>\\:\\-\\)|>\\:\\-\\)|'\\:\\-\\(|\\>\\:\\-\\(|>\\:\\-\\(|\\:'\\-\\(|O\\:\\-\\)|0\\:\\-3|0\\:\\-\\)|0;\\^\\)|O;\\-\\)|0;\\-\\)|O\\:\\-3|\\-__\\-|\\:\\-|\\:\\-|\\<\\/3|<\\/3|\\:'\\)|\\:\\-D|'\\:\\)|'\\=\\)|'\\:D|'\\=D|\\>\\:\\)|>\\:\\)|\\>;\\)|>;\\)|\\>\\=\\)|>\\=\\)|;\\-\\)|\\*\\-\\)|;\\-\\]|;\\^\\)|'\\:\\(|'\\=\\(|\\:\\-\\*|\\:\\^\\*|\\>\\:P|>\\:P|X\\-P|\\>\\:\\[|>\\:\\[|\\:\\-\\(|\\:\\-\\[|\\>\\:\\(|>\\:\\(|\\:'\\(|;\\-\\(|\\>\\.\\<|>\\.<|#\\-\\)|%\\-\\)|X\\-\\)|\\\\0\\/|\\\\O\\/|0\\:3|0\\:\\)|O\\:\\)|O\\=\\)|O\\:3|B\\-\\)|8\\-\\)|B\\-D|8\\-D|\\-_\\-|\\>\\:\\\\|>\\:\\\\|\\>\\:\\/|>\\:\\/|\\:\\-\\/|\\:\\-\\.|\\:\\-P|\\:|\\:|\\:\\-b|\\:\\-O|O_O|\\>\\:O|>\\:O|\\:\\-X|\\:\\-#|\\:\\-\\)|\\(y\\)|\\<3|<3|\\:D|\\=D|;\\)|\\*\\)|;\\]|;D|\\:\\*|\\=\\*|\\:\\(|\\:\\[|\\=\\(|\\:@|;\\(|D\\:|\\:\\$|\\=\\$|#\\)|%\\)|X\\)|B\\)|8\\)|\\:\\/|\\:\\\\|\\=\\/|\\=\\\\|\\:L|\\=L|\\:P|\\=P|\\:b|\\:O|\\:X|\\:#|\\=X|\\=#|\\:\\)|\\=\\]|\\=\\)|\\:\\])",regAscii=new RegExp("<object[^>]*>.*?</object>|<span[^>]*>.*?</span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|((\\s|^)"+asciiRegexp+"(?=\\s|$|[!,.?]))","gi"),asciiEmojiList={":D":"1f603",":-D":"1f603","=D":"1f603",">:)":"1f606",">;)":"1f606",">:-)":"1f606",">=)":"1f606","':)":"1f605","':-)":"1f605","'=)":"1f605","':D":"1f605","':-D":"1f605","'=D":"1f605",":')":"1f602",":'-)":"1f602","O:-)":"1f607","0:-3":"1f607","0:3":"1f607","0:-)":"1f607","0:)":"1f607","0;^)":"1f607","O:)":"1f607","O;-)":"1f607","O=)":"1f607","0;-)":"1f607","O:-3":"1f607","O:3":"1f607",":)":"1f642",":-)":"1f642","=]":"1f642","=)":"1f642",":]":"1f642",";)":"1f609",";-)":"1f609","*-)":"1f609","*)":"1f609",";-]":"1f609",";]":"1f609",";D":"1f609",";^)":"1f609",":*":"1f618",":-*":"1f618","=*":"1f618",":^*":"1f618",">:P":"1f61c","X-P":"1f61c","x-p":"1f61c",":P":"1f61b",":-P":"1f61b","=P":"1f61b",":-p":"1f61b",":p":"1f61b","=p":"1f61b",":-":"1f61b",":":"1f61b",":":"1f61b",":-":"1f61b",":-b":"1f61b",":b":"1f61b","d:":"1f61b",">:[":"1f61e",":-(":"1f61e",":(":"1f61e",":-[":"1f61e",":[":"1f61e","=(":"1f61e",">:\\":"1f615",">:/":"1f615",":-/":"1f615",":-.":"1f615",":/":"1f615",":\\":"1f615","=/":"1f615","=\\":"1f615",":L":"1f615","=L":"1f615",">.<":"1f623",">.<":"1f64c","-_-":"1f611","-__-":"1f611","-___-":"1f611",":-X":"1f636",":X":"1f636",":-#":"1f636",":#":"1f636","=X":"1f636","=x":"1f636",":x":"1f636",":-x":"1f636","=#":"1f636","#-)":"1f635","#)":"1f635","%-)":"1f635","%)":"1f635","X)":"1f635","X-)":"1f635","B-)":"1f60e","B)":"1f60e","8)":"1f60e","8-)":"1f60e","B-D":"1f60e","8-D":"1f60e",":-O":"1f62e",":O":"1f62e",":-o":"1f62e",":o":"1f62e",O_O:"1f62e",">:O":"1f62e",":$":"1f633","=$":"1f633","D:":"1f628",":'(":"1f622",":'-(":"1f622",";(":"1f622",";-(":"1f622","':(":"1f613","':-(":"1f613","'=(":"1f613",">:(":"1f620",">:-(":"1f620",":@":"1f620"};$(".convertfox-messanger-emoji-search-input").keyup(function(e){$(".convertfox-messanger-emoji-search-input").val($(this).val());var a;if(""!=$(this).val()&&void 0!=$(this).val()){var t=$.trim($(this).val());a=cfEmojisArray.filter(function(e){for(var a=0;a<e.search_name.length;a++)if(-1!=e.search_name[a].indexOf(t))return e})}else a=cfEmojisArray;$(".emojis-wrap").empty(),$.each(a,function(e,a){var t='<span data-val="'+a.search_name+'">'+a.val+"</span>";$(".emojis-wrap").append(t)})});var parentWindowFocusStatus=!1,iFrameWindowFocusStatus=!1,cfconversationListEnd=!1,parentPageTitle="",cfSubdomain=cfQueryString.cfSubdomain,applicationId=cfQueryString.cfApplicationId,randomId=cfQueryString.cfRandomId,cfCurrentConversationId="",serverProtocol=cfQueryString.cfServerProtocol,serverDomain=cfQueryString.cfServerDomain,cfIdentified=cfQueryString.cfIdentified,typing=!1,timeout=void 0,parentWindowHeight=0,parentWindowWidth=0,currentConversationDetails="",attachedImagesColor="",cfUnseenTriggeredChatCount=0,cfParentPageTitleInterval="",cfParentPageOriginalTitle=!1,cfUnreadMessageUserObject="",cfPageFocusSetIntervalInitiated=!1,cfPageNotFocusSetIntervalInitiated=!1,cfParentPageTitleIntervalOnPageNotFocus="",messageId="",regexPattern=/[a-zA-Z0-9!@#$%\^&*(){}[\]<>?\/|\-.,:;"']/,typingInterval=null,chatBoxShownConversation=[],chatAreaValue="",conversation_room=applicationId+"/"+personId,agents_status_room=applicationId+"/agents_status",chat_setting_room=applicationId+"/settings",ping_received=!1,old_conversation_room,backgroundSettingColor,rgbValues,textColor,colorContrast,backgroundRgba,userBlocked=!1,specialTextColor="",textColor="",DynamicTextColor="",newUnreadMessageCount=0,dateRegex=/^[0-3]?[0-9].[0-3]?[0-9].(?:[0-9]{2})?[0-9]{2}$/,qualificationSettings=rawQualificationSettings,totalUnreadMessageCount=0,isChatOpen=!0,isBotPresent=!1,isBotConversation=!1,isBotEmailPresent=!1,isNotificationPresent=!1,isConversationLoaded=!1,latestScrolledMessageId=null,getEmailBoxShownInCurrCon=null,activeAgentImagesLoaded=!1,gifTenorApikey="TPO4BJ8VSTBU",gifAnonId="",nextOffset="",debounceTimeout=null,gifImageLoading=!0,isFoundMeetingInitiated=!1,attachClickFlag=!1,clickFlag=!1;if(chatWindowMobileView(cfQueryString.cfDeviceType),"right"==chatLeftRrRightAlignment?$("#convertfoxChat").removeClass("gist-left-alignment"):$("#convertfoxChat").addClass("gist-left-alignment"),allowIncomingAttch?($(".convertfox-messanger-textarea textarea, .triggered-chat-text-area textarea").removeClass("attachment-not-allowed"),$(".convertfox-messanger-message-actions").removeClass("not-allowed-attachment")):($(".convertfox-messanger-textarea textarea, .triggered-chat-text-area textarea").addClass("attachment-not-allowed"),$(".convertfox-messanger-message-file").css("display","none"),$(".convertfox-messanger-message-actions").addClass("not-allowed-attachment")),$("#cfSendEmailForm").attr("disabled",!0),jQuery.fn.extend({insertAtCaret:function(e){return this.each(function(a){if(document.selection)this.focus(),sel=document.selection.createRange(),sel.text=e,this.focus();else if(this.selectionStart||"0"==this.selectionStart){var t=this.selectionStart,s=this.selectionEnd,n=this.scrollTop;this.value=this.value.substring(0,t)+e+this.value.substring(s,this.value.length),this.focus(),this.selectionStart=t+e.length,this.selectionEnd=t+e.length,this.scrollTop=n}else this.value+=e,this.focus()})}}),isSettingPresent){if(isSettingIconCustomColorPresnt?(backgroundSettingColor=settingIconCustomColor,rgbValues=backgroundSettingColor.replace("rgba(","").replace("rgb(","").replace(")","").split(","),rgbValues.length>=3?(colorContrast=Math.round((299*parseInt(rgbValues[0])+587*parseInt(rgbValues[1])+114*parseInt(rgbValues[2]))/1e3),textColor=parseInt(colorContrast)>125?"#2D3138":"#FFFFFF",void 0!=rgbValues[3]&&colorContrast<125&&(parseFloat(rgbValues[3])<=.5&&(0==parseFloat(rgbValues[3])&&$(".convertfox-bubble-inner, .convertfox-messanger-chat-sendbutton, .convertfox-messanger-sendbutton, .primary .convertfox-messanger-message-bubble, .primary .convertfox-messanger-message-bubble a").css("background-color","#FFFFFF"),textColor="#2D3138"),parseFloat(rgbValues[3])<.9&&$(".convertfox-back-white").css("cssText","height:100% !important;"))):(backgroundRgba=hexToRgbA(backgroundSettingColor),rgbValues=backgroundRgba.replace("rgba(","").replace("rgb(","").replace(")","").split(","),rgbValues.length&&(colorContrast=Math.round((299*parseInt(rgbValues[0])+587*parseInt(rgbValues[1])+114*parseInt(rgbValues[2]))/1e3),textColor=colorContrast>125?"#2D3138":"#FFFFFF"))):textColor=settingIconTextColor,"#2D3138"==textColor?($(".convertfox-messanger-cross").addClass("dynamic-color-black"),$(".reply-time").addClass("border-top-black")):$(".reply-time").removeClass("border-top-black"),null==chatFontColor?isSettingCustomValuePresent&&(specialTextColor=settingCustomValue,rgbValues=specialTextColor.replace("rgba(","").replace("rgb(","").replace(")","").split(","),rgbValues.length>=3?(specialTextContrast=Math.round((299*parseInt(rgbValues[0])+587*parseInt(rgbValues[1])+114*parseInt(rgbValues[2]))/1e3),specialTextColor=parseInt(specialTextContrast)>125?"#2D3138":"#FFFFFF",void 0!=rgbValues[3]&&specialTextContrast<125&&(parseFloat(rgbValues[3])<=.5&&(specialTextColor="#2D3138"),parseFloat(rgbValues[3])<.9&&$(".convertfox-back-white").css("cssText","height:100% !important;"))):(specialTextRgba=hexToRgbA(specialTextColor),rgbValues=specialTextRgba.replace("rgba","").replace("rgb(","").replace(")","").split(","),rgbValues.length&&(specialTextContrast=Math.round((299*parseInt(rgbValues[0])+587*parseInt(rgbValues[1])+114*parseInt(rgbValues[2]))/1e3),specialTextColor=specialTextContrast>125?"#2D3138":"#FFFFFF")),$(".convertfox-messanger-home-title, .convertfox-messanget-home-subtitle, .convertfox-messanger-shrink-header-back-icon i, .convertfox-messanger-shrink-header-content, .convertfox-messanger-shrink-header-sub-content, .present-user-avatar p, .convertfox-messanger-chat-title, .convertfox-messanger-chat-subtitle, .convertfox-messanger-chat-back i, .intro-text,  .convertfox-messanger-widget-title, .convertfox-messanger-conversation-title, .convertfox-messanger-conversation-reply h3, .convertfox-messanger-conversation-reply .conversation-reply-time, .convertfox-messanger-conversation-message-preview div, .convertfox-messanger-chat-title, .convertfox-messanger-home-subtitle, .convertfox-messanger-conversation-message-preview div, .convertfox-messanger-widget-active-users .active-agents span, .convertfox-messanger-home-tab a, .convertfox-messanger-message-send span, .reply-time, .convertfox-messanger-shrink-header-active-agents").css("cssText","color:"+specialTextColor+" !important;"),$("g#send, g#send1, g#send3").css("cssText","fill:"+specialTextColor+" !important;"),$("svg g#Chat-Inbox ").css("stroke",specialTextColor),$("svg g#Chat-Inbox ").attr("stroke",specialTextColor),parseInt(specialTextContrast)>125?($(".triggered-chat-cross").addClass("dynamic-color-black"),$(".reply-time").addClass("border-top-black")):($(".triggered-chat-cross").removeClass("dynamic-color-black"),$(".reply-time").removeClass("border-top-black"))):specialTextColor=chatFontColor,isSettingBackgroundValuePresent)if("gradient"===settingBackgroundType){var backgroundValue=settingBackgroundValue;switch(backgroundValue){case"0":attachedImagesColor="#f54654";break;case"1":attachedImagesColor="#2e4ae5";break;case"2":attachedImagesColor="#483baa";break;case"3":attachedImagesColor="#58ceb6";break;case"4":attachedImagesColor="#801f8d";break;case"5":attachedImagesColor="#1db8ab"}}else"color"===settingBackgroundType&&(attachedImagesColor=defaultColors);else attachedImagesColor=settingCustomValue,tiggeredChatRgbValues=attachedImagesColor.replace("rgba(","").replace(")","").split(","),tiggeredChatRgbValues.length>=3&&(triggeredColorContrast=Math.round((299*parseInt(tiggeredChatRgbValues[0])+587*parseInt(tiggeredChatRgbValues[1])+114*parseInt(tiggeredChatRgbValues[2]))/1e3),void 0!=tiggeredChatRgbValues[3]&&0==parseFloat(tiggeredChatRgbValues[3])&&triggeredColorContrast<125&&(attachedImagesColor="#FFFFFF"));$(".triggered-chat-text-container").css("background-color",attachedImagesColor),$(".triggered-chat-close-inner").css("background-color",attachedImagesColor)}else backgroundSettingColor=defaultPrimaryColors,backgroundRgba=hexToRgbA(backgroundSettingColor),rgbValues=backgroundRgba.replace("rgba(","").replace(")","").split(","),rgbValues.length>=3&&(colorContrast=Math.round((299*parseInt(rgbValues[0])+587*parseInt(rgbValues[1])+114*parseInt(rgbValues[2]))/1e3),textColor=colorContrast>125?"#2D3138":"#FFFFFF",void 0!=rgbValues[3]&&colorContrast<125&&(parseFloat(rgbValues[3])<=.5&&(textColor="#2D3138"),parseFloat(rgbValues[3])<.9&&$(".convertfox-back-white").css("cssText","height:100% !important;"))),$(".convertfox-messanger-home-title, .convertfox-messanget-home-subtitle, .convertfox-messanger-shrink-header-back-icon i, .convertfox-messanger-shrink-header-content, .convertfox-messanger-shrink-header-sub-content, .present-user-avatar p, .convertfox-messanger-chat-title, .convertfox-messanger-chat-subtitle, .convertfox-messanger-chat-back i, .intro-text,  .convertfox-messanger-widget-title, .convertfox-messanger-conversation-title, .convertfox-messanger-conversation-reply h3, .convertfox-messanger-conversation-reply .conversation-reply-time, .convertfox-messanger-conversation-message-preview div, .convertfox-messanger-chat-title, .convertfox-messanger-home-subtitle, .convertfox-messanger-conversation-message-preview div,.convertfox-messanger-widget-active-users .active-agents span, .convertfox-messanger-message-photo-text, .convertfox-messanger-home-tab a, .convertfox-messanger-message-send span, .reply-time, .convertfox-messanger-shrink-header-active-agents").css("cssText","color:"+textColor+" !important;"),$("g#send, g#send1, g#send3").css("cssText","fill:"+textColor+" !important;"),$("svg g#Chat-Inbox ").css("stroke",textColor),$("svg g#Chat-Inbox ").attr("stroke",textColor),parseInt(colorContrast)>125?($(".triggered-chat-cross").addClass("dynamic-color-black"),$(".reply-time").addClass("border-top-black")):($(".triggered-chat-cross").removeClass("dynamic-color-black"),$(".reply-time").removeClass("border-top-black"));if($(".convertfox-messanger-home-title, .convertfox-messanget-home-subtitle, .convertfox-messanger-shrink-header-back-icon i, .convertfox-messanger-shrink-header-content, .convertfox-messanger-shrink-header-sub-content, .present-user-avatar p, .convertfox-messanger-chat-title, .convertfox-messanger-chat-subtitle, .convertfox-messanger-chat-back i, .intro-text,  .convertfox-messanger-widget-title, .convertfox-messanger-conversation-title, .convertfox-messanger-conversation-reply h3, .convertfox-messanger-conversation-reply .conversation-reply-time, .convertfox-messanger-conversation-message-preview div, .convertfox-messanger-chat-title, .convertfox-messanger-home-subtitle, .convertfox-messanger-conversation-message-preview div, .convertfox-messanger-widget-active-users .active-agents span, .convertfox-messanger-home-tab a, .convertfox-messanger-message-send span, .reply-time, .convertfox-messanger-shrink-header-active-agents").css("cssText","color:"+specialTextColor+" !important;"),$("g#send, g#send1, g#send3").css("cssText","fill:"+specialTextColor+" !important;"),$("svg g#Chat-Inbox ").css("stroke",specialTextColor),$("svg g#Chat-Inbox ").attr("stroke",specialTextColor),$("head").append("<style>.triggered-chat-cross:before, .triggered-chat-cross:after {background-color:"+specialTextColor+" !important;}</style>"),$(document).on("mouseenter",".convertfox-messanger-message-actions .convertfox-messanger-message-file, .convertfox-messanger-message-actions .convertfox-messanger-message-emojis, .convertfox-messanger-message-actions .convertfox-messanger-message-send",function(e){0==e.currentTarget.className.indexOf("convertfox-messanger-message-file")?$(".convertfox-messanger-message-actions .convertfox-messanger-message-file g#Type-a-message-1,  .convertfox-messanger-message-file path#Shape").css("stroke",attachedImagesColor):0==e.currentTarget.className.indexOf("convertfox-messanger-message-emojis")?($(".convertfox-messanger-message-actions circle#Oval1, .convertfox-messanger-message-actions circle#Oval2,.convertfox-messanger-message-actions circle#Oval3, .convertfox-messanger-message-emojis path#Shape, .convertfox-messanger-message-actions circle#Oval-Copy").css("stroke",attachedImagesColor),$(".convertfox-messanger-message-actions circle#small1, .convertfox-messanger-message-actions circle#small1-Copy, .convertfox-messanger-message-actions circle#small2, .convertfox-messanger-message-actions circle#small2-Copy, .convertfox-messanger-message-actions circle#small3, .convertfox-messanger-message-actions circle#small3-Copy").css("fill",attachedImagesColor)):0==e.currentTarget.className.indexOf("convertfox-messanger-message-gif")&&$(".convertfox-messanger-message-actions .convertfox-messanger-message-gif path#gif-path-2, .convertfox-messanger-message-actions .convertfox-messanger-message-gif path#gif-path-1").css("stroke",attachedImagesColor)}),$(document).on("mouseleave",".convertfox-messanger-message-actions .convertfox-messanger-message-file, .convertfox-messanger-message-actions .convertfox-messanger-message-emojis, .convertfox-messanger-message-actions .convertfox-messanger-message-gif, .convertfox-messanger-message-actions .convertfox-messanger-message-send",function(e){$(".convertfox-messanger-message-actions .convertfox-messanger-message-file g#Type-a-message-1,  .convertfox-messanger-message-file path#Shape").css("stroke","rgb(185, 190, 198)"),$(".convertfox-messanger-emoji-select").hasClass("is-open")||($(".convertfox-messanger-message-actions circle#Oval1, .convertfox-messanger-message-actions circle#Oval2,.convertfox-messanger-message-actions circle#Oval3, .convertfox-messanger-message-emojis path#Shape, .convertfox-messanger-message-actions circle#Oval-Copy, .convertfox-messanger-message-actions path#Shape1").css("stroke","rgb(185, 190, 198)"),
$(".convertfox-messanger-message-actions circle#small1, .convertfox-messanger-message-actions circle#small1-Copy, .convertfox-messanger-message-actions circle#small2, .convertfox-messanger-message-actions circle#small2-Copy, .convertfox-messanger-message-actions circle#small3, .convertfox-messanger-message-actions circle#small3-Copy").css("fill","rgb(185, 190, 198)")),$(".convertfox-messanger-gif-select").hasClass("is-open")||$(".convertfox-messanger-message-actions .convertfox-messanger-message-gif path#gif-path-2, .convertfox-messanger-message-actions .convertfox-messanger-message-gif path#gif-path-1").css("stroke","rgb(185, 190, 198)")}),$(".convertfox-messanger-sendbutton, .convertfox-messanger-sendbutton i, .primary .convertfox-messanger-message-bubble, .convertfox-messanger-chat-sendbutton i, .primary .convertfox-messanger-message-bubble a").css("color",textColor),$(".convertfox-messanger-open-icon svg").css("fill",textColor),0==recentActiveAgents.length?$(".convertfox-messanger-home-agent-status .convertfox-messanger-widget-present").css("display","none"):$(".convertfox-messanger-home-agent-status .convertfox-messanger-widget-present").css("display","block"),0==allActiveAgents.length?$(".is-welcome .convertfox-messanger-home-agent-status .welcome-active-agents, .avatar-3-user").css("display","none"):$(".is-welcome .convertfox-messanger-home-agent-status .welcome-active-agents, .avatar-3-user").css("display","flex"),recentActiveAgents.length>0&&$(".avatar-3-user").addClass("users-"+recentActiveAgents.length),""!=teamIntroText&&($(".minimal .widget-present").addClass("intro-message"),$(".present-body").append('<p class="intro-text">'+teamIntroText+"</p> ")),allActiveAgents.length>1){var moreActiveAgentsCount=allActiveAgents.length-6;moreActiveAgentsCount>0&&$(".welcome-active-agents").append('<span class="user-avatar more-avatar">'+moreActiveAgentsCount+"+</span>")}if(1==allActiveAgents.length?($(".avatar-3-user.users-1 .cf-avatar-3:nth-child(2), .avatar-3-user.users-1 .cf-avatar-3:nth-child(3)").css("display","none"),$(".avatar-3-user img").css({width:"40px",height:"40px"}),$(".third-image").css("display","none"),$(".second-image").css("display","none")):2==allActiveAgents.length&&($(".avatar-3-user.users-1 .cf-avatar-3:nth-child(3)").css("display","none"),$(".third-image").css("display","none")),recentActiveAgents.length>1){var footerName=$(".convertfox-messanger-widget-text").text()+" were online recently.";$(".convertfox-messanger-widget-text").text(footerName)}else{var footerName=$(".convertfox-messanger-widget-text").text()+" was online recently.";$(".convertfox-messanger-widget-text").text(footerName)}socket.on("reconnect_attempt",function(){socket.io.opts.transports=["polling","websocket"]}),socket.connected?emitRoom():socket.on("connect",function(){emitRoom()}),isUserInitiatedChat&&(cfCurrentConversationId="");var typingInterval=null;$(window).on("blur focus",function(e){var a=$(this).data("prevType");document.createElement("div");if(a!=e.type)switch(e.type){case"blur":iFrameWindowFocusStatus=!1,parent.postMessage({funName:"setIphoneFixed",params:{state:"remove"}},"*");break;case"focus":iFrameWindowFocusStatus=!0,parent.postMessage({funName:"setIphoneFixed",params:{state:"add"}},"*"),iFrameWindowFocusStatus&&(cfMessageSeen(),clearInterval(cfParentPageTitleIntervalOnPageNotFocus),void 0!=cfUnreadMessageUserObject&&""!=cfUnreadMessageUserObject&&assignSetIntervalOnPageFocus())}$(this).data("prevType",e.type)}),$("#convertfox-chat-mobile-close").click(function(){if(attachClickFlag=!1,$(".convertfox-messanger-emoji-select, .convertfox-messanger-gif-select").css("display","none"),$("#convertfoxChat").removeClass("is-active mobileViewChat"),$("#convertfoxBubble").removeClass("is-active"),$("#convertfoxMessageWindow").removeClass("is-active"),setTimeout(function(){parent.postMessage({funName:"setChatBoxHeight",params:{status:"chatAreaClose"}},"*")},100),$(".triggered-chat-container, .convertfox-messanger").removeClass("box-shadow-padding"),$(".convertfox-messanger-open-icon img").css("display","block"),$(".convertfox-messanger-open-icon svg").css("display","none"),""!=cfCurrentConversationId&&"none"!=$("#chat-conversation-area").css("display")&&"none"!=$(".convertfox-messanger-chat-header-avatar").css("display")){var e=!1,a=!1,t=$(".convertfox-messanger-chat-header-avatar img").attr("src"),s=$(".convertfox-messanger-chat-header-text .convertfox-messanger-chat-title:first").text(),n=$(".convertfox-messanger-chat-header-avatar .avatar-single-user .cf-profile-avatar").css("background-color");"undefined"!=t&&void 0!=t&&""!=t&&(e=!0,t.includes("avatar.tobi.sh")&&(a=!0)),$(".convertfox-messanger-open-icon").empty(),!e||a?($("#convertfoxContentBubble").removeClass("user-image"),$(".convertfox-messanger-open-icon").removeClass("chat-user-image-container"),$(".convertfox-messanger-open-icon").append(bubbleImgElement)):($(".convertfox-messanger-open-icon").addClass("chat-user-image-container"),$(".convertfox-messanger-open-icon").append('<img class="chatImageWithUserImage" src="'+t+'">'),$("#convertfoxContentBubble").addClass("user-image")),setTimeout(function(){parent.postMessage({funName:"setChatOpenAndOpenConversationStatus",params:{openStatus:"false",openConversationId:cfCurrentConversationId,lastActiveAgentImage:t,lastActiveAgentName:s,lastActiveAgentBackground:n}},"*")},100)}else $(".convertfox-messanger-open-icon").empty(),$("#convertfoxContentBubble").removeClass("user-image"),$(".convertfox-messanger-open-icon").removeClass("chat-user-image-container"),$(".convertfox-messanger-open-icon").append(bubbleImgElement),setTimeout(function(){parent.postMessage({funName:"setChatOpenAndOpenConversationStatus",params:{openStatus:"false",openConversationId:"",lastActiveAgentImage:"",lastActiveAgentName:"",lastActiveAgentBackground:""}},"*")},100);cfQueryString.cfChatOpenConversation="",cfQueryString.cfChatLastActiveAgentImage="",cfQueryString.cfChatLastActiveAgentName="",cfQueryString.cfChatOpenStatus="false",$("#convertfoxChat").hasClass("hide-default-bubble")&&parent.postMessage({funName:"hideDefaultChatBubble",params:{openStatus:"false"}},"*")}),$(document).unbind().on("click touchstart","#convertfoxBubble",function(e){if(!clickFlag)if(clickFlag=!0,setTimeout(function(){clickFlag=!1,attachClickFlag=!0},300),$("#convertfoxBubble").hasClass("is-active")){if(cfMessageSeen(),$(".convertfox-messanger-emoji-select, .convertfox-messanger-gif-select").css("display","none"),$(".notification-chat-container").hide(),$("#convertfoxBubble").removeClass("is-active"),$("#convertfoxMessageWindow").removeClass("is-active"),$("#convertfoxChat").removeClass("is-active mobileViewChat"),cfUpdateOverallUnreadCount(totalUnreadMessageCount),setTimeout(function(){parent.postMessage({funName:"setChatBoxHeight",params:{status:"chatAreaClose"}},"*"),$(".triggered-chat-container, .convertfox-messanger").removeClass("box-shadow-padding")},100),$(".convertfox-messanger-open-icon img").css("display","block"),$(".convertfox-messanger-open-icon svg").css("display","none"),""!=cfCurrentConversationId&&"none"!=$("#chat-conversation-area").css("display")&&"none"!=$(".convertfox-messanger-chat-header-avatar").css("display")){var a=!1,t=$(".convertfox-messanger-chat-header-avatar img").attr("src"),s=$(".convertfox-messanger-chat-header-text .convertfox-messanger-chat-title:first").text(),n=$(".convertfox-messanger-chat-header-avatar .avatar-single-user .cf-profile-avatar").css("background-color");"undefined"!=t&&void 0!=t&&""!=t&&(a=!0),$(".convertfox-messanger-open-icon").empty(),a?($(".convertfox-messanger-open-icon").addClass("chat-user-image-container"),$(".convertfox-messanger-open-icon").append('<img class="chatImageWithUserImage" src="'+t+'">'),$("#convertfoxContentBubble").addClass("user-image")):($("#convertfoxContentBubble").removeClass("user-image"),$(".convertfox-messanger-open-icon").removeClass("chat-user-image-container"),$(".convertfox-messanger-open-icon").append(bubbleImgElement)),setTimeout(function(){parent.postMessage({funName:"setChatOpenAndOpenConversationStatus",params:{openStatus:"false",openConversationId:cfCurrentConversationId,lastActiveAgentImage:t,lastActiveAgentName:s,lastActiveAgentBackground:n}},"*")},100),$("#conversation-list-area").css("display","none")}else $(".convertfox-messanger-open-icon").empty(),$("#convertfoxContentBubble").removeClass("user-image"),$(".convertfox-messanger-open-icon").removeClass("chat-user-image-container"),$(".convertfox-messanger-open-icon").append(bubbleImgElement),setTimeout(function(){parent.postMessage({funName:"setChatOpenAndOpenConversationStatus",params:{openStatus:"false",openConversationId:"",lastActiveAgentImage:"",lastActiveAgentName:"",lastActiveAgentBackground:""}},"*")},100);cfQueryString.cfChatOpenConversation="",cfQueryString.cfChatLastActiveAgentImage="",cfQueryString.cfChatLastActiveAgentName="",cfQueryString.cfChatOpenStatus="false",$(".convertfox-messanger-textarea").removeClass("is-height-auto")}else activeAgentImagesLoaded||activateRecentAgentsImages(),setTimeout(function(){$(".convertfox-messanger-emoji-select, .convertfox-messanger-gif-select").css("display","block"),$(".convertfox-messanger-emoji-select, .convertfox-messanger-gif-select").css("height",0)},1e3),$(".triggered-chat-container, .convertfox-messanger").addClass("box-shadow-padding"),"none"!=$(".triggered-chat-container").css("display")?$(".triggered-chat-text-content").trigger("click"):"none"!=$(".notification-chat-container").css("display")?$(".notification-chat-content").trigger("click"):openRecentConversationMessage(),cfUpdateOverallUnreadCount(totalUnreadMessageCount);return!1}),$(".convertfox-messanger-home-content").scroll(function(){$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation").length>0&&$(this).scrollTop()+$(this).innerHeight()>=$(this)[0].scrollHeight&&!cfconversationListEnd&&cfGetConversationList(!0)}),$(document).on("click",".convertfox-new-message-toast",function(e){$("#convertfoxMessageWindow .convertfox-new-message-toast").remove(),newUnreadMessageCount=0,getEmailBoxShownInCurrCon=null,cfScrollChatAreaToBottom(400)}),$(document).ready(function(){if($.each(cfEmojisArray,function(e,a){var t='<span data-val="'+a.search_name+'">'+a.val+"</span>";$(".emojis-wrap").append(t)}),$("#conversationChatArea").attr("placeholder",translateWriteReply),parent.postMessage({funName:"officeHoursData",params:{}},"*"),moment.locale(locale),cfGetConversationList(!1),$("#convertfoxChat").css("opacity",1),void 0!=cfQueryString.cfChatOpenStatus&&void 0!=cfQueryString.cfChatOpenConversation&&void 0!=cfQueryString.cfChatLastActiveAgentImage){if("false"==cfQueryString.cfChatOpenStatus){if(setTimeout(function(){isNotificationPresent||parent.postMessage({funName:"setChatBoxHeight",params:{status:"chatAreaClose"}},"*")},100),$(".triggered-chat-container, .convertfox-messanger").removeClass("box-shadow-padding"),""!=cfQueryString.cfChatOpenConversation&&""!=cfQueryString.cfChatLastActiveAgentImage){currentConversationDetails={data:{user:{}}},currentConversationDetails.data.conversation_identifier=cfQueryString.cfChatOpenConversation,currentConversationDetails.data.user.avatar_url=cfQueryString.cfChatLastActiveAgentImage,currentConversationDetails.data.user.full_name=cfQueryString.cfChatLastActiveAgentName,cfCurrentConversationId=cfQueryString.cfChatOpenConversation,currentConversationDetails.data.user.avatar_background=cfQueryString.cfChatLastActiveAgentBackground;var e=!1;""!=cfQueryString.cfChatLastActiveAgentImage&&void 0!=cfQueryString.cfChatLastActiveAgentImage&&"undefined"!=cfQueryString.cfChatLastActiveAgentImage&&(e=!0),$(".convertfox-messanger-open-icon").empty(),e?($(".convertfox-messanger-open-icon").addClass("chat-user-image-container"),$(".convertfox-messanger-open-icon").append('<img class="chatImageWithUserImage" src="'+currentConversationDetails.data.user.avatar_url+'">'),$("#convertfoxContentBubble").addClass("user-image")):($("#convertfoxContentBubble").removeClass("user-image"),$(".convertfox-messanger-open-icon").removeClass("chat-user-image-container"),$(".convertfox-messanger-open-icon").append(bubbleImgElement))}}else if("true"==cfQueryString.cfChatOpenStatus)if(""==cfQueryString.cfChatOpenConversation&&""==cfQueryString.cfChatLastActiveAgentImage)0==cfQueryString.cfDeviceType?setTimeout(function(){$("#convertfoxBubble").trigger("click")},1e3):1==cfQueryString.cfDeviceType?setTimeout(function(){isNotificationPresent||parent.postMessage({funName:"setChatBoxHeight",params:{status:"chatAreaClose"}},"*")},100):isNotificationPresent||parent.postMessage({funName:"setChatBoxHeight",params:{status:"chatAreaClose"}},"*");else if(""!=cfQueryString.cfChatOpenConversation&&""!=cfQueryString.cfChatLastActiveAgentImage&&""!=cfQueryString.cfChatLastActiveAgentName)if(currentConversationDetails={data:{user:{}}},currentConversationDetails.data.conversation_identifier=cfQueryString.cfChatOpenConversation,currentConversationDetails.data.user.avatar_url=cfQueryString.cfChatLastActiveAgentImage,currentConversationDetails.data.user.full_name=cfQueryString.cfChatLastActiveAgentName,currentConversationDetails.data.user.avatar_background=cfQueryString.cfChatLastActiveAgentBackground,0==cfQueryString.cfDeviceType)setTimeout(function(){$("#convertfoxBubble").trigger("click")},1e3);else if(1==cfQueryString.cfDeviceType){setTimeout(function(){isNotificationPresent||parent.postMessage({funName:"setChatBoxHeight",params:{status:"chatAreaClose"}},"*")},100);var a="";""!=cfQueryString.cfChatLastActiveAgentImage&&null!=cfQueryString.cfChatLastActiveAgentImage&&(a=cfQueryString.cfChatLastActiveAgentImage.includes("avatar.tobi.sh")),$(".convertfox-messanger-open-icon").empty(),a&&""!=a?($("#convertfoxContentBubble").removeClass("user-image"),$(".convertfox-messanger-open-icon").removeClass("chat-user-image-container"),$(".convertfox-messanger-open-icon").append(bubbleImgElement)):($(".convertfox-messanger-open-icon").addClass("chat-user-image-container"),$(".convertfox-messanger-open-icon").append('<img class="chatImageWithUserImage" src="'+currentConversationDetails.data.user.avatar_url+'">'),$("#convertfoxContentBubble").addClass("user-image"))}else isNotificationPresent||parent.postMessage({funName:"setChatBoxHeight",params:{status:"chatAreaClose"}},"*");else isNotificationPresent||parent.postMessage({funName:"setChatBoxHeight",params:{status:"chatAreaClose"}},"*")}else isNotificationPresent||parent.postMessage({funName:"setChatBoxHeight",params:{status:"chatAreaClose"}},"*");$.isFunction(window.loadHomePageEmoji)&&window.loadHomePageEmoji()}),document.getElementById("convertfox-messanger-messages").addEventListener("scroll",function(){if($("#convertfox-messanger-messages .convertfox-messanger-content").length>0){var e=$(".convertfox-messanger-content").first().attr("id").split("-")[0];isNotTempMessage=!0,e==applicationId&&(isNotTempMessage=!1);0==document.getElementById("convertfox-messanger-messages").scrollTop&&isNotTempMessage&&latestScrolledMessageId!=e&&(latestScrolledMessageId=e,cfGetAllChatMessages(!0),addingLoadMoreSpinner())}isScrollEnd()&&($("#convertfoxMessageWindow .convertfox-new-message-toast").remove(),newUnreadMessageCount=0)}),$(document).on("click","#message-back-button",function(){activeAgentImagesLoaded||activateRecentAgentsImages(),$(".convertfox-messanger-message-actions circle#Oval1, .convertfox-messanger-message-actions circle#Oval2,.convertfox-messanger-message-actions circle#Oval3, .convertfox-messanger-message-emojis path#Shape, .convertfox-messanger-message-actions circle#Oval-Copy, .convertfox-messanger-message-actions path#Shape1, .convertfox-messanger-message-actions .convertfox-messanger-message-gif path#gif-path-2, .convertfox-messanger-message-actions .convertfox-messanger-message-gif path#gif-path-1").css("stroke","rgb(185, 190, 198)"),$(".convertfox-messanger-message-actions circle#small1, .convertfox-messanger-message-actions circle#small1-Copy, .convertfox-messanger-message-actions circle#small2, .convertfox-messanger-message-actions circle#small2-Copy, .convertfox-messanger-message-actions circle#small3, .convertfox-messanger-message-actions circle#small3-Copy").css("fill","rgb(185, 190, 198)"),$("#convertfoxMessageWindow .convertfox-new-message-toast").remove(),newUnreadMessageCount=0,getEmailBoxShownInCurrCon=null,cfCurrentConversationId="",$("#chatArea").val(""),$("#chatArea").css("height","30px"),$(".convertfox-messanger-conversation-container").css("opacity",1),$("#conversation-list-area").removeClass("slide-enter-active slide-leave-active"),$("#chat-conversation-area").removeClass("slide-enter-active slide-leave-active"),$(".convertfox-home-x-scroll-content").removeClass("is-welcome"),$("#conversation-list-area").show(),$("#conversation-list-area").addClass("slide-enter-active"),$("#chat-conversation-area").addClass("slide-leave-active"),$("#chat-conversation-area").removeClass("cf-lead-bot"),$("#chat-conversation-area").removeClass("cf-allow-cursor"),isBotPresent=!1,isBotConversation=!1,cfGetConversationList(!1),"none"!=$(".convertfox-messanger-chat-header-avatar-3-users").css("display")&&$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation").attr("data-cf-conversation-identifier")==cfCurrentConversationId&&$(".convertfox-messanger-conversation-avatar img").attr("src",recentActiveAgents[0].avatar_url),$(".convertfox-messanger-home-content").scrollTop(0),cfQueryString.cfDeviceType?($("#chat-conversation-area").hide(),$("#conversation-list-area").removeClass("slide-enter-active slide-leave-active"),$("#chat-conversation-area").removeClass("slide-enter-active slide-leave-active")):setTimeout(function(){$("#chat-conversation-area").hide(),$("#conversation-list-area").removeClass("slide-enter-active slide-leave-active"),$("#chat-conversation-area").removeClass("slide-enter-active slide-leave-active")},300),enableConversationChatArea();var e=$.Event("keyup");$("#chatArea").trigger(e),parent.postMessage({funName:"setChatOpenAndOpenConversationStatus",params:{openStatus:"true",openConversationId:"",lastActiveAgentImage:"",lastActiveAgentName:"",lastActiveAgentBackground:""}},"*"),$.isFunction(window.loadHomePageEmoji)&&window.loadHomePageEmoji(),$(".convertfox-messanger-textarea").removeClass("is-height-auto"),$(".convertfox-messanger-emoji-select, .convertfox-messanger-gif-select").removeClass("is-open")}),$("#chatArea, #conversationChatArea, textarea").on("focus blur",function(e){"focus"==e.type?($(".convertfox-messanger-textarea-content").addClass("focus"),$(".convertfox-messanger-chat-textarea").addClass("focus"),setTimeout(function(){$(".convertfox-messanger-textarea").addClass("is-height-auto")},500)):($(".convertfox-messanger-textarea-content").removeClass("focus"),$(".convertfox-messanger-chat-textarea").removeClass("focus"))}),$("#chatArea").keyup(function(e){""!=$("#chatArea").val()?($(".convertfox-messanger-home-content").scrollTop(0),$(".convertfox-messanger-home-content").addClass("shirnk"),$("#conversation-list-area").addClass("is-shrunk")):($(".convertfox-messanger-home-content").removeClass("shirnk"),$("#conversation-list-area").removeClass("is-shrunk"))}),$("#convertfox-home-page-back-button").click(function(){cfGetConversationList(!1),$(".convertfox-messanger-home-content").removeClass("shirnk"),$(".convertfox-messanger-textarea").removeClass("shirnk"),$("#conversation-list-area").removeClass("is-shrunk")}),socket.on("chat_settings",function(e){allowMagicTyping=e.allow_magic_type}),$("#conversationChatArea").keyup(function(e){clearTimeout(timeout),0==typing?parent.postMessage({funName:"checkDoNotTrack",params:{}},"*"):(clearTimeout(timeout),timeout=setTimeout(timeoutFunction,1e3))}),$("#conversationChatArea").keydown(function(e){if(13==e.which&&""==$.trim($("#conversationChatArea").val()))e.preventDefault(),e.stopPropagation();else if(e.shiftKey&&13==e.keyCode)$("#conversationChatArea").insertAtCaret("");else if(13==e.which&&""!=$.trim($("#conversationChatArea").val())&&(e.preventDefault(),""!=$.trim($("#conversationChatArea").val()))){addCurrentConversationMessages("inside");var a=$.Event("keyup");$("#conversationChatArea").trigger(a)}}),$("#triggerChatArea").keydown(function(e){13==e.which&&""==$.trim($("#triggerChatArea").val())?e.preventDefault():e.shiftKey&&13==e.keyCode?$("#triggerChatArea").insertAtCaret(""):13==e.which&&""!=$.trim($("#triggerChatArea").val())&&$(".triggered-chat-text-content").trigger("click")}),$("#triggerAreaSendButton").click(function(){$(".triggered-chat-text-content").trigger("click")}),$("#chatArea").keydown(function(e){13==e.which&&""==$.trim($("#chatArea").val())?e.preventDefault():e.shiftKey&&13==e.keyCode?$("#chatArea").insertAtCaret(""):13==e.which&&""!=$.trim($("#chatArea").val())&&($("#chatArea").blur(),moveToConversationArea())}),$(document).on("keyup",".convertfox-messanger-message-qualification-form .convertfox-messenger-message-text-input",function(e){var a=$(e.target).attr("id"),t=$(e.target).attr("data-type"),s=e.target.value,n=!0;if("number"===t&&isNaN(s)?n=!1:"date"===t&&(n=moment(s,"DD/MM/YYYY").isValid()&&dateRegex.test(s)),""!=$(e.target).val().trim()&&n){var o=chatSendButtonColor;$(".convertfox-messanger-message-qualification-form #cfSend-"+a+" #cf-chat-email-send").css("fill",o)}else $(".convertfox-messanger-message-qualification-form #cfSend-"+a+" #cf-chat-email-send").css("fill","#9ca0a5");13==e.which&&$(".convertfox-messanger-message-qualification-form #"+a).is(":focus")&&$(".convertfox-messanger-message-qualification-form #cfSend-"+a+" #cf-chat-email-send").trigger("click")}),$(document).on("keyup","#cfChatEmail",function(e){var a=chatSendButtonColor;""!=$("#cfChatEmail").val()&&cfValidatateChatEmailId(e.target.value)?($("#cfSendEmailForm #cf-chat-email-send").css("fill",a),$("#cfSendEmailForm").attr("disabled",!1)):($("#cfSendEmailForm #cf-chat-email-send").css("fill","#9ca0a5"),$("#cfSendEmailForm").attr("disabled",!0)),13==e.which&&$("#cfChatEmail").is(":focus")&&""!=$("#cfChatEmail").val()&&$("#cfSendEmailForm").trigger("click")}),$(document).on("click","#cfSendEmailForm",function(){cfValidatateChatEmailId($("#cfChatEmail").val())?cfGdprEnabled?$("#gdprOptionSetting").show():sendUpdatedEmailAddress():($("#cfEmailStatus").addClass("cf-chat-error"),$("#cfEmailStatus").html(translateEnterValidEmail))}),$("#conversationAreaSendButton").click(function(){if(parent.postMessage({funName:"pageScrollToBottom"},"*"),""!=$.trim($("#conversationChatArea").val())){addCurrentConversationMessages("inside");var e=$.Event("keyup");$("#conversationChatArea").trigger(e)}}),$("#homePageSend").click(function(){$("#chatArea").blur(),moveToConversationArea()}),$("#convertfox-home-page-back-button").click(function(){$("#conversation-list-area").show(),$(".convertfox-messanger-home-content").removeClass("shirnk"),$(".convertfox-messanger-textarea").removeClass("shirnk"),$("#conversation-list-area").removeClass("is-shrunk")}),socket.on("agent_typing_started",function(e){cfCurrentConversationId==e.conversation_identifier&&addTypingBubble(e)}),socket.on("agent_typing_stopped",function(e){cfCurrentConversationId==e.conversation_identifier&&removeTypingBubble()}),socket.on("change_chat_room",function(e){void 0!=e.person_new_id&&personId!=e.person_new_id&&(old_conversation_room=conversation_room,socket.emit("leave_room",old_conversation_room),personId=e.person_new_id,conversation_room=applicationId+"/"+personId,socket.emit("room",conversation_room))}),socket.on("meeting_scheduler",function(e){if(manageBadgeCount(e),""!=cfCurrentConversationId&&e.conversation_identifier==cfCurrentConversationId){if("none"!=$("#chat-conversation-area").css("display"))if("sent"===e.status){if("initiated"===e.meeting_status)if(null!=e.user_id){var a='<div class="convertfox-messanger-content" id="'+e.id+'"></div>';$(".convertfox-messanger-messages").append(a),getMeetingDetail(e,!0)}else setTimeout(function(){handleMeetingStatusFromBot(e)},2e3);else["scheduled","cancelled","rescheduled"].includes(e.meeting_status)&&addingMeetingStatus(e);cfMessageDeliverMethod(e.id,"delivered",null),(parentWindowFocusStatus||iFrameWindowFocusStatus)&&"none"!=$("#chat-conversation-area").css("display")&&$("#convertfoxMessageWindow").hasClass("is-active")&&cfMessageDeliverMethod(e.id,"seen",null)}else["scheduled","cancelled","rescheduled"].includes(e.meeting_status)&&addingMeetingStatus(e),$("#"+e.id).attr("data-chat-message-status",e.status);else if("none"==$("#chat-conversation-area").css("display")&&"none"!=$("#conversation-list-area").css("display")&&("sent"==e.status&&cfMessageDeliverMethod(e.id,"delivered",e.conversation_identifier),$(".convertfox-messanger-conversation[data-cf-conversation-identifier="+e.conversation_identifier+"]").find(".convertfox-messanger-conversation-message-preview .cf-unread-count-conversation").remove(),e.conversation.person_unread_message_count>0)){if(e.conversation.person_unread_message_count>99)var t='<span class="cf-unread-count-conversation">99+</span>';else var t='<span class="cf-unread-count-conversation">'+e.conversation.person_unread_message_count+"</span>";$(".convertfox-messanger-conversation[data-cf-conversation-identifier="+e.conversation_identifier+"]").find(".convertfox-messanger-conversation-message-preview").append(t)}}else if("sent"==e.status&&cfMessageDeliverMethod(e.id,"delivered",e.conversation_identifier),$(".convertfox-messanger-conversation[data-cf-conversation-identifier="+e.conversation_identifier+"]").find(".convertfox-messanger-conversation-message-preview .cf-unread-count-conversation").remove(),e.conversation.person_unread_message_count>0){if(e.conversation.person_unread_message_count>99)var t='<span class="cf-unread-count-conversation">99+</span>';else var t='<span class="cf-unread-count-conversation">'+e.conversation.person_unread_message_count+"</span>";$(".convertfox-messanger-conversation[data-cf-conversation-identifier="+e.conversation_identifier+"]").find(".convertfox-messanger-conversation-message-preview").append(t)}}),setInterval(function(){1==ping_received?markAgentOnline():markAgentOffline(),ping_received=!1},pingApiIntervalEndUser),socket.on("online",function(e){ping_received=!0,markAgentOnline()}),socket.on("offline",function(e){ping_received=!1,markAgentOffline()}),socket.on("bot_conversation_ended",function(e){$(".cf-choices-section").remove(),isBotPresent=!1,isBotConversation=!1,handleTypingArea()});var isShowingBotTypingBubble=!1;socket.on("chat_message",function(e){if(manageBadgeCount(e),["triggered_message","qualification_property","bot_text","qualification_bot","lead_bot_greeting","lead_bot_question","lead_bot_response","lead_bot_goal_message","lead_bot_user_response"].includes(e.message_type))var a=convertTextToEmoji($.trim(mergeMultipleTagContentTosingleContent(e.message_content)),!0);else var a=convertTextToEmoji($.trim(e.message_content),!1);if(isChatOpen&&"sent"===e.status&&(null==e.deleted_at||void 0==e.deleted_at)&&(null==e.last_edited_at||void 0==e.last_edited_at)){var t=void 0!==e.user&&null!=e.user||["lead_bot_greeting","lead_bot_question","lead_bot_response","lead_bot_goal_message"].includes(e.message_type);$("#convertfoxBubble").hasClass("is-active")?"none"!=$("#conversation-list-area").css("display")&&"flex"!=$("#chat-conversation-area").css("display")?t&&"true"!=e.conversation.is_trigger_message&&settingAudioSound&&cfAudio.play():e.conversation_identifier!=cfCurrentConversationId&&t&&"true"!=e.conversation.is_trigger_message&&settingAudioSound&&cfAudio.play():t&&"true"!=e.conversation.is_trigger_message&&settingAudioSound&&cfAudio.play()}if(["getEmail","assignment_rule","qualification_property","bot_text","qualification_bot","lead_bot_greeting","lead_bot_question","lead_bot_response","lead_bot_goal_message","lead_bot_user_response"].includes(e.message_type)||("0"!=cfIdentified||randomId!=e.conversation.person_random_id)&&"1"!=cfIdentified){if(["lead_bot_greeting","lead_bot_question","lead_bot_response","lead_bot_goal_message","lead_bot_user_response"].includes(e.message_type)){if("sent"===e.status&&(isBotPresent=!0),"lead_bot_question"===e.message_type)var s=JSON.parse(e.message_content),a=s.question_text;else var a=e.message_content;a=convertTextToEmoji(a,!0),""!=cfCurrentConversationId&&e.conversation_identifier==cfCurrentConversationId?"none"!=$("#chat-conversation-area").css("display")?["lead_bot_greeting","lead_bot_question","lead_bot_response","lead_bot_goal_message"].includes(e.message_type)?"sent"===e.status?(isBotConversation=!0,0!=$("#"+e.message_temp_id).length?($("#"+e.message_temp_id).attr("data-chat-message-status",e.status),$("#"+e.message_temp_id).find($(".cf-chat-user-status")).html('<time class="timestamp" data-livestamp="'+e.created_at+'" value="'+e.created_at+'">'+moment(e.created_at).fromNow()+"</time>"),$("#"+e.message_temp_id).attr("id",e.id)):0==$("#"+e.id).length&&setTimeout(function(){e.conversation_identifier==cfCurrentConversationId?(isShowingBotTypingBubble=!0,addTypingBubble(e),setTimeout(function(){if(e.conversation_identifier==cfCurrentConversationId){removeTypingBubble();var a=addingLeadBotMessageBubble(e.message_type,e,e.id);setTimeout(function(){e.conversation_identifier==cfCurrentConversationId?($(".convertfox-messanger-messages").append(a),$(".add-linkify-tag").linkify({target:"_blank"}),changeTextColor(),cfScrollChatAreaToBottom(400),isShowingBotTypingBubble=!1,cfMessageDeliverMethod(e.id,"delivered",null),(parentWindowFocusStatus||iFrameWindowFocusStatus)&&"none"!=$("#chat-conversation-area").css("display")&&$("#convertfoxMessageWindow").hasClass("is-active")&&cfMessageDeliverMethod(e.id,"seen",null)):(isBotPresent=!1,isBotConversation=!1)},500)}else isBotPresent=!1,isBotConversation=!1},1e3),cfScrollChatAreaToBottom(400)):(isBotPresent=!1,isBotConversation=!1)},isShowingBotTypingBubble?2e3:0),$(".add-linkify-tag").linkify({target:"_blank"})):$("#"+e.id).attr("data-chat-message-status",e.status):"sent"==e.status?(isBotConversation=!0,0!=$("#"+e.message_temp_id).length?($("#"+e.message_temp_id).attr("data-chat-message-status",e.status),$("#cf-status-"+e.message_temp_id).attr("id","cf-status-"+e.id),$("#cf-status-"+e.id).html('<span><time class="timestamp" data-livestamp="'+e.created_at+'" value="'+e.created_at+'">'+moment(e.created_at).fromNow()+'</time></span><span class="cf-sent-status"></span>'),$("#"+e.message_temp_id).attr("id",e.id)):0==$("#"+e.id).length&&(addingLeadBotEndUserMessage(a,e.id),$("#"+e.id).attr("data-chat-message-status",e.status),$("#cf-status-"+e.id).html('<span><time class="timestamp" data-livestamp="'+e.created_at+'" value="'+e.created_at+'">'+moment(e.created_at).fromNow()+'</time></span><span class="cf-sent-status"></span>')),$(".cf-choices-section").remove()):$("#"+e.id).attr("data-chat-message-status",e.status):"none"==$("#chat-conversation-area").css("display")&&"none"!=$("#conversation-list-area").css("display")&&handleBotInConversationList(e,a):(handleBotInConversationList(e,a),DynamicTextColor=""!=specialTextColor&&void 0!=specialTextColor?specialTextColor:settingBackgroundTextColor,
$(".convertfox-messanger-home-title, .convertfox-messanget-home-subtitle, .convertfox-messanger-shrink-header-back-icon i, .convertfox-messanger-shrink-header-content, .convertfox-messanger-shrink-header-sub-content, .present-user-avatar p, .convertfox-messanger-chat-title, .convertfox-messanger-chat-subtitle, .convertfox-messanger-chat-back i, .intro-text,  .convertfox-messanger-widget-title, .convertfox-messanger-conversation-title, .convertfox-messanger-conversation-reply h3, .convertfox-messanger-conversation-reply .conversation-reply-time, .convertfox-messanger-conversation-message-preview div, .convertfox-messanger-chat-title, .convertfox-messanger-home-subtitle, .convertfox-messanger-conversation-message-preview div, .convertfox-messanger-widget-active-users .active-agents span, .convertfox-messanger-home-tab a, .convertfox-messanger-message-send span, .reply-time, .convertfox-messanger-shrink-header-active-agents").css("cssText","color: "+DynamicTextColor+" !important;"),$("g#send, g#send1, g#send3").css("cssText","fill: "+DynamicTextColor+" !important;")),"lead_bot_greeting"!==e.message_type||$("#convertfoxBubble").hasClass("is-active")||"none"!=$(".triggered-chat-container").css("display")||("sent"==e.status?(cfCurrentConversationId=e.conversation_identifier,currentConversationDetails={data:e},0==$(".notification-chat-container[data-notification-id="+e.message_temp_id+"]").length?(botNotificationContent(e,!1,e.id),$(".notification-chat-container").show(),$("#convertfoxChat").addClass("box-shadow-padding"),$("#chat-conversation-area").hide(),$("#conversation-list-area").hide(),parent.postMessage({funName:"setChatBoxHeight",params:{status:"chatAreaOpen",height:"200px",width:"440px",mode:"openNotification"}},"*")):$(".notification-chat-container").attr("data-notification-id",e.id)):"seen"!=e.status&&"responded"!=e.status||0!=$(".notification-chat-container[data-notification-id="+e.id+"]").length&&$(".notification-chat-container").hide())}}else{if(""!=cfCurrentConversationId&&e.conversation_identifier==cfCurrentConversationId){if("none"!=$("#chat-conversation-area").css("display")){if(void 0!=e.user&&null!=e.user){var n='<div class="convertfox-messanger-content" id="'+e.id+'" data-chat-message-status="'+e.status+'"> <div class="convertfox-messanger-chat-message"> <div class="convertfox-messanger-message-avatar">'+cfGetProfileImage(e.user,"lg")+'</div> <div class="convertfox-messanger-chat-message-body"> ';if(n+='<div class="message-name"> <span>'+escapeHtml(e.user.full_name)+"</span></div>",void 0!=e.deleted_at&&null!=e.deleted_at?n+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-emojis deleted-message">'+a+"</div>":e.is_attachment?null!=e.file_type&&("image"==e.file_type.split("/")[0]?(n+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-attachment-file" onclick="downloadFileAttachment(this)"><div class="convertfox-messanger-message-photo-upload"> <div class="convertfox-messanger-message-photo-icon"> <span class="photo"><img id="chat-message-image-'+e.id+'"  src="'+e.message_content+'"></span> </div> <div class="convertfox-messanger-message-photo-text"> <h4>'+e.file_name+"</h4> ",void 0!=e.file_size&&null!=e.file_size&&(n+="<p>"+bytesToSize(e.file_size)+"</p> "),n+="</div> </div></div>"):n+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-emojis">'+createUploadedFileHtml(e.message_content,e.id,e.file_type,e.file_name,e.file_size)+"</div>"):void 0!=e.is_gif&&e.is_gif?n+='<div class="convertfox-messanger-message-bubble show-gif"><a href="'+a+'" target="_blank"><img src="'+a+'"></a></div>':1==a.split(" ").length&&a.length<=2&&checkSingleEmojiText(a)?n+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-single-emoji">'+a+"</div>":n+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-emojis">'+a+"</div>",n+='<div class="message-status convertfox-messenger-tooltip" data-tooltip="'+moment(e.created_at).format("Do MMM YYYY, hh:mm A")+'" > <span><time class="timestamp" data-livestamp="'+e.created_at+'" value="'+e.created_at+'">'+moment(e.created_at).fromNow()+"</time></span> ",void 0!=e.is_gif&&e.is_gif&&(n+='<span class="is-gif-status"> Via Tenor</span> '),n+="</div> </div> </div> </div>",0!=$("#"+e.message_temp_id).length?($("#"+e.message_temp_id).find($(".cf-chat-user-status")).html('<time class="timestamp" data-livestamp="'+e.created_at+'" value="'+e.created_at+'">'+moment(e.created_at).fromNow()+"</time>"),$("#"+e.message_temp_id).attr("id",e.id)):0==$("#"+e.id).length?isScrollEnd()?($(".convertfox-messanger-messages").append(n),setTimeout(function(){cfScrollChatAreaToBottom(0)},50)):(newUnreadMessageCount+=1,0==$("#convertfoxMessageWindow .convertfox-new-message-toast").length?$("#convertfoxMessageWindow").append('<div class="convertfox-new-message-toast"> <span>New Message</span> </div>'):$("#convertfoxMessageWindow .convertfox-new-message-toast").text(newUnreadMessageCount+" New Messages"),$(".convertfox-messanger-messages").append(n)):$("#"+e.id).attr("data-chat-message-status",e.status),void 0!=e&&void 0!=e.last_user&&void 0!=e.last_user.avatar_url){if(null==e.last_user.avatar_url||e.last_user.avatar_url.includes("avatar.tobi.sh"))if($(".convertfox-messanger-chat-header-avatar .avatar-single-user .cf-profile-avatar").length)$(".convertfox-messanger-chat-header-avatar .avatar-single-user .cf-profile-avatar").text(e.last_user.avatar_letter),$(".convertfox-messanger-chat-header-avatar .avatar-single-user .cf-profile-avatar").css("background",e.last_user.avatar_background);else var o='<div class="cf-profile-avatar xl" style="background: '+e.last_user.avatar_background+'">'+e.last_user.full_name.substr(0,2)+"</div>";else if($(".convertfox-messanger-chat-header-avatar .avatar-single-user img").length){if($(".convertfox-messanger-chat-header-avatar .avatar-single-user img").attr("src")!=e.last_user.avatar_url)var o='<img class="first-image" src="'+e.last_user.avatar_url+'">'}else var o='<img class="first-image" src="'+e.last_user.avatar_url+'">';o&&$(".convertfox-messanger-chat-header-avatar .avatar-single-user").html(o)}$(".convertfox-messanger-chat-header-avatar").css("display","flex"),$(".convertfox-messanger-chat-header-avatar-3-users").css("display","none"),$(".convertfox-messanger-chat-title").text(e.user.full_name),cfMessageDeliverMethod(e.id,"delivered",null),(parentWindowFocusStatus||iFrameWindowFocusStatus)&&"none"!=$("#chat-conversation-area").css("display")&&$("#convertfoxMessageWindow").hasClass("is-active")&&cfMessageDeliverMethod(e.id,"seen",null),$(".add-linkify-tag").linkify({target:"_blank"})}else if("sent"==e.status){if(0!=$("#"+e.message_temp_id).length)$("#"+e.message_temp_id).attr("id",e.id),$("#"+e.message_temp_id).attr("data-chat-message-status",e.status),$("#cf-status-"+e.message_temp_id).attr("id","cf-status-"+e.id),$("#cf-status-"+e.id).html('<span><time class="timestamp" data-livestamp="'+e.created_at+'" value="'+e.created_at+'">'+moment(e.created_at).fromNow()+'</time></span><span class="cf-sent-status">'+messageStatus(e.status)+"</span>"),e.is_attachment&&null!=e.file_type&&("image"==e.file_type.split("/")[0]?$("#chat-message-image-"+e.message_temp_id).attr("src",e.message_content):($("#chat-message-file-"+e.message_temp_id).attr("data-download-file",e.message_content),$("#chat-message-file-"+e.message_temp_id).attr("data-download-type",e.file_type)));else if(0==$("#"+e.id).length)if(void 0==e.user||null==e.user){e.id;n='<div class="convertfox-messanger-content" id="'+e.id+'" data-chat-message-status="'+e.status+'"> <div class="convertfox-messanger-chat-message primary"> <div class="convertfox-messanger-chat-message-body"> ',void 0!=e.deleted_at&&null!=e.deleted_at?n+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-emojis deleted-message">'+a+"</div>":e.is_attachment?null!=e.file_type&&("image"==e.file_type.split("/")[0]?(n+='<div  class="convertfox-messanger-message-bubble add-linkify-tag show-attachment-file" onclick="downloadFileAttachment(this)"><div class="convertfox-messanger-message-photo-upload"> <div class="convertfox-messanger-message-photo-icon"> <span class="photo"><img id="chat-message-image-'+e.id+'" src="'+e.message_content+'"></span> </div> <div class="convertfox-messanger-message-photo-text"> <h4>'+e.file_name+"</h4> ",void 0!=e.file_size&&null!=e.file_size&&(n+="<p>"+bytesToSize(e.file_size)+"</p> "),n+="</div> </div></div> "):n+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-emojis">'+createUploadedFileHtml(e.message_content,e.id,e.file_type,e.file_name,e.file_size)+"</div>"):void 0!=e.is_gif&&e.is_gif?n+='<div class="convertfox-messanger-message-bubble show-gif"><a href="'+a+'" target="_blank"><img src="'+a+'"></a></div>':1==a.split(" ").length&&a.length<=2&&checkSingleEmojiText(a)?n+='<div  class="convertfox-messanger-message-bubble add-linkify-tag show-single-emoji">'+a+"</div>":n+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-emojis">'+a+"</div>","seen"==e.status||"responded"==e.status?($(".cf-seen-status").each(function(){$(this).remove()}),n+='<div class="message-status convertfox-messenger-tooltip" data-tooltip="'+moment(e.created_at).format("Do MMM YYYY, hh:mm A")+'" id="cf-status-'+e.id+'">',void 0!=e.is_gif&&e.is_gif&&(n+='<span class="is-gif-status">Via Tenor</span> '),n+=' <span><time class="timestamp" data-livestamp="'+e.created_at+'" value="'+e.created_at+'">'+moment(e.created_at).fromNow()+'</time></span> <span class="cf-seen-status">'+messageStatus(e.status)+"</span> </div> </div> </div> </div>"):"sent"==e.status?($(".cf-sent-status").each(function(){$(this).remove()}),n+='<div class="message-status convertfox-messenger-tooltip" data-tooltip="'+moment(e.created_at).format("Do MMM YYYY, hh:mm A")+'"  id="cf-status-'+e.id+'">',void 0!=e.is_gif&&e.is_gif&&(n+='<span class="is-gif-status">Via Tenor</span> '),n+='<span><time class="timestamp" data-livestamp="'+e.created_at+'" value="'+e.created_at+'">'+moment(e.created_at).fromNow()+'</time></span> <span class="cf-sent-status">'+messageStatus(e.status)+"</span> </div> </div> </div> </div>"):"delivered"==e.status&&($(".cf-delivered-status").each(function(){$(this).remove()}),n+='<div class="message-status convertfox-messenger-tooltip" data-tooltip="'+moment(e.created_at).format("Do MMM YYYY, hh:mm A")+'"  id="cf-status-'+e.id+'"> ',void 0!=e.is_gif&&e.is_gif&&(n+='<span class="is-gif-status">Via Tenor</span> '),n+='<span><time class="timestamp" data-livestamp="'+e.created_at+'" value="'+e.created_at+'">'+moment(e.created_at).fromNow()+'</time></span> <span class="cf-delivered-status">'+messageStatus(e.status)+"</span> </div> </div> </div> </div>"),$(".convertfox-messanger-messages").append(n),cfScrollChatAreaToBottom(0)}else{var n='<div class="convertfox-messanger-content" id="'+e.id+'" data-chat-message-status="'+e.status+'"> <div class="convertfox-messanger-chat-message"> <div class="convertfox-messanger-message-avatar">'+cfGetProfileImage(e.user,"lg")+'</div> <div class="convertfox-messanger-chat-message-body"> ';n+='<div class="message-name"> <span>'+escapeHtml(e.user.full_name)+"</span></div>",void 0!=e.deleted_at&&null!=e.deleted_at?n+=' <div class="convertfox-messanger-message-bubble add-linkify-tag show-emojis deleted-message">'+a+"</div>":e.is_attachment?null!=e.file_type&&("image"==e.file_type.split("/")[0]?(n+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-attachment-file" onclick="downloadFileAttachment(this)"><div class="convertfox-messanger-message-photo-upload"> <div class="convertfox-messanger-message-photo-icon"> <span class="photo"><img id="chat-message-image-'+e.id+'"  src="'+e.message_content+'"></span> </div> <div class="convertfox-messanger-message-photo-text"> <h4>'+e.file_name+"</h4> ",void 0!=e.file_size&&null!=e.file_size&&(n+="<p>"+bytesToSize(e.file_size)+"</p> "),n+="</div> </div></div> "):n+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-emojis">'+createUploadedFileHtml(e.message_content,e.id,e.file_type,e.file_name,e.file_size)+"</div>"):void 0!=e.is_gif&&e.is_gif?n+='<div class="convertfox-messanger-message-bubble show-gif"><a href="'+a+'" target="_blank"><img src="'+a+'"></a></div>':1==a.split(" ").length&&a.length<=2&&checkSingleEmojiText(a)?n+=' <div class="convertfox-messanger-message-bubble add-linkify-tag show-single-emoji">'+a+"</div> ":n+=' <div class="convertfox-messanger-message-bubble add-linkify-tag show-emojis">'+a+"</div>",n+='<div class="message-status convertfox-messenger-tooltip" data-tooltip="'+moment(e.created_at).format("Do MMM YYYY, hh:mm A")+'" id="cf-status-'+e.id+'"> <span><time class="timestamp" data-livestamp="'+e.created_at+'" value="'+e.created_at+'">'+moment(e.created_at).fromNow()+"</time></span> </div> </div> </div> </div>",$("#cfMessageList").append(n),changeTextColor(),$(".add-linkify-tag").linkify({target:"_blank"}),cfScrollChatAreaToBottom(0)}}else"responded"==e.status?(e.is_attachment&&null!=e.file_type&&("image"==e.file_type.split("/")[0]?$("#chat-message-image-"+e.id).attr("src",e.message_content):($("#chat-message-file-"+e.id).attr("data-download-file",e.message_content),$("#chat-message-file-"+e.id).attr("data-download-type",e.file_type))),0!=$("#cf-status-"+e.id).length&&($(".cf-seen-status").each(function(){$(this).remove()}),$("#cf-status-"+e.id+" .cf-sent-status").remove(),$("#cf-status-"+e.id+" .cf-delivered-status").remove(),$("#cf-status-"+e.id).append(' <span class="cf-seen-status">'+messageStatus(e.status)+"</span>"),$("#"+e.id).attr("data-chat-message-status",e.status))):"delivered"==e.status&&(e.is_attachment&&null!=e.file_type&&("image"==e.file_type.split("/")[0]?$("#chat-message-image-"+e.id).attr("src",e.message_content):($("#chat-message-file-"+e.id).attr("data-download-file",e.message_content),$("#chat-message-file-"+e.id).attr("data-download-type",e.file_type))),0!=$("#cf-status-"+e.id).length&&($(".cf-delivered-status").each(function(){$(this).remove()}),$("#cf-status-"+e.id+" .cf-sent-status").remove(),$("#cf-status-"+e.id).append(' <span class="cf-delivered-status">'+messageStatus(e.status)+"</span>"),$("#"+e.id).attr("data-chat-message-status",e.status)));void 0!=e.deleted_at&&null!=e.deleted_at&&($("#"+e.id).find(".convertfox-messanger-message-bubble").empty(),$("#"+e.id).find(".convertfox-messanger-message-bubble").removeClass("show-attachment-file show-gif show-single-emoji"),$("#"+e.id).find(".convertfox-messanger-message-bubble").addClass("deleted-message"),$("#"+e.id).find(".convertfox-messanger-message-bubble").html(e.message_content))}else if("none"==$("#chat-conversation-area").css("display")&&"none"!=$("#conversation-list-area").css("display")){var r=cfFindConversationAlreadyAddedOrNot(e.conversation_identifier),i=r[0],c=r[1];if(i)if("sent"==e.status){var l=moment().format("YYYY-MM-DD"),d=moment(e.created_at).format("YYYY-MM-DD");if(moment(d).isSame(l))var m=moment(e.created_at).fromNow();else var m=moment(e.created_at).format("YYYY-MM-DD");var o='<time class="timestamp" data-livestamp="'+e.created_at+'" datetime="'+e.created_at+'" value="'+e.created_at+'">'+m+"</time>";if($(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+c+") .convertfox-messanger-conversation-reply .conversation-reply-time time").remove(),$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+c+") .convertfox-messanger-conversation-reply .conversation-reply-time").append(o),e.is_attachment?$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+c+") .convertfox-messanger-conversation-message-preview div").html(" Attachment"+paperClipSvg()):$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+c+") .convertfox-messanger-conversation-message-preview div").html(a),$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+c+") .convertfox-messanger-conversation-message-preview .cf-unread-count-conversation").remove(),$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+c+")").attr("data-cf-last-message-id",e.id),e.conversation.person_unread_message_count>0){if(e.conversation.person_unread_message_count>99)var g='<span class="cf-unread-count-conversation">99+</span>';else var g='<span class="cf-unread-count-conversation">'+e.conversation.person_unread_message_count+"</span>";$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+c+") .convertfox-messanger-conversation-message-preview").append(g)}$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+c+") .convertfox-messanger-conversation-message-preview").attr("data-id",e.id),cfMessageDeliverMethod(e.id,"delivered",e.conversation_identifier)}else"responded"==e.status?0!=$("#cf-status-"+e.id).length&&($(".cf-seen-status").each(function(){$(this).remove()}),$("#cf-status-"+e.id+" .cf-sent-status").remove(),$("#cf-status-"+e.id+" .cf-delivered-status").remove(),$("#cf-status-"+e.id).append(' <span class="cf-seen-status">'+messageStatus(e.status)+"</span>")):"delivered"==e.status&&0!=$("#cf-status-"+e.id).length&&($(".cf-delivered-status").each(function(){$(this).remove()}),$("#cf-status-"+e.id+" .cf-sent-status").remove(),$("#cf-status-"+e.id).append(' <span class="cf-delivered-status">'+messageStatus(e.status)+"</span>"));if(null!=e.last_edited_at&&void 0!=e.last_edited_at&&$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+c+") .convertfox-messanger-conversation-message-preview").attr("data-id")==e.id&&$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+c+") .convertfox-messanger-conversation-message-preview div").html(a),void 0!=e.deleted_at&&null!=e.deleted_at&&$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+c+") .convertfox-messanger-conversation-message-preview").attr("data-id")==e.id&&($(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+c+") .convertfox-messanger-conversation-message-preview div").addClass("con-deleted-message"),$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+c+") .convertfox-messanger-conversation-message-preview div").html(a)),$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+c+") .convertfox-messanger-conversation-avatar img").remove(),$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+c+") .convertfox-messanger-conversation-avatar .cf-profile-avatar").remove(),void 0!=e&&void 0!=e.last_user&&void 0!=e.last_user.avatar_url)if(void 0==e.last_user.avatar_url||"undefined"==e.last_user.avatar_url||e.last_user.avatar_url.includes("avatar.tobi.sh"))var o='<div class="cf-profile-avatar xs" style="background: '+e.last_user.avatar_background+'">'+e.last_user.full_name.substr(0,2)+"</div>";else var o='<img src="'+e.last_user.avatar_url+'">';$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+c+") .convertfox-messanger-conversation-avatar").append(o),void 0!=e&&void 0!=e.last_user&&void 0!=e.last_user.full_name&&$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+c+") .convertfox-messanger-conversation-reply h3").html(escapeHtml(e.last_user.full_name))}if(null!=e.last_edited_at&&void 0!=e.last_edited_at&&0!=$(".convertfox-messanger-content[id="+e.id+"]").length){$(".convertfox-messanger-content[id="+e.id+"]").find(".convertfox-messanger-message-bubble").remove();var v="";void 0!=e.deleted_at&&null!=e.deleted_at?v+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-emojis deleted-message">'+a+"</div>":1==a.split(" ").length&&a.length<=2&&checkSingleEmojiText(a,!1)?v+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-single-emoji">'+a+"</div>":v+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-emojis">'+a+"</div>";var f=$(".convertfox-messanger-content[id="+e.id+"]").find(".message-name");$(v).insertAfter(f)}showDownloadButton(".show-attachment-file img#chat-message-image-"+e.id)}else{if(null!=e.last_edited_at&&void 0!=e.last_edited_at&&0!=$(".convertfox-messanger-content[id="+e.id+"]").length){$(".convertfox-messanger-content[id="+e.id+"]").find(".convertfox-messanger-message-bubble").remove(),void 0!=e.deleted_at&&null!=e.deleted_at?v+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-emojis deleted-message">'+a+"</div>":1==a.split(" ").length&&a.length<=2&&checkSingleEmojiText(a)?v+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-single-emoji">'+a+"</div>":v+='<div class="convertfox-messanger-message-bubble add-linkify-tag show-emojis">'+a+"</div>";var f=$(".convertfox-messanger-content[id="+e.id+"]").find(".message-name");$(v).insertAfter(f)}var r=cfFindConversationAlreadyAddedOrNot(e.conversation_identifier),i=r[0],c=r[1];if(void 0!=e.user&&null!=e.user){i&&$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+c+")").remove();var l=moment().format("YYYY-MM-DD"),d=moment(e.created_at).format("YYYY-MM-DD");if(moment(d).isSame(l))var m=moment(e.created_at).fromNow();else var m=moment(e.created_at).format("YYYY-MM-DD");$(".convertfox-messanger-conversation-container").css("opacity",1),$(".convertfox-home-x-scroll-content").removeClass("is-welcome");var o='<div class="convertfox-messanger-conversation goto-chat" onclick="cfGetMessages(this)" data-cf-conversation-identifier="'+e.conversation_identifier+'" data-cf-last-message-id="'+e.id+'"> <div class="convertfox-messanger-conversation-text" > <div class="convertfox-messanger-conversation-reply"> <div class="convertfox-messanger-conversation-avatar"> '+cfGetProfileImage(e.user,"xs")+"</div> <h3>"+escapeHtml(e.user.full_name.split(" ")[0])+'</h3> <span class="conversation-reply-time"><time class="timestamp" data-livestamp="'+e.created_at+'" datetime="'+e.created_at+'" value="'+e.created_at+'">'+m+"</time></span></div> ";void 0!=e.deleted_at&&null!=e.deleted_at?o+='<div class="convertfox-messanger-conversation-message-preview con-deleted-message" data-id="'+e.id+'"> ':o+='<div class="convertfox-messanger-conversation-message-preview" data-id="'+e.id+'"> ',void 0!=e.deleted_at&&null!=e.deleted_at?o+="<div>"+a+"</div> ":e.is_attachment?o+="<div>Attachment"+paperClipSvg()+" </div> ":o+="<div>"+a+"</div> ",e.conversation.person_unread_message_count>0&&(e.conversation.person_unread_message_count>99?o+='<span class="cf-unread-count-conversation">99+</span>':o+='<span class="cf-unread-count-conversation">'+e.conversation.person_unread_message_count+"</span>"),o+="</div> </div> </div>",$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation-wrap").prepend(o),cfMessageDeliverMethod(e.id,"delivered",e.conversation_identifier)}else if("sent"==e.status){var l=moment().format("YYYY-MM-DD"),d=moment(e.created_at).format("YYYY-MM-DD");if(moment(d).isSame(l))var m=moment(e.created_at).fromNow();else var m=moment(e.created_at).format("YYYY-MM-DD");i&&$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+c+")").remove();var o='<div class="convertfox-messanger-conversation goto-chat" onclick="cfGetMessages(this)" data-cf-conversation-identifier="'+e.conversation_identifier+'" data-cf-last-message-id="'+e.id+'"> ';o+='<div class="convertfox-messanger-conversation-text" > <div class="convertfox-messanger-conversation-reply"> ',o+='<div class="convertfox-messanger-conversation-avatar"> ',void 0!=e.last_user?o+=cfGetProfileImage(e.last_user,"xs")+"</div>":o+=cfGetProfileImage(e.project_details,"xs")+"</div>",void 0!=e.last_user?o+="<h3>"+escapeHtml(e.last_user.full_name.split(" ")[0])+"</h3>":o+="<h3>"+escapeHtml(e.project_details.project_name)+"</h3>",o+='<span class="conversation-reply-time"><time class="timestamp" data-livestamp="'+e.created_at+'" datetime="'+e.created_at+'" value="'+e.created_at+'">'+m+"</time></span></div> ",void 0!=e.deleted_at&&null!=e.deleted_at?o+='<div class="convertfox-messanger-conversation-message-preview con-deleted-message add-linkify-tag" data-id="'+e.id+'"> ':o+='<div class="convertfox-messanger-conversation-message-preview add-linkify-tag" data-id="'+e.id+'"> ',void 0!=e.deleted_at&&null!=e.deleted_at?o+="<div>"+a+"</div></div> </div> </div>":e.is_attachment||void 0!=e.is_gif&&e.is_gif?o+="<div> Attachment"+paperClipSvg()+"</div></div> </div> </div>":o+="<div>"+a+"</div></div> </div> </div>",$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation-wrap").prepend(o)}else"seen"!=e.status&&"responded"!=e.status||i&&$(".convertfox-messanger-conversation-body .convertfox-messanger-conversation:nth-child("+c+") .convertfox-messanger-conversation-message-preview .cf-unread-count-conversation").remove();DynamicTextColor=""!=specialTextColor&&void 0!=specialTextColor?specialTextColor:settingBackgroundTextColor,$(".convertfox-messanger-home-title, .convertfox-messanget-home-subtitle, .convertfox-messanger-shrink-header-back-icon i, .convertfox-messanger-shrink-header-content, .convertfox-messanger-shrink-header-sub-content, .present-user-avatar p, .convertfox-messanger-chat-title, .convertfox-messanger-chat-subtitle, .convertfox-messanger-chat-back i, .intro-text,  .convertfox-messanger-widget-title, .convertfox-messanger-conversation-title, .convertfox-messanger-conversation-reply h3, .convertfox-messanger-conversation-reply .conversation-reply-time, .convertfox-messanger-conversation-message-preview div, .convertfox-messanger-chat-title, .convertfox-messanger-home-subtitle, .convertfox-messanger-conversation-message-preview div, .convertfox-messanger-widget-active-users .active-agents span, .convertfox-messanger-home-tab a, .convertfox-messanger-message-send span, .reply-time").css("cssText","color: "+DynamicTextColor+" !important;"),$("g#send, g#send1, g#send3").css("cssText","fill: "+DynamicTextColor+" !important;")}$("#convertfoxBubble").hasClass("is-active")||"none"!=$(".triggered-chat-container").css("display")||"triggered_message"==e.message_type||void 0!=e.user&&null!=e.user&&("sent"==e.status?(addingNotification(e),$(".notification-chat-container").show(),$("#convertfoxChat").addClass("box-shadow-padding"),$("#chat-conversation-area").hide(),$("#conversation-list-area").hide(),parent.postMessage({funName:"setChatBoxHeight",params:{status:"chatAreaOpen",height:"200px",width:"440px",mode:"openNotification"}},"*")):"seen"!=e.status&&"responded"!=e.status||0!=$(".notification-chat-container[data-notification-id="+e.id+"]").length&&$(".notification-chat-container").hide())}$("#convertfoxBubble").hasClass("is-active")||void 0!=e.user&&null!=e.user&&("seen"!=e.status&&"responded"!=e.status||0!=$(".notification-chat-container[data-notification-id="+e.id+"]").length&&$(".notification-chat-container").hide())}),$(document).mouseup(function(e){var a=$(".emoji-mart");a.is(e.target)||0!==a.has(e.target).length||1==$(e.target).closest("#conversation-area-emoji-button").length||1==$(e.target).closest("#home-page-emoji").length||($(".convertfox-messanger-emoji-icon").removeClass("show-chat-emoji-area"),$(".convertfox-messanger-message-emojis").removeClass("show-chat-emoji-area"),$("#conversation-area-emoji-button").removeClass("focus"),$("#home-page-emoji").removeClass("focus"))}),$(".triggered-chat-text-content, .notification-chat-content").click(function(e){void 0!=currentConversationDetails&&""!=currentConversationDetails?($(".triggered-chat-container").css("display","none"),$(".notification-chat-container").hide(),$("#convertfoxMessageWindow").removeClass("triggered-chat-active"),$(".convertfox-messanger-home-content").removeClass("shirnk"),$("#conversation-list-area").removeClass("is-shrunk"),cfGetMessages("",currentConversationDetails),$("#chat-conversation-area").show(),$("#chat-conversation-area").removeClass("cf-lead-bot"),$("#chat-conversation-area").removeClass("cf-allow-cursor"),conversationTextAreaFocus(),$("#convertfoxMessageWindow, .convertfox-messanger-window-shadow").css("display","flex"),$("#convertfoxBubble").addClass("is-active"),$("#convertfoxChat").addClass("is-active"),setTimeout(function(){$("#convertfoxMessageWindow").addClass("is-active")},0),$(".triggered-chat-container, .convertfox-messanger").addClass("box-shadow-padding"),parent.postMessage({funName:"setTriggeredChatOpen",params:{status:!1}},"*"),parent.postMessage({funName:"setChatBoxHeight",params:{status:"chatAreaOpen",mode:"openChatviaTriggeredChat"}},"*"),void 0!=currentConversationDetails.data.user&&null!=currentConversationDetails.data.user&&void 0!=currentConversationDetails.data.user.avatar_url?parent.postMessage({funName:"setChatOpenAndOpenConversationStatus",params:{openStatus:"true",openConversationId:currentConversationDetails.data.conversation_identifier,lastActiveAgentImage:currentConversationDetails.data.user.avatar_url,lastActiveAgentName:currentConversationDetails.data.user.full_name,lastActiveAgentBackground:currentConversationDetails.data.user.avatar_background}},"*"):"lead_bot_greeting"===currentConversationDetails.data.message_type&&parent.postMessage({funName:"setChatOpenAndOpenConversationStatus",params:{openStatus:"true",openConversationId:currentConversationDetails.data.conversation_identifier,lastActiveAgentImage:chatBotIconUrl,lastActiveAgentName:"Bot",lastActiveAgentBackground:""}},"*"),setTimeout(function(){conversationTextAreaFocus(),""!=$.trim($("#triggerChatArea").val())&&($("#conversationChatArea").val($("#triggerChatArea").val()),$("#conversationAreaSendButton").trigger("click"))},1500)):cfListOpenWhileAssistantOpen()}),$(".triggered-chat-close, .notification-close").click(function(){$(".triggered-chat-container").css("display","none"),$(".notification-chat-container").hide(),$("#convertfoxMessageWindow").removeClass("triggered-chat-active"),$(".convertfox-messanger-home-content").removeClass("shirnk"),$("#conversation-list-area").removeClass("is-shrunk"),$("#chat-conversation-area").removeClass("cf-lead-bot"),$("#chat-conversation-area").removeClass("cf-allow-cursor"),$("#convertfoxMessageWindow").removeClass("is-active"),$("#convertfoxBubble").removeClass("is-active"),parent.postMessage({funName:"setTriggeredChatOpen",params:{status:!1}},"*"),parent.postMessage({funName:"setChatBoxHeight",params:{status:"chatAreaClose"}},"*"),$(".triggered-chat-container, .convertfox-messanger").removeClass("box-shadow-padding")}),$("#home-page-emoji").click(function(){if($(".convertfox-messanger-gif-select").removeClass("is-open"),$("#home-page-emoji").attr("disabled"))return!1;$("#home-page-emoji").parents("#conversation-list-area").find(".convertfox-messanger-emoji-select").hasClass("is-open")?($("#home-page-emoji").parents("#conversation-list-area").find(".convertfox-messanger-emoji-select").removeClass("is-open"),$("#home-page-emoji").addClass("focus")):$("#home-page-emoji").parents("#conversation-list-area").find(".convertfox-messanger-emoji-select").addClass("is-open")}),$("#home-page-gif-button").click(function(){if($(".convertfox-messanger-emoji-select").removeClass("is-open"),$("#home-page-gif-button").attr("disabled"))return!1;$("#home-page-gif-button").parents("#conversation-list-area").find(".convertfox-messanger-gif-select").hasClass("is-open")?($("#home-page-gif-button").parents("#conversation-list-area").find(".convertfox-messanger-gif-select").removeClass("is-open"),$("#home-page-gif-button").addClass("focus")):(0!=$(".gif-preview-container:has(div.empty-gif-container)").length&&(""!=gifAnonId?getTenorData(!1):getAnonId()),$("#home-page-gif-button").parents("#conversation-list-area").find(".convertfox-messanger-gif-select").addClass("is-open"))}),$(".convertfox-messanger-gif-search-input").keyup(function(e){
$(".convertfox-messanger-gif-search-input").val($(this).val()),clearTimeout(debounceTimeout),nextOffset="",debounceTimeout=setTimeout(function(){getTenorData(!1)},500)}),$(".gif-preview-container").scroll(function(){$(this).scrollTop()+$(this).innerHeight()>=$(this)[0].scrollHeight&&getTenorData(!0)}),$(document).on("click","#conversation-area-emoji-button",function(){if($(".convertfox-messanger-gif-select").removeClass("is-open"),$("#conversation-area-emoji-button").attr("disabled"))return!1;$("#conversation-area-emoji-button").parents("#chat-conversation-area").find(".convertfox-messanger-emoji-select").hasClass("is-open")?($("#conversation-area-emoji-button").parents("#chat-conversation-area").find(".convertfox-messanger-emoji-select").removeClass("is-open"),$(".convertfox-messanger-message-actions .convertfox-messanger-message-file g#Type-a-message-1, .convertfox-messanger-message-actions circle#Oval1, .convertfox-messanger-message-actions circle#Oval2, .convertfox-messanger-message-actions circle#Oval3, .convertfox-messanger-message-actions path#Shape, .convertfox-messanger-message-actions circle#Oval-Copy, .convertfox-messanger-message-actions path#Shape1").css("stroke","rgb(185, 190, 198)"),$(".convertfox-messanger-message-actions circle#small1, .convertfox-messanger-message-actions circle#small1-Copy, .convertfox-messanger-message-actions circle#small2, .convertfox-messanger-message-actions circle#small2-Copy, .convertfox-messanger-message-actions circle#small3, .convertfox-messanger-message-actions circle#small3-Copy").css("fill","rgb(185, 190, 198)")):($("#conversation-area-emoji-button").parents("#chat-conversation-area").find(".convertfox-messanger-emoji-select").addClass("is-open"),$(".convertfox-messanger-message-actions circle#Oval1, .convertfox-messanger-message-actions circle#Oval2,.convertfox-messanger-message-actions circle#Oval3, .convertfox-messanger-message-emojis path#Shape, .convertfox-messanger-message-actions circle#Oval-Copy").css("stroke",attachedImagesColor),$(".convertfox-messanger-message-actions circle#small1, .convertfox-messanger-message-actions circle#small1-Copy, .convertfox-messanger-message-actions circle#small2, .convertfox-messanger-message-actions circle#small2-Copy, .convertfox-messanger-message-actions circle#small3, .convertfox-messanger-message-actions circle#small3-Copy").css("fill",attachedImagesColor))}),$(document).on("click","#conversation-area-gif-button",function(){if($(".convertfox-messanger-emoji-select").removeClass("is-open"),$("#conversation-area-gif-button").attr("disabled"))return!1;$("#conversation-area-gif-button").parents("#chat-conversation-area").find(".convertfox-messanger-gif-select").hasClass("is-open")?($("#conversation-area-gif-button").parents("#chat-conversation-area").find(".convertfox-messanger-gif-select").removeClass("is-open"),$(".convertfox-messanger-message-actions path#gif-path-1, .convertfox-messanger-message-actions path#gif-path-2").css("stroke","rgb(185, 190, 198)")):(0!=$(".gif-preview-container:has(div.empty-gif-container)").length&&(""!=gifAnonId?getTenorData(!1):getAnonId()),$("#conversation-area-gif-button").parents("#chat-conversation-area").find(".convertfox-messanger-gif-select").addClass("is-open"),$(".convertfox-messanger-message-actions path#gif-path-1, .convertfox-messanger-message-actions path#gif-path-2").css("stroke",attachedImagesColor))}),$(document).on("click","#conversation-list-area .emojis-wrap > span",function(e){$("#chatArea").insertAtCaret(" "+$(this).html()+" "),$("#chatArea").trigger("keyup"),$(".convertfox-messanger-home-content").addClass("shirnk"),$("#conversation-list-area").addClass("is-shrunk")}),$(document).on("click","#chat-conversation-area .emojis-wrap > span",function(e){$("#conversationChatArea").insertAtCaret(" "+$(this).html()+" "),$("#conversationChatArea").trigger("keyup")}),$(document).on("click",".gif-picker-container",function(e){var a={tinyurl:$(this).attr("data-tiny-url"),gifurl:$(this).attr("data-gif-url")};""!=cfCurrentConversationId&&"none"!=$("#chat-conversation-area").css("display")&&$("#conversation-area-gif-button").parents("#chat-conversation-area").find(".convertfox-messanger-gif-select").hasClass("is-open")?addGifImageToConversation(a):""==cfCurrentConversationId&&"none"==$("#chat-conversation-area").css("display")&&$("#home-page-gif-button").parents("#conversation-list-area").find(".convertfox-messanger-gif-select").hasClass("is-open")&&($(".convertfox-messanger-chat-title").text(compayNameOrProjectName),$(".convertfox-messanger-chat-header-avatar img").attr("src","https://d3sjgucddk68ji.cloudfront.net/users/default-user.png"),$("#conversation-list-area").addClass("slide-leave-active"),$(".convertfox-messanger-home-content").addClass("enter-message"),$(".convertfox-messanger-messages").empty(),removeOldMessages(),addGifImageToConversation(a),$(".convertfox-messanger-chat-header-avatar").css("display","none"),$(".convertfox-messanger-chat-header-avatar-3-users").css("display","flex"),setTimeout(function(){$("#chat-conversation-area").show(),$(".convertfox-messanger-home-content").removeClass("shirnk"),$("#conversation-list-area").removeClass("is-shrunk"),$(".convertfox-messanger-home-content").removeClass("enter-message"),$("#conversation-list-area").hide(),$("#conversation-list-area").removeClass("slide-enter-active slide-leave-active"),$("#chat-conversation-area").removeClass("slide-enter-active slide-leave-active"),$("#chat-conversation-area").removeClass("cf-lead-bot"),$("#chat-conversation-area").removeClass("cf-allow-cursor")},50))}),$("#conversation-area-attachment-button").click(function(){if(attachClickFlag){if($("#conversation-area-attachment-button").attr("disabled"))return!1;$("#conversation-page-file").trigger("click")}}),$("#home-page-attachment-button").click(function(){if(attachClickFlag){if($("#home-page-attachment-button").attr("disabled"))return!1;$("#home-page-file").trigger("click")}}),$("#conversation-page-file").change(function(){var e=this;checkUploadFileValidation(this,function(a){a?addAttachmentToConversation(e):("image"==e.files[0].type.split("/")[0]?($(".convertfox-error-toast-message").css("z-index",3),$(".convertfox-error-toast-message span").text("Image size can't exceed "+maxFileSize.image+"MB."),$(".convertfox-error-toast-message").css("opacity",1)):($(".convertfox-error-toast-message").css("z-index",3),$(".convertfox-error-toast-message span").text("File size can't exceed "+maxFileSize.file+"MB."),$(".convertfox-error-toast-message").css("opacity",1)),$("#conversation-page-file").val(""),setTimeout(function(){$(".convertfox-error-toast-message").css("opacity",0),$(".convertfox-error-toast-message").css("z-index",0)},3e3))})}),$("#home-page-file").change(function(){var e=this;cfCurrentConversationId="",checkUploadFileValidation(this,function(a){a?($(".convertfox-messanger-chat-title").text(compayNameOrProjectName),$(".convertfox-messanger-chat-header-avatar img").attr("src","https://d3sjgucddk68ji.cloudfront.net/users/default-user.png"),$("#conversation-list-area").addClass("slide-leave-active"),$(".convertfox-messanger-home-content").addClass("enter-message"),$(".convertfox-messanger-messages").empty(),removeOldMessages(),addAttachmentToConversation(e),$(".convertfox-messanger-chat-header-avatar").css("display","none"),$(".convertfox-messanger-chat-header-avatar-3-users").css("display","flex"),setTimeout(function(){$("#chat-conversation-area").show(),$(".convertfox-messanger-home-content").removeClass("shirnk"),$("#conversation-list-area").removeClass("is-shrunk"),$(".convertfox-messanger-home-content").removeClass("enter-message"),$("#conversation-list-area").hide(),$("#conversation-list-area").removeClass("slide-enter-active slide-leave-active"),$("#chat-conversation-area").removeClass("slide-enter-active slide-leave-active"),$("#chat-conversation-area").removeClass("cf-lead-bot"),$("#chat-conversation-area").removeClass("cf-allow-cursor")},50)):("image"==e.files[0].type.split("/")[0]?($(".convertfox-error-toast-message").css("z-index",3),$(".convertfox-error-toast-message span").text("Image size can't exceed 5MB."),$(".convertfox-error-toast-message").css("opacity",1)):($(".convertfox-error-toast-message").css("z-index",3),$(".convertfox-error-toast-message span").text("File size can't exceed 20MB."),$(".convertfox-error-toast-message").css("opacity",1)),$("#home-page-file").val(""),setTimeout(function(){$(".convertfox-error-toast-message").css("opacity",0),$(".convertfox-error-toast-message").css("z-index",0)},3e3))})}),isDataURL.regex=/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i,$(document).on("click",".download-file-link",function(e){var a=$(e.target).closest(".download-file-link").attr("data-download-file"),t=$(e.target).closest(".download-file-link").attr("data-download-type");if(""!=a&&null!=a&&void 0!=a){var s=a.split(".");if(0!=s.length)if("application/pdf"==t&&"pdf"==s[s.length-1]||("text/csv"==t||"text/plain"==t)&&s[s.length-1].includes("csv")){var n=window.open(a,"_blank");n.focus()}else{var o=$("<a target='_blank'>").attr("href",a).attr("download","filename").appendTo("body");o[0].click(),o.remove()}else{var o=$("<a>").attr("href",a).attr("download","filename").appendTo("body");o[0].click(),o.remove()}}}),$.each($("textarea[data-autoresize]"),function(){var e=this.offsetHeight-this.clientHeight,a=function(a){$(a).css("height","auto").css("height",a.scrollHeight+e)};$(this).on("keyup input",function(){a(this)}).removeAttr("data-autoresize")}),$("#chatArea, #conversationChatArea, #triggerChatArea").on("keyup",function(){var e=$(this);0==e.val().length?e.closest(".convertfox-messanger-textarea").find(".convertfox-messanger-message-actions").removeClass("show-send"):function(){$("#conversation-area-gif-button").parents("#chat-conversation-area").find(".convertfox-messanger-gif-select").hasClass("is-open")&&($("#conversation-area-gif-button").parents("#chat-conversation-area").find(".convertfox-messanger-gif-select").removeClass("is-open"),$("#conversation-area-gif-button").addClass("focus")),$("#home-page-gif-button").parents("#conversation-list-area").find(".convertfox-messanger-gif-select").hasClass("is-open")&&($("#home-page-gif-button").parents("#conversation-list-area").find(".convertfox-messanger-gif-select").removeClass("is-open"),$("#home-page-gif-button").addClass("focus")),$(".convertfox-messanger-emoji-select").hasClass("is-open")||($(".convertfox-messanger-message-actions circle#Oval1, .convertfox-messanger-message-actions circle#Oval2,.convertfox-messanger-message-actions circle#Oval3, .convertfox-messanger-message-emojis path#Shape, .convertfox-messanger-message-actions circle#Oval-Copy").css("stroke","rgb(185, 190, 198)"),$(".convertfox-messanger-message-actions circle#small1, .convertfox-messanger-message-actions circle#small1-Copy, .convertfox-messanger-message-actions circle#small2, .convertfox-messanger-message-actions circle#small2-Copy, .convertfox-messanger-message-actions circle#small3, .convertfox-messanger-message-actions circle#small3-Copy").css("fill","rgb(185, 190, 198)")),$(".convertfox-messanger-gif-select").hasClass("is-open")||$(".convertfox-messanger-message-actions path#gif-path-1, .convertfox-messanger-message-actions path#gif-path-2").css("stroke","rgb(185, 190, 198)"),e.closest(".convertfox-messanger-textarea").find(".convertfox-messanger-message-actions").addClass("show-send")}()});var agentAvailability=[],officeHours=[],timeZone="Etc/UTC",agentCurrentDate,agentCurrentDay,timeDifferenceText=null,isFindNextAgentActiveDate=!1,isWeekendStatus=null,nonWorkingDays=[],checkCurrentDayWorkingDayOrNot=!0,currentWeekAvailability=[],nextAvailability=[],nextAvailableDate="",displayDateFormat="MMM DD, YYYY";userDateFormat="DD/MM/YYYY",userDateFormatWithHHMM="DD/MM/YYYY HH:mm";